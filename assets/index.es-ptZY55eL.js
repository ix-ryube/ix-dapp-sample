import{g as Cu,a as Au,c as Jr,_ as jw}from"./index-2a8Vcb8y.js";var Tu={exports:{}},Mn=typeof Reflect=="object"?Reflect:null,Zl=Mn&&typeof Mn.apply=="function"?Mn.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},Vo;Mn&&typeof Mn.ownKeys=="function"?Vo=Mn.ownKeys:Object.getOwnPropertySymbols?Vo=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vo=function(e){return Object.getOwnPropertyNames(e)};function qw(i){console&&console.warn&&console.warn(i)}var jd=Number.isNaN||function(e){return e!==e};function ot(){ot.init.call(this)}Tu.exports=ot;Tu.exports.once=Bw;ot.EventEmitter=ot;ot.prototype._events=void 0;ot.prototype._eventsCount=0;ot.prototype._maxListeners=void 0;var ef=10;function na(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(ot,"defaultMaxListeners",{enumerable:!0,get:function(){return ef},set:function(i){if(typeof i!="number"||i<0||jd(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");ef=i}});ot.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||jd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function qd(i){return i._maxListeners===void 0?ot.defaultMaxListeners:i._maxListeners}ot.prototype.getMaxListeners=function(){return qd(this)};ot.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var d;if(t.length>0&&(d=t[0]),d instanceof Error)throw d;var f=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw f.context=d,f}var y=c[e];if(y===void 0)return!1;if(typeof y=="function")Zl(y,this,t);else for(var g=y.length,m=Kd(y,g),s=0;s<g;++s)Zl(m[s],this,t);return!0};function Fd(i,e,t,s){var o,c,d;if(na(t),c=i._events,c===void 0?(c=i._events=Object.create(null),i._eventsCount=0):(c.newListener!==void 0&&(i.emit("newListener",e,t.listener?t.listener:t),c=i._events),d=c[e]),d===void 0)d=c[e]=t,++i._eventsCount;else if(typeof d=="function"?d=c[e]=s?[t,d]:[d,t]:s?d.unshift(t):d.push(t),o=qd(i),o>0&&d.length>o&&!d.warned){d.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=i,f.type=e,f.count=d.length,qw(f)}return i}ot.prototype.addListener=function(e,t){return Fd(this,e,t,!1)};ot.prototype.on=ot.prototype.addListener;ot.prototype.prependListener=function(e,t){return Fd(this,e,t,!0)};function Fw(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zd(i,e,t){var s={fired:!1,wrapFn:void 0,target:i,type:e,listener:t},o=Fw.bind(s);return o.listener=t,s.wrapFn=o,o}ot.prototype.once=function(e,t){return na(t),this.on(e,zd(this,e,t)),this};ot.prototype.prependOnceListener=function(e,t){return na(t),this.prependListener(e,zd(this,e,t)),this};ot.prototype.removeListener=function(e,t){var s,o,c,d,f;if(na(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(c=-1,d=s.length-1;d>=0;d--)if(s[d]===t||s[d].listener===t){f=s[d].listener,c=d;break}if(c<0)return this;c===0?s.shift():zw(s,c),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};ot.prototype.off=ot.prototype.removeListener;ot.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var c=Object.keys(s),d;for(o=0;o<c.length;++o)d=c[o],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function Hd(i,e,t){var s=i._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?Hw(o):Kd(o,o.length)}ot.prototype.listeners=function(e){return Hd(this,e,!0)};ot.prototype.rawListeners=function(e){return Hd(this,e,!1)};ot.listenerCount=function(i,e){return typeof i.listenerCount=="function"?i.listenerCount(e):Bd.call(i,e)};ot.prototype.listenerCount=Bd;function Bd(i){var e=this._events;if(e!==void 0){var t=e[i];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}ot.prototype.eventNames=function(){return this._eventsCount>0?Vo(this._events):[]};function Kd(i,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=i[s];return t}function zw(i,e){for(;e+1<i.length;e++)i[e]=i[e+1];i.pop()}function Hw(i){for(var e=new Array(i.length),t=0;t<e.length;++t)e[t]=i[t].listener||i[t];return e}function Bw(i,e){return new Promise(function(t,s){function o(d){i.removeListener(e,c),s(d)}function c(){typeof i.removeListener=="function"&&i.removeListener("error",o),t([].slice.call(arguments))}kd(i,e,c,{once:!0}),e!=="error"&&Kw(i,o,{once:!0})})}function Kw(i,e,t){typeof i.on=="function"&&kd(i,"error",e,t)}function kd(i,e,t,s){if(typeof i.on=="function")s.once?i.once(e,t):i.on(e,t);else if(typeof i.addEventListener=="function")i.addEventListener(e,function o(c){s.once&&i.removeEventListener(e,o),t(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var Cr=Tu.exports;const Ru=Cu(Cr);var Nu={},sa={},$e={},Vd={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});function e(f,y){var g=f>>>16&65535,m=f&65535,D=y>>>16&65535,I=y&65535;return m*I+(g*I+m*D<<16>>>0)|0}i.mul=Math.imul||e;function t(f,y){return f+y|0}i.add=t;function s(f,y){return f-y|0}i.sub=s;function o(f,y){return f<<y|f>>>32-y}i.rotl=o;function c(f,y){return f<<32-y|f>>>y}i.rotr=c;function d(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f}i.isInteger=Number.isInteger||d,i.MAX_SAFE_INTEGER=9007199254740991,i.isSafeInteger=function(f){return i.isInteger(f)&&f>=-i.MAX_SAFE_INTEGER&&f<=i.MAX_SAFE_INTEGER}})(Vd);Object.defineProperty($e,"__esModule",{value:!0});var Wd=Vd;function kw(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])<<16>>16}$e.readInt16BE=kw;function Vw(i,e){return e===void 0&&(e=0),(i[e+0]<<8|i[e+1])>>>0}$e.readUint16BE=Vw;function Ww(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])<<16>>16}$e.readInt16LE=Ww;function Gw(i,e){return e===void 0&&(e=0),(i[e+1]<<8|i[e])>>>0}$e.readUint16LE=Gw;function Gd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>8,e[t+1]=i>>>0,e}$e.writeUint16BE=Gd;$e.writeInt16BE=Gd;function Yd(i,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e}$e.writeUint16LE=Yd;$e.writeInt16LE=Yd;function au(i,e){return e===void 0&&(e=0),i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}$e.readInt32BE=au;function cu(i,e){return e===void 0&&(e=0),(i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3])>>>0}$e.readUint32BE=cu;function uu(i,e){return e===void 0&&(e=0),i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}$e.readInt32LE=uu;function hu(i,e){return e===void 0&&(e=0),(i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e])>>>0}$e.readUint32LE=hu;function Qo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>24,e[t+1]=i>>>16,e[t+2]=i>>>8,e[t+3]=i>>>0,e}$e.writeUint32BE=Qo;$e.writeInt32BE=Qo;function Xo(i,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=i>>>0,e[t+1]=i>>>8,e[t+2]=i>>>16,e[t+3]=i>>>24,e}$e.writeUint32LE=Xo;$e.writeInt32LE=Xo;function Yw(i,e){e===void 0&&(e=0);var t=au(i,e),s=au(i,e+4);return t*4294967296+s-(s>>31)*4294967296}$e.readInt64BE=Yw;function Jw(i,e){e===void 0&&(e=0);var t=cu(i,e),s=cu(i,e+4);return t*4294967296+s}$e.readUint64BE=Jw;function Qw(i,e){e===void 0&&(e=0);var t=uu(i,e),s=uu(i,e+4);return s*4294967296+t-(t>>31)*4294967296}$e.readInt64LE=Qw;function Xw(i,e){e===void 0&&(e=0);var t=hu(i,e),s=hu(i,e+4);return s*4294967296+t}$e.readUint64LE=Xw;function Jd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Qo(i/4294967296>>>0,e,t),Qo(i>>>0,e,t+4),e}$e.writeUint64BE=Jd;$e.writeInt64BE=Jd;function Qd(i,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Xo(i>>>0,e,t),Xo(i/4294967296>>>0,e,t+4),e}$e.writeUint64LE=Qd;$e.writeInt64LE=Qd;function Zw(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=i/8+t-1;c>=t;c--)s+=e[c]*o,o*=256;return s}$e.readUintBE=Zw;function e1(i,e,t){if(t===void 0&&(t=0),i%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(i/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=t;c<t+i/8;c++)s+=e[c]*o,o*=256;return s}$e.readUintLE=e1;function t1(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Wd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=i/8+s-1;c>=s;c--)t[c]=e/o&255,o*=256;return t}$e.writeUintBE=t1;function r1(i,e,t,s){if(t===void 0&&(t=new Uint8Array(i/8)),s===void 0&&(s=0),i%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Wd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+i/8;c++)t[c]=e/o&255,o*=256;return t}$e.writeUintLE=r1;function i1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e)}$e.readFloat32BE=i1;function n1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat32(e,!0)}$e.readFloat32LE=n1;function s1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e)}$e.readFloat64BE=s1;function o1(i,e){e===void 0&&(e=0);var t=new DataView(i.buffer,i.byteOffset,i.byteLength);return t.getFloat64(e,!0)}$e.readFloat64LE=o1;function a1(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i),e}$e.writeFloat32BE=a1;function c1(i,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat32(t,i,!0),e}$e.writeFloat32LE=c1;function u1(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i),e}$e.writeFloat64BE=u1;function h1(i,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var s=new DataView(e.buffer,e.byteOffset,e.byteLength);return s.setFloat64(t,i,!0),e}$e.writeFloat64LE=h1;var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});function l1(i){for(var e=0;e<i.length;e++)i[e]=0;return i}Ar.wipe=l1;Object.defineProperty(sa,"__esModule",{value:!0});var er=$e,lu=Ar,f1=20;function d1(i,e,t){for(var s=1634760805,o=857760878,c=2036477234,d=1797285236,f=t[3]<<24|t[2]<<16|t[1]<<8|t[0],y=t[7]<<24|t[6]<<16|t[5]<<8|t[4],g=t[11]<<24|t[10]<<16|t[9]<<8|t[8],m=t[15]<<24|t[14]<<16|t[13]<<8|t[12],D=t[19]<<24|t[18]<<16|t[17]<<8|t[16],I=t[23]<<24|t[22]<<16|t[21]<<8|t[20],A=t[27]<<24|t[26]<<16|t[25]<<8|t[24],P=t[31]<<24|t[30]<<16|t[29]<<8|t[28],H=e[3]<<24|e[2]<<16|e[1]<<8|e[0],B=e[7]<<24|e[6]<<16|e[5]<<8|e[4],ne=e[11]<<24|e[10]<<16|e[9]<<8|e[8],L=e[15]<<24|e[14]<<16|e[13]<<8|e[12],$=s,x=o,R=c,E=d,u=f,w=y,W=g,G=m,se=D,ce=I,de=A,b=P,C=H,ee=B,Q=ne,k=L,V=0;V<f1;V+=2)$=$+u|0,C^=$,C=C>>>16|C<<16,se=se+C|0,u^=se,u=u>>>20|u<<12,x=x+w|0,ee^=x,ee=ee>>>16|ee<<16,ce=ce+ee|0,w^=ce,w=w>>>20|w<<12,R=R+W|0,Q^=R,Q=Q>>>16|Q<<16,de=de+Q|0,W^=de,W=W>>>20|W<<12,E=E+G|0,k^=E,k=k>>>16|k<<16,b=b+k|0,G^=b,G=G>>>20|G<<12,R=R+W|0,Q^=R,Q=Q>>>24|Q<<8,de=de+Q|0,W^=de,W=W>>>25|W<<7,E=E+G|0,k^=E,k=k>>>24|k<<8,b=b+k|0,G^=b,G=G>>>25|G<<7,x=x+w|0,ee^=x,ee=ee>>>24|ee<<8,ce=ce+ee|0,w^=ce,w=w>>>25|w<<7,$=$+u|0,C^=$,C=C>>>24|C<<8,se=se+C|0,u^=se,u=u>>>25|u<<7,$=$+w|0,k^=$,k=k>>>16|k<<16,de=de+k|0,w^=de,w=w>>>20|w<<12,x=x+W|0,C^=x,C=C>>>16|C<<16,b=b+C|0,W^=b,W=W>>>20|W<<12,R=R+G|0,ee^=R,ee=ee>>>16|ee<<16,se=se+ee|0,G^=se,G=G>>>20|G<<12,E=E+u|0,Q^=E,Q=Q>>>16|Q<<16,ce=ce+Q|0,u^=ce,u=u>>>20|u<<12,R=R+G|0,ee^=R,ee=ee>>>24|ee<<8,se=se+ee|0,G^=se,G=G>>>25|G<<7,E=E+u|0,Q^=E,Q=Q>>>24|Q<<8,ce=ce+Q|0,u^=ce,u=u>>>25|u<<7,x=x+W|0,C^=x,C=C>>>24|C<<8,b=b+C|0,W^=b,W=W>>>25|W<<7,$=$+w|0,k^=$,k=k>>>24|k<<8,de=de+k|0,w^=de,w=w>>>25|w<<7;er.writeUint32LE($+s|0,i,0),er.writeUint32LE(x+o|0,i,4),er.writeUint32LE(R+c|0,i,8),er.writeUint32LE(E+d|0,i,12),er.writeUint32LE(u+f|0,i,16),er.writeUint32LE(w+y|0,i,20),er.writeUint32LE(W+g|0,i,24),er.writeUint32LE(G+m|0,i,28),er.writeUint32LE(se+D|0,i,32),er.writeUint32LE(ce+I|0,i,36),er.writeUint32LE(de+A|0,i,40),er.writeUint32LE(b+P|0,i,44),er.writeUint32LE(C+H|0,i,48),er.writeUint32LE(ee+B|0,i,52),er.writeUint32LE(Q+ne|0,i,56),er.writeUint32LE(k+L|0,i,60)}function Xd(i,e,t,s,o){if(o===void 0&&(o=0),i.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<t.length)throw new Error("ChaCha: destination is shorter than source");var c,d;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),d=c.length-e.length,c.set(e,d)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,d=o}for(var f=new Uint8Array(64),y=0;y<t.length;y+=64){d1(f,c,i);for(var g=y;g<y+64&&g<t.length;g++)s[g]=t[g]^f[g-y];g1(c,0,d)}return lu.wipe(f),o===0&&lu.wipe(c),s}sa.streamXOR=Xd;function p1(i,e,t,s){return s===void 0&&(s=0),lu.wipe(t),Xd(i,e,t,t,s)}sa.stream=p1;function g1(i,e,t){for(var s=1;t--;)s=s+(i[e]&255)|0,i[e]=s&255,s>>>=8,e++;if(s>0)throw new Error("ChaCha: counter overflow")}var Zd={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});function y1(i,e,t){return~(i-1)&e|i-1&t}Fi.select=y1;function v1(i,e){return(i|0)-(e|0)-1>>>31&1}Fi.lessOrEqual=v1;function ep(i,e){if(i.length!==e.length)return 0;for(var t=0,s=0;s<i.length;s++)t|=i[s]^e[s];return 1&t-1>>>8}Fi.compare=ep;function m1(i,e){return i.length===0||e.length===0?!1:ep(i,e)!==0}Fi.equal=m1;(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=Fi,t=Ar;i.DIGEST_LENGTH=16;var s=function(){function d(f){this.digestLength=i.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var y=f[0]|f[1]<<8;this._r[0]=y&8191;var g=f[2]|f[3]<<8;this._r[1]=(y>>>13|g<<3)&8191;var m=f[4]|f[5]<<8;this._r[2]=(g>>>10|m<<6)&7939;var D=f[6]|f[7]<<8;this._r[3]=(m>>>7|D<<9)&8191;var I=f[8]|f[9]<<8;this._r[4]=(D>>>4|I<<12)&255,this._r[5]=I>>>1&8190;var A=f[10]|f[11]<<8;this._r[6]=(I>>>14|A<<2)&8191;var P=f[12]|f[13]<<8;this._r[7]=(A>>>11|P<<5)&8065;var H=f[14]|f[15]<<8;this._r[8]=(P>>>8|H<<8)&8191,this._r[9]=H>>>5&127,this._pad[0]=f[16]|f[17]<<8,this._pad[1]=f[18]|f[19]<<8,this._pad[2]=f[20]|f[21]<<8,this._pad[3]=f[22]|f[23]<<8,this._pad[4]=f[24]|f[25]<<8,this._pad[5]=f[26]|f[27]<<8,this._pad[6]=f[28]|f[29]<<8,this._pad[7]=f[30]|f[31]<<8}return d.prototype._blocks=function(f,y,g){for(var m=this._fin?0:2048,D=this._h[0],I=this._h[1],A=this._h[2],P=this._h[3],H=this._h[4],B=this._h[5],ne=this._h[6],L=this._h[7],$=this._h[8],x=this._h[9],R=this._r[0],E=this._r[1],u=this._r[2],w=this._r[3],W=this._r[4],G=this._r[5],se=this._r[6],ce=this._r[7],de=this._r[8],b=this._r[9];g>=16;){var C=f[y+0]|f[y+1]<<8;D+=C&8191;var ee=f[y+2]|f[y+3]<<8;I+=(C>>>13|ee<<3)&8191;var Q=f[y+4]|f[y+5]<<8;A+=(ee>>>10|Q<<6)&8191;var k=f[y+6]|f[y+7]<<8;P+=(Q>>>7|k<<9)&8191;var V=f[y+8]|f[y+9]<<8;H+=(k>>>4|V<<12)&8191,B+=V>>>1&8191;var J=f[y+10]|f[y+11]<<8;ne+=(V>>>14|J<<2)&8191;var re=f[y+12]|f[y+13]<<8;L+=(J>>>11|re<<5)&8191;var we=f[y+14]|f[y+15]<<8;$+=(re>>>8|we<<8)&8191,x+=we>>>5|m;var oe=0,be=oe;be+=D*R,be+=I*(5*b),be+=A*(5*de),be+=P*(5*ce),be+=H*(5*se),oe=be>>>13,be&=8191,be+=B*(5*G),be+=ne*(5*W),be+=L*(5*w),be+=$*(5*u),be+=x*(5*E),oe+=be>>>13,be&=8191;var le=oe;le+=D*E,le+=I*R,le+=A*(5*b),le+=P*(5*de),le+=H*(5*ce),oe=le>>>13,le&=8191,le+=B*(5*se),le+=ne*(5*G),le+=L*(5*W),le+=$*(5*w),le+=x*(5*u),oe+=le>>>13,le&=8191;var me=oe;me+=D*u,me+=I*E,me+=A*R,me+=P*(5*b),me+=H*(5*de),oe=me>>>13,me&=8191,me+=B*(5*ce),me+=ne*(5*se),me+=L*(5*G),me+=$*(5*W),me+=x*(5*w),oe+=me>>>13,me&=8191;var z=oe;z+=D*w,z+=I*u,z+=A*E,z+=P*R,z+=H*(5*b),oe=z>>>13,z&=8191,z+=B*(5*de),z+=ne*(5*ce),z+=L*(5*se),z+=$*(5*G),z+=x*(5*W),oe+=z>>>13,z&=8191;var F=oe;F+=D*W,F+=I*w,F+=A*u,F+=P*E,F+=H*R,oe=F>>>13,F&=8191,F+=B*(5*b),F+=ne*(5*de),F+=L*(5*ce),F+=$*(5*se),F+=x*(5*G),oe+=F>>>13,F&=8191;var U=oe;U+=D*G,U+=I*W,U+=A*w,U+=P*u,U+=H*E,oe=U>>>13,U&=8191,U+=B*R,U+=ne*(5*b),U+=L*(5*de),U+=$*(5*ce),U+=x*(5*se),oe+=U>>>13,U&=8191;var l=oe;l+=D*se,l+=I*G,l+=A*W,l+=P*w,l+=H*u,oe=l>>>13,l&=8191,l+=B*E,l+=ne*R,l+=L*(5*b),l+=$*(5*de),l+=x*(5*ce),oe+=l>>>13,l&=8191;var T=oe;T+=D*ce,T+=I*se,T+=A*G,T+=P*W,T+=H*w,oe=T>>>13,T&=8191,T+=B*u,T+=ne*E,T+=L*R,T+=$*(5*b),T+=x*(5*de),oe+=T>>>13,T&=8191;var ae=oe;ae+=D*de,ae+=I*ce,ae+=A*se,ae+=P*G,ae+=H*W,oe=ae>>>13,ae&=8191,ae+=B*w,ae+=ne*u,ae+=L*E,ae+=$*R,ae+=x*(5*b),oe+=ae>>>13,ae&=8191;var fe=oe;fe+=D*b,fe+=I*de,fe+=A*ce,fe+=P*se,fe+=H*G,oe=fe>>>13,fe&=8191,fe+=B*W,fe+=ne*w,fe+=L*u,fe+=$*E,fe+=x*R,oe+=fe>>>13,fe&=8191,oe=(oe<<2)+oe|0,oe=oe+be|0,be=oe&8191,oe=oe>>>13,le+=oe,D=be,I=le,A=me,P=z,H=F,B=U,ne=l,L=T,$=ae,x=fe,y+=16,g-=16}this._h[0]=D,this._h[1]=I,this._h[2]=A,this._h[3]=P,this._h[4]=H,this._h[5]=B,this._h[6]=ne,this._h[7]=L,this._h[8]=$,this._h[9]=x},d.prototype.finish=function(f,y){y===void 0&&(y=0);var g=new Uint16Array(10),m,D,I,A;if(this._leftover){for(A=this._leftover,this._buffer[A++]=1;A<16;A++)this._buffer[A]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(m=this._h[1]>>>13,this._h[1]&=8191,A=2;A<10;A++)this._h[A]+=m,m=this._h[A]>>>13,this._h[A]&=8191;for(this._h[0]+=m*5,m=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=m,m=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=m,g[0]=this._h[0]+5,m=g[0]>>>13,g[0]&=8191,A=1;A<10;A++)g[A]=this._h[A]+m,m=g[A]>>>13,g[A]&=8191;for(g[9]-=8192,D=(m^1)-1,A=0;A<10;A++)g[A]&=D;for(D=~D,A=0;A<10;A++)this._h[A]=this._h[A]&D|g[A];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,I=this._h[0]+this._pad[0],this._h[0]=I&65535,A=1;A<8;A++)I=(this._h[A]+this._pad[A]|0)+(I>>>16)|0,this._h[A]=I&65535;return f[y+0]=this._h[0]>>>0,f[y+1]=this._h[0]>>>8,f[y+2]=this._h[1]>>>0,f[y+3]=this._h[1]>>>8,f[y+4]=this._h[2]>>>0,f[y+5]=this._h[2]>>>8,f[y+6]=this._h[3]>>>0,f[y+7]=this._h[3]>>>8,f[y+8]=this._h[4]>>>0,f[y+9]=this._h[4]>>>8,f[y+10]=this._h[5]>>>0,f[y+11]=this._h[5]>>>8,f[y+12]=this._h[6]>>>0,f[y+13]=this._h[6]>>>8,f[y+14]=this._h[7]>>>0,f[y+15]=this._h[7]>>>8,this._finished=!0,this},d.prototype.update=function(f){var y=0,g=f.length,m;if(this._leftover){m=16-this._leftover,m>g&&(m=g);for(var D=0;D<m;D++)this._buffer[this._leftover+D]=f[y+D];if(g-=m,y+=m,this._leftover+=m,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(g>=16&&(m=g-g%16,this._blocks(f,y,m),y+=m,g-=m),g){for(var D=0;D<g;D++)this._buffer[this._leftover+D]=f[y+D];this._leftover+=g}return this},d.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var f=new Uint8Array(16);return this.finish(f),f},d.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},d}();i.Poly1305=s;function o(d,f){var y=new s(d);y.update(f);var g=y.digest();return y.clean(),g}i.oneTimeAuth=o;function c(d,f){return d.length!==i.DIGEST_LENGTH||f.length!==i.DIGEST_LENGTH?!1:e.equal(d,f)}i.equal=c})(Zd);(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=sa,t=Zd,s=Ar,o=$e,c=Fi;i.KEY_LENGTH=32,i.NONCE_LENGTH=12,i.TAG_LENGTH=16;var d=new Uint8Array(16),f=function(){function y(g){if(this.nonceLength=i.NONCE_LENGTH,this.tagLength=i.TAG_LENGTH,g.length!==i.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(g)}return y.prototype.seal=function(g,m,D,I){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var A=new Uint8Array(16);A.set(g,A.length-g.length);var P=new Uint8Array(32);e.stream(this._key,A,P,4);var H=m.length+this.tagLength,B;if(I){if(I.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");B=I}else B=new Uint8Array(H);return e.streamXOR(this._key,A,m,B,4),this._authenticate(B.subarray(B.length-this.tagLength,B.length),P,B.subarray(0,B.length-this.tagLength),D),s.wipe(A),B},y.prototype.open=function(g,m,D,I){if(g.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(m.length<this.tagLength)return null;var A=new Uint8Array(16);A.set(g,A.length-g.length);var P=new Uint8Array(32);e.stream(this._key,A,P,4);var H=new Uint8Array(this.tagLength);if(this._authenticate(H,P,m.subarray(0,m.length-this.tagLength),D),!c.equal(H,m.subarray(m.length-this.tagLength,m.length)))return null;var B=m.length-this.tagLength,ne;if(I){if(I.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");ne=I}else ne=new Uint8Array(B);return e.streamXOR(this._key,A,m.subarray(0,m.length-this.tagLength),ne,4),s.wipe(A),ne},y.prototype.clean=function(){return s.wipe(this._key),this},y.prototype._authenticate=function(g,m,D,I){var A=new t.Poly1305(m);I&&(A.update(I),I.length%16>0&&A.update(d.subarray(I.length%16))),A.update(D),D.length%16>0&&A.update(d.subarray(D.length%16));var P=new Uint8Array(8);I&&o.writeUint64LE(I.length,P),A.update(P),o.writeUint64LE(D.length,P),A.update(P);for(var H=A.digest(),B=0;B<H.length;B++)g[B]=H[B];A.clean(),s.wipe(H),s.wipe(P)},y}();i.ChaCha20Poly1305=f})(Nu);var tp={},Ps={},Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});function _1(i){return typeof i.saveState<"u"&&typeof i.restoreState<"u"&&typeof i.cleanSavedState<"u"}Lu.isSerializableHash=_1;Object.defineProperty(Ps,"__esModule",{value:!0});var ii=Lu,w1=Fi,b1=Ar,rp=function(){function i(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(s).clean():s.set(t);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),ii.isSerializableHash(this._inner)&&ii.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),b1.wipe(s)}return i.prototype.reset=function(){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.clean=function(){ii.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ii.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},i.prototype.update=function(e){return this._inner.update(e),this},i.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},i.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},i.prototype.saveState=function(){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},i.prototype.restoreState=function(e){if(!ii.isSerializableHash(this._inner)||!ii.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},i.prototype.cleanSavedState=function(e){if(!ii.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},i}();Ps.HMAC=rp;function E1(i,e,t){var s=new rp(i,e);s.update(t);var o=s.digest();return s.clean(),o}Ps.hmac=E1;Ps.equal=w1.equal;Object.defineProperty(tp,"__esModule",{value:!0});var tf=Ps,rf=Ar,D1=function(){function i(e,t,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=tf.hmac(this._hash,s,t);this._hmac=new tf.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return i.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},i.prototype.expand=function(e){for(var t=new Uint8Array(e),s=0;s<t.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[s]=this._buffer[this._bufpos++];return t},i.prototype.clean=function(){this._hmac.clean(),rf.wipe(this._buffer),rf.wipe(this._counter),this._bufpos=0},i}(),S1=tp.HKDF=D1,zn={},oa={},aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.BrowserRandomSource=void 0;const nf=65536;class I1{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let s=0;s<t.length;s+=nf)this._crypto.getRandomValues(t.subarray(s,s+Math.min(t.length-s,nf)));return t}}aa.BrowserRandomSource=I1;function x1(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ca={};const O1={},P1=Object.freeze(Object.defineProperty({__proto__:null,default:O1},Symbol.toStringTag,{value:"Module"})),C1=Au(P1);Object.defineProperty(ca,"__esModule",{value:!0});ca.NodeRandomSource=void 0;const A1=Ar;class T1{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof x1<"u"){const e=C1;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(e);for(let o=0;o<s.length;o++)s[o]=t[o];return(0,A1.wipe)(t),s}}ca.NodeRandomSource=T1;Object.defineProperty(oa,"__esModule",{value:!0});oa.SystemRandomSource=void 0;const R1=aa,N1=ca;class L1{constructor(){if(this.isAvailable=!1,this.name="",this._source=new R1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new N1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}oa.SystemRandomSource=L1;(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.randomStringForEntropy=i.randomString=i.randomUint32=i.randomBytes=i.defaultRandomSource=void 0;const e=oa,t=$e,s=Ar;i.defaultRandomSource=new e.SystemRandomSource;function o(g,m=i.defaultRandomSource){return m.randomBytes(g)}i.randomBytes=o;function c(g=i.defaultRandomSource){const m=o(4,g),D=(0,t.readUint32LE)(m);return(0,s.wipe)(m),D}i.randomUint32=c;const d="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function f(g,m=d,D=i.defaultRandomSource){if(m.length<2)throw new Error("randomString charset is too short");if(m.length>256)throw new Error("randomString charset is too long");let I="";const A=m.length,P=256-256%A;for(;g>0;){const H=o(Math.ceil(g*256/P),D);for(let B=0;B<H.length&&g>0;B++){const ne=H[B];ne<P&&(I+=m.charAt(ne%A),g--)}(0,s.wipe)(H)}return I}i.randomString=f;function y(g,m=d,D=i.defaultRandomSource){const I=Math.ceil(g/(Math.log(m.length)/Math.LN2));return f(I,m,D)}i.randomStringForEntropy=y})(zn);var ua={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=$e,t=Ar;i.DIGEST_LENGTH=32,i.BLOCK_SIZE=64;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},f.prototype.update=function(y,g){if(g===void 0&&(g=y.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var m=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&g>0;)this._buffer[this._bufferLength++]=y[m++],g--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(m=c(this._temp,this._state,y,m,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=y[m++],g--;return this},f.prototype.finish=function(y){if(!this._finished){var g=this._bytesHashed,m=this._bufferLength,D=g/536870912|0,I=g<<3,A=g%64<56?64:128;this._buffer[m]=128;for(var P=m+1;P<A-8;P++)this._buffer[P]=0;e.writeUint32BE(D,this._buffer,A-8),e.writeUint32BE(I,this._buffer,A-4),c(this._temp,this._state,this._buffer,0,A),this._finished=!0}for(var P=0;P<this.digestLength/4;P++)e.writeUint32BE(this._state[P],y,P*4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._state.set(y.state),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.state),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();i.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(f,y,g,m,D){for(;D>=64;){for(var I=y[0],A=y[1],P=y[2],H=y[3],B=y[4],ne=y[5],L=y[6],$=y[7],x=0;x<16;x++){var R=m+x*4;f[x]=e.readUint32BE(g,R)}for(var x=16;x<64;x++){var E=f[x-2],u=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=f[x-15];var w=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;f[x]=(u+f[x-7]|0)+(w+f[x-16]|0)}for(var x=0;x<64;x++){var u=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&ne^~B&L)|0)+($+(o[x]+f[x]|0)|0)|0,w=((I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10))+(I&A^I&P^A&P)|0;$=L,L=ne,ne=B,B=H+u|0,H=P,P=A,A=I,I=u+w|0}y[0]+=I,y[1]+=A,y[2]+=P,y[3]+=H,y[4]+=B,y[5]+=ne,y[6]+=L,y[7]+=$,m+=64,D-=64}return m}function d(f){var y=new s;y.update(f);var g=y.digest();return y.clean(),g}i.hash=d})(ua);var Uu={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.sharedKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.scalarMultBase=i.scalarMult=i.SHARED_KEY_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=void 0;const e=zn,t=Ar;i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=32,i.SHARED_KEY_LENGTH=32;function s(x){const R=new Float64Array(16);if(x)for(let E=0;E<x.length;E++)R[E]=x[E];return R}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function d(x){let R=1;for(let E=0;E<16;E++){let u=x[E]+R+65535;R=Math.floor(u/65536),x[E]=u-R*65536}x[0]+=R-1+37*(R-1)}function f(x,R,E){const u=~(E-1);for(let w=0;w<16;w++){const W=u&(x[w]^R[w]);x[w]^=W,R[w]^=W}}function y(x,R){const E=s(),u=s();for(let w=0;w<16;w++)u[w]=R[w];d(u),d(u),d(u);for(let w=0;w<2;w++){E[0]=u[0]-65517;for(let G=1;G<15;G++)E[G]=u[G]-65535-(E[G-1]>>16&1),E[G-1]&=65535;E[15]=u[15]-32767-(E[14]>>16&1);const W=E[15]>>16&1;E[14]&=65535,f(u,E,1-W)}for(let w=0;w<16;w++)x[2*w]=u[w]&255,x[2*w+1]=u[w]>>8}function g(x,R){for(let E=0;E<16;E++)x[E]=R[2*E]+(R[2*E+1]<<8);x[15]&=32767}function m(x,R,E){for(let u=0;u<16;u++)x[u]=R[u]+E[u]}function D(x,R,E){for(let u=0;u<16;u++)x[u]=R[u]-E[u]}function I(x,R,E){let u,w,W=0,G=0,se=0,ce=0,de=0,b=0,C=0,ee=0,Q=0,k=0,V=0,J=0,re=0,we=0,oe=0,be=0,le=0,me=0,z=0,F=0,U=0,l=0,T=0,ae=0,fe=0,Ie=0,He=0,ke=0,Me=0,gt=0,yt=0,qe=E[0],xe=E[1],Ne=E[2],Le=E[3],Fe=E[4],Pe=E[5],Ue=E[6],Se=E[7],Ce=E[8],Be=E[9],Oe=E[10],Ve=E[11],Ge=E[12],et=E[13],tt=E[14],Je=E[15];u=R[0],W+=u*qe,G+=u*xe,se+=u*Ne,ce+=u*Le,de+=u*Fe,b+=u*Pe,C+=u*Ue,ee+=u*Se,Q+=u*Ce,k+=u*Be,V+=u*Oe,J+=u*Ve,re+=u*Ge,we+=u*et,oe+=u*tt,be+=u*Je,u=R[1],G+=u*qe,se+=u*xe,ce+=u*Ne,de+=u*Le,b+=u*Fe,C+=u*Pe,ee+=u*Ue,Q+=u*Se,k+=u*Ce,V+=u*Be,J+=u*Oe,re+=u*Ve,we+=u*Ge,oe+=u*et,be+=u*tt,le+=u*Je,u=R[2],se+=u*qe,ce+=u*xe,de+=u*Ne,b+=u*Le,C+=u*Fe,ee+=u*Pe,Q+=u*Ue,k+=u*Se,V+=u*Ce,J+=u*Be,re+=u*Oe,we+=u*Ve,oe+=u*Ge,be+=u*et,le+=u*tt,me+=u*Je,u=R[3],ce+=u*qe,de+=u*xe,b+=u*Ne,C+=u*Le,ee+=u*Fe,Q+=u*Pe,k+=u*Ue,V+=u*Se,J+=u*Ce,re+=u*Be,we+=u*Oe,oe+=u*Ve,be+=u*Ge,le+=u*et,me+=u*tt,z+=u*Je,u=R[4],de+=u*qe,b+=u*xe,C+=u*Ne,ee+=u*Le,Q+=u*Fe,k+=u*Pe,V+=u*Ue,J+=u*Se,re+=u*Ce,we+=u*Be,oe+=u*Oe,be+=u*Ve,le+=u*Ge,me+=u*et,z+=u*tt,F+=u*Je,u=R[5],b+=u*qe,C+=u*xe,ee+=u*Ne,Q+=u*Le,k+=u*Fe,V+=u*Pe,J+=u*Ue,re+=u*Se,we+=u*Ce,oe+=u*Be,be+=u*Oe,le+=u*Ve,me+=u*Ge,z+=u*et,F+=u*tt,U+=u*Je,u=R[6],C+=u*qe,ee+=u*xe,Q+=u*Ne,k+=u*Le,V+=u*Fe,J+=u*Pe,re+=u*Ue,we+=u*Se,oe+=u*Ce,be+=u*Be,le+=u*Oe,me+=u*Ve,z+=u*Ge,F+=u*et,U+=u*tt,l+=u*Je,u=R[7],ee+=u*qe,Q+=u*xe,k+=u*Ne,V+=u*Le,J+=u*Fe,re+=u*Pe,we+=u*Ue,oe+=u*Se,be+=u*Ce,le+=u*Be,me+=u*Oe,z+=u*Ve,F+=u*Ge,U+=u*et,l+=u*tt,T+=u*Je,u=R[8],Q+=u*qe,k+=u*xe,V+=u*Ne,J+=u*Le,re+=u*Fe,we+=u*Pe,oe+=u*Ue,be+=u*Se,le+=u*Ce,me+=u*Be,z+=u*Oe,F+=u*Ve,U+=u*Ge,l+=u*et,T+=u*tt,ae+=u*Je,u=R[9],k+=u*qe,V+=u*xe,J+=u*Ne,re+=u*Le,we+=u*Fe,oe+=u*Pe,be+=u*Ue,le+=u*Se,me+=u*Ce,z+=u*Be,F+=u*Oe,U+=u*Ve,l+=u*Ge,T+=u*et,ae+=u*tt,fe+=u*Je,u=R[10],V+=u*qe,J+=u*xe,re+=u*Ne,we+=u*Le,oe+=u*Fe,be+=u*Pe,le+=u*Ue,me+=u*Se,z+=u*Ce,F+=u*Be,U+=u*Oe,l+=u*Ve,T+=u*Ge,ae+=u*et,fe+=u*tt,Ie+=u*Je,u=R[11],J+=u*qe,re+=u*xe,we+=u*Ne,oe+=u*Le,be+=u*Fe,le+=u*Pe,me+=u*Ue,z+=u*Se,F+=u*Ce,U+=u*Be,l+=u*Oe,T+=u*Ve,ae+=u*Ge,fe+=u*et,Ie+=u*tt,He+=u*Je,u=R[12],re+=u*qe,we+=u*xe,oe+=u*Ne,be+=u*Le,le+=u*Fe,me+=u*Pe,z+=u*Ue,F+=u*Se,U+=u*Ce,l+=u*Be,T+=u*Oe,ae+=u*Ve,fe+=u*Ge,Ie+=u*et,He+=u*tt,ke+=u*Je,u=R[13],we+=u*qe,oe+=u*xe,be+=u*Ne,le+=u*Le,me+=u*Fe,z+=u*Pe,F+=u*Ue,U+=u*Se,l+=u*Ce,T+=u*Be,ae+=u*Oe,fe+=u*Ve,Ie+=u*Ge,He+=u*et,ke+=u*tt,Me+=u*Je,u=R[14],oe+=u*qe,be+=u*xe,le+=u*Ne,me+=u*Le,z+=u*Fe,F+=u*Pe,U+=u*Ue,l+=u*Se,T+=u*Ce,ae+=u*Be,fe+=u*Oe,Ie+=u*Ve,He+=u*Ge,ke+=u*et,Me+=u*tt,gt+=u*Je,u=R[15],be+=u*qe,le+=u*xe,me+=u*Ne,z+=u*Le,F+=u*Fe,U+=u*Pe,l+=u*Ue,T+=u*Se,ae+=u*Ce,fe+=u*Be,Ie+=u*Oe,He+=u*Ve,ke+=u*Ge,Me+=u*et,gt+=u*tt,yt+=u*Je,W+=38*le,G+=38*me,se+=38*z,ce+=38*F,de+=38*U,b+=38*l,C+=38*T,ee+=38*ae,Q+=38*fe,k+=38*Ie,V+=38*He,J+=38*ke,re+=38*Me,we+=38*gt,oe+=38*yt,w=1,u=W+w+65535,w=Math.floor(u/65536),W=u-w*65536,u=G+w+65535,w=Math.floor(u/65536),G=u-w*65536,u=se+w+65535,w=Math.floor(u/65536),se=u-w*65536,u=ce+w+65535,w=Math.floor(u/65536),ce=u-w*65536,u=de+w+65535,w=Math.floor(u/65536),de=u-w*65536,u=b+w+65535,w=Math.floor(u/65536),b=u-w*65536,u=C+w+65535,w=Math.floor(u/65536),C=u-w*65536,u=ee+w+65535,w=Math.floor(u/65536),ee=u-w*65536,u=Q+w+65535,w=Math.floor(u/65536),Q=u-w*65536,u=k+w+65535,w=Math.floor(u/65536),k=u-w*65536,u=V+w+65535,w=Math.floor(u/65536),V=u-w*65536,u=J+w+65535,w=Math.floor(u/65536),J=u-w*65536,u=re+w+65535,w=Math.floor(u/65536),re=u-w*65536,u=we+w+65535,w=Math.floor(u/65536),we=u-w*65536,u=oe+w+65535,w=Math.floor(u/65536),oe=u-w*65536,u=be+w+65535,w=Math.floor(u/65536),be=u-w*65536,W+=w-1+37*(w-1),w=1,u=W+w+65535,w=Math.floor(u/65536),W=u-w*65536,u=G+w+65535,w=Math.floor(u/65536),G=u-w*65536,u=se+w+65535,w=Math.floor(u/65536),se=u-w*65536,u=ce+w+65535,w=Math.floor(u/65536),ce=u-w*65536,u=de+w+65535,w=Math.floor(u/65536),de=u-w*65536,u=b+w+65535,w=Math.floor(u/65536),b=u-w*65536,u=C+w+65535,w=Math.floor(u/65536),C=u-w*65536,u=ee+w+65535,w=Math.floor(u/65536),ee=u-w*65536,u=Q+w+65535,w=Math.floor(u/65536),Q=u-w*65536,u=k+w+65535,w=Math.floor(u/65536),k=u-w*65536,u=V+w+65535,w=Math.floor(u/65536),V=u-w*65536,u=J+w+65535,w=Math.floor(u/65536),J=u-w*65536,u=re+w+65535,w=Math.floor(u/65536),re=u-w*65536,u=we+w+65535,w=Math.floor(u/65536),we=u-w*65536,u=oe+w+65535,w=Math.floor(u/65536),oe=u-w*65536,u=be+w+65535,w=Math.floor(u/65536),be=u-w*65536,W+=w-1+37*(w-1),x[0]=W,x[1]=G,x[2]=se,x[3]=ce,x[4]=de,x[5]=b,x[6]=C,x[7]=ee,x[8]=Q,x[9]=k,x[10]=V,x[11]=J,x[12]=re,x[13]=we,x[14]=oe,x[15]=be}function A(x,R){I(x,R,R)}function P(x,R){const E=s();for(let u=0;u<16;u++)E[u]=R[u];for(let u=253;u>=0;u--)A(E,E),u!==2&&u!==4&&I(E,E,R);for(let u=0;u<16;u++)x[u]=E[u]}function H(x,R){const E=new Uint8Array(32),u=new Float64Array(80),w=s(),W=s(),G=s(),se=s(),ce=s(),de=s();for(let Q=0;Q<31;Q++)E[Q]=x[Q];E[31]=x[31]&127|64,E[0]&=248,g(u,R);for(let Q=0;Q<16;Q++)W[Q]=u[Q];w[0]=se[0]=1;for(let Q=254;Q>=0;--Q){const k=E[Q>>>3]>>>(Q&7)&1;f(w,W,k),f(G,se,k),m(ce,w,G),D(w,w,G),m(G,W,se),D(W,W,se),A(se,ce),A(de,w),I(w,G,w),I(G,W,ce),m(ce,w,G),D(w,w,G),A(W,w),D(G,se,de),I(w,G,c),m(w,w,se),I(G,G,w),I(w,se,de),I(se,W,u),A(W,ce),f(w,W,k),f(G,se,k)}for(let Q=0;Q<16;Q++)u[Q+16]=w[Q],u[Q+32]=G[Q],u[Q+48]=W[Q],u[Q+64]=se[Q];const b=u.subarray(32),C=u.subarray(16);P(b,b),I(C,C,b);const ee=new Uint8Array(32);return y(ee,C),ee}i.scalarMult=H;function B(x){return H(x,o)}i.scalarMultBase=B;function ne(x){if(x.length!==i.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${i.SECRET_KEY_LENGTH} bytes`);const R=new Uint8Array(x);return{publicKey:B(R),secretKey:R}}i.generateKeyPairFromSeed=ne;function L(x){const R=(0,e.randomBytes)(32,x),E=ne(R);return(0,t.wipe)(R),E}i.generateKeyPair=L;function $(x,R,E=!1){if(x.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(R.length!==i.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=H(x,R);if(E){let w=0;for(let W=0;W<u.length;W++)w|=u[W];if(w===0)throw new Error("X25519: invalid shared key")}return u}i.sharedKey=$})(Uu);function $u(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function ip(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$u(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function fu(i,e){e||(e=i.reduce((o,c)=>o+c.length,0));const t=ip(e);let s=0;for(const o of i)t.set(o,s),s+=o.length;return $u(t)}function U1(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),d=c.charCodeAt(0);if(t[d]!==255)throw new TypeError(c+" is ambiguous");t[d]=o}var f=i.length,y=i.charAt(0),g=Math.log(f)/Math.log(256),m=Math.log(256)/Math.log(f);function D(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var H=0,B=0,ne=0,L=P.length;ne!==L&&P[ne]===0;)ne++,H++;for(var $=(L-ne)*m+1>>>0,x=new Uint8Array($);ne!==L;){for(var R=P[ne],E=0,u=$-1;(R!==0||E<B)&&u!==-1;u--,E++)R+=256*x[u]>>>0,x[u]=R%f>>>0,R=R/f>>>0;if(R!==0)throw new Error("Non-zero carry");B=E,ne++}for(var w=$-B;w!==$&&x[w]===0;)w++;for(var W=y.repeat(H);w<$;++w)W+=i.charAt(x[w]);return W}function I(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var H=0;if(P[H]!==" "){for(var B=0,ne=0;P[H]===y;)B++,H++;for(var L=(P.length-H)*g+1>>>0,$=new Uint8Array(L);P[H];){var x=t[P.charCodeAt(H)];if(x===255)return;for(var R=0,E=L-1;(x!==0||R<ne)&&E!==-1;E--,R++)x+=f*$[E]>>>0,$[E]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");ne=R,H++}if(P[H]!==" "){for(var u=L-ne;u!==L&&$[u]===0;)u++;for(var w=new Uint8Array(B+(L-u)),W=B;u!==L;)w[W++]=$[u++];return w}}}function A(P){var H=I(P);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:D,decodeUnsafe:I,decode:A}}var $1=U1,M1=$1;const j1=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},q1=i=>new TextEncoder().encode(i),F1=i=>new TextDecoder().decode(i);class z1{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class H1{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return np(this,e)}}class B1{constructor(e){this.decoders=e}or(e){return np(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const np=(i,e)=>new B1({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class K1{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new z1(e,t,s),this.decoder=new H1(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ha=({name:i,prefix:e,encode:t,decode:s})=>new K1(i,e,t,s),Cs=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=M1(t,e);return ha({prefix:i,name:e,encode:s,decode:c=>j1(o(c))})},k1=(i,e,t,s)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let c=i.length;for(;i[c-1]==="=";)--c;const d=new Uint8Array(c*t/8|0);let f=0,y=0,g=0;for(let m=0;m<c;++m){const D=o[i[m]];if(D===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|D,f+=t,f>=8&&(f-=8,d[g++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return d},V1=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",d=0,f=0;for(let y=0;y<i.length;++y)for(f=f<<8|i[y],d+=8;d>t;)d-=t,c+=e[o&f>>d];if(d&&(c+=e[o&f<<t-d]),s)for(;c.length*t&7;)c+="=";return c},Jt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>ha({prefix:e,name:i,encode(o){return V1(o,s,t)},decode(o){return k1(o,s,t,i)}}),W1=ha({prefix:"\0",name:"identity",encode:i=>F1(i),decode:i=>q1(i)}),G1=Object.freeze(Object.defineProperty({__proto__:null,identity:W1},Symbol.toStringTag,{value:"Module"})),Y1=Jt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),J1=Object.freeze(Object.defineProperty({__proto__:null,base2:Y1},Symbol.toStringTag,{value:"Module"})),Q1=Jt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),X1=Object.freeze(Object.defineProperty({__proto__:null,base8:Q1},Symbol.toStringTag,{value:"Module"})),Z1=Cs({prefix:"9",name:"base10",alphabet:"0123456789"}),eb=Object.freeze(Object.defineProperty({__proto__:null,base10:Z1},Symbol.toStringTag,{value:"Module"})),tb=Jt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rb=Jt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ib=Object.freeze(Object.defineProperty({__proto__:null,base16:tb,base16upper:rb},Symbol.toStringTag,{value:"Module"})),nb=Jt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sb=Jt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ob=Jt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ab=Jt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cb=Jt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ub=Jt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hb=Jt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lb=Jt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fb=Jt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),db=Object.freeze(Object.defineProperty({__proto__:null,base32:nb,base32hex:cb,base32hexpad:hb,base32hexpadupper:lb,base32hexupper:ub,base32pad:ob,base32padupper:ab,base32upper:sb,base32z:fb},Symbol.toStringTag,{value:"Module"})),pb=Cs({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gb=Cs({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yb=Object.freeze(Object.defineProperty({__proto__:null,base36:pb,base36upper:gb},Symbol.toStringTag,{value:"Module"})),vb=Cs({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),mb=Cs({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),_b=Object.freeze(Object.defineProperty({__proto__:null,base58btc:vb,base58flickr:mb},Symbol.toStringTag,{value:"Module"})),wb=Jt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bb=Jt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Eb=Jt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Db=Jt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Sb=Object.freeze(Object.defineProperty({__proto__:null,base64:wb,base64pad:bb,base64url:Eb,base64urlpad:Db},Symbol.toStringTag,{value:"Module"})),sp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Ib=sp.reduce((i,e,t)=>(i[t]=e,i),[]),xb=sp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function Ob(i){return i.reduce((e,t)=>(e+=Ib[t],e),"")}function Pb(i){const e=[];for(const t of i){const s=xb[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const Cb=ha({prefix:"ðŸš€",name:"base256emoji",encode:Ob,decode:Pb}),Ab=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Cb},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const sf={...G1,...J1,...X1,...eb,...ib,...db,...yb,..._b,...Sb,...Ab};function op(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const of=op("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),qc=op("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=ip(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),ap={utf8:of,"utf-8":of,hex:sf.base16,latin1:qc,ascii:qc,binary:qc,...sf};function br(i,e="utf8"){const t=ap[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$u(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}function lr(i,e="utf8"){const t=ap[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("utf8"):t.encoder.encode(i).substring(1)}var af=function(i,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return i.concat(c||Array.prototype.slice.call(e))},Tb=function(){function i(e,t,s){this.name=e,this.version=t,this.os=s,this.type="browser"}return i}(),Rb=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return i}(),Nb=function(){function i(e,t,s,o){this.name=e,this.version=t,this.os=s,this.bot=o,this.type="bot-device"}return i}(),Lb=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),Ub=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),$b=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Mb=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,cf=3,jb=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",$b]],uf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function qb(i){return i?hf(i):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ub:typeof navigator<"u"?hf(navigator.userAgent):Hb()}function Fb(i){return i!==""&&jb.reduce(function(e,t){var s=t[0],o=t[1];if(e)return e;var c=o.exec(i);return!!c&&[s,c]},!1)}function hf(i){var e=Fb(i);if(!e)return null;var t=e[0],s=e[1];if(t==="searchbot")return new Lb;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<cf&&(o=af(af([],o,!0),Bb(cf-o.length),!0)):o=[];var c=o.join("."),d=zb(i),f=Mb.exec(i);return f&&f[1]?new Nb(t,c,d,f[1]):new Tb(t,c,d)}function zb(i){for(var e=0,t=uf.length;e<t;e++){var s=uf[e],o=s[0],c=s[1],d=c.exec(i);if(d)return o}return null}function Hb(){var i=typeof process<"u"&&process.version;return i?new Rb(process.version.slice(1)):null}function Bb(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}var ve={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var du=function(i,e){return du=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var o in s)s.hasOwnProperty(o)&&(t[o]=s[o])},du(i,e)};function Kb(i,e){du(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pu=function(){return pu=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},pu.apply(this,arguments)};function kb(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function Vb(i,e,t,s){var o=arguments.length,c=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(i,e,t,s);else for(var f=i.length-1;f>=0;f--)(d=i[f])&&(c=(o<3?d(c):o>3?d(e,t,c):d(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Wb(i,e){return function(t,s){e(t,s,i)}}function Gb(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function Yb(i,e,t,s){function o(c){return c instanceof t?c:new t(function(d){d(c)})}return new(t||(t=Promise))(function(c,d){function f(m){try{g(s.next(m))}catch(D){d(D)}}function y(m){try{g(s.throw(m))}catch(D){d(D)}}function g(m){m.done?c(m.value):o(m.value).then(f,y)}g((s=s.apply(i,e||[])).next())})}function Jb(i,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,d;return d={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function f(g){return function(m){return y([g,m])}}function y(g){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(c=g[0]&2?o.return:g[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,g[1])).done)return c;switch(o=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(i,t)}catch(m){g=[6,m],o=0}finally{s=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function Qb(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}function Xb(i,e){for(var t in i)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=i[t])}function gu(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),o,c=[],d;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(f){d={error:f}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(d)throw d.error}}return c}function Zb(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(cp(arguments[e]));return i}function eE(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),o=0,e=0;e<t;e++)for(var c=arguments[e],d=0,f=c.length;d<f;d++,o++)s[o]=c[d];return s}function Is(i){return this instanceof Is?(this.v=i,this):new Is(i)}function tE(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),o,c=[];return o={},d("next"),d("throw"),d("return"),o[Symbol.asyncIterator]=function(){return this},o;function d(I){s[I]&&(o[I]=function(A){return new Promise(function(P,H){c.push([I,A,P,H])>1||f(I,A)})})}function f(I,A){try{y(s[I](A))}catch(P){D(c[0][3],P)}}function y(I){I.value instanceof Is?Promise.resolve(I.value.v).then(g,m):D(c[0][2],I)}function g(I){f("next",I)}function m(I){f("throw",I)}function D(I,A){I(A),c.shift(),c.length&&f(c[0][0],c[0][1])}}function rE(i){var e,t;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,c){e[o]=i[o]?function(d){return(t=!t)?{value:Is(i[o](d)),done:o==="return"}:c?c(d):d}:c}}function iE(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof gu=="function"?gu(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(c){t[c]=i[c]&&function(d){return new Promise(function(f,y){d=i[c](d),o(f,y,d.done,d.value)})}}function o(c,d,f,y){Promise.resolve(y).then(function(g){c({value:g,done:f})},d)}}function nE(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}function sE(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)Object.hasOwnProperty.call(i,t)&&(e[t]=i[t]);return e.default=i,e}function oE(i){return i&&i.__esModule?i:{default:i}}function aE(i,e){if(!e.has(i))throw new TypeError("attempted to get private field on non-instance");return e.get(i)}function cE(i,e,t){if(!e.has(i))throw new TypeError("attempted to set private field on non-instance");return e.set(i,t),t}const uE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pu},__asyncDelegator:rE,__asyncGenerator:tE,__asyncValues:iE,__await:Is,__awaiter:Yb,__classPrivateFieldGet:aE,__classPrivateFieldSet:cE,__createBinding:Qb,__decorate:Vb,__exportStar:Xb,__extends:Kb,__generator:Jb,__importDefault:oE,__importStar:sE,__makeTemplateObject:nE,__metadata:Gb,__param:Wb,__read:cp,__rest:kb,__spread:Zb,__spreadArrays:eE,__values:gu},Symbol.toStringTag,{value:"Module"})),oi=Au(uE);var Fc={},fs={},lf;function hE(){if(lf)return fs;lf=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.delay=void 0;function i(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return fs.delay=i,fs}var rn={},zc={},nn={},ff;function lE(){return ff||(ff=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ONE_THOUSAND=nn.ONE_HUNDRED=void 0,nn.ONE_HUNDRED=100,nn.ONE_THOUSAND=1e3),nn}var Hc={},df;function fE(){return df||(df=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.ONE_YEAR=i.FOUR_WEEKS=i.THREE_WEEKS=i.TWO_WEEKS=i.ONE_WEEK=i.THIRTY_DAYS=i.SEVEN_DAYS=i.FIVE_DAYS=i.THREE_DAYS=i.ONE_DAY=i.TWENTY_FOUR_HOURS=i.TWELVE_HOURS=i.SIX_HOURS=i.THREE_HOURS=i.ONE_HOUR=i.SIXTY_MINUTES=i.THIRTY_MINUTES=i.TEN_MINUTES=i.FIVE_MINUTES=i.ONE_MINUTE=i.SIXTY_SECONDS=i.THIRTY_SECONDS=i.TEN_SECONDS=i.FIVE_SECONDS=i.ONE_SECOND=void 0,i.ONE_SECOND=1,i.FIVE_SECONDS=5,i.TEN_SECONDS=10,i.THIRTY_SECONDS=30,i.SIXTY_SECONDS=60,i.ONE_MINUTE=i.SIXTY_SECONDS,i.FIVE_MINUTES=i.ONE_MINUTE*5,i.TEN_MINUTES=i.ONE_MINUTE*10,i.THIRTY_MINUTES=i.ONE_MINUTE*30,i.SIXTY_MINUTES=i.ONE_MINUTE*60,i.ONE_HOUR=i.SIXTY_MINUTES,i.THREE_HOURS=i.ONE_HOUR*3,i.SIX_HOURS=i.ONE_HOUR*6,i.TWELVE_HOURS=i.ONE_HOUR*12,i.TWENTY_FOUR_HOURS=i.ONE_HOUR*24,i.ONE_DAY=i.TWENTY_FOUR_HOURS,i.THREE_DAYS=i.ONE_DAY*3,i.FIVE_DAYS=i.ONE_DAY*5,i.SEVEN_DAYS=i.ONE_DAY*7,i.THIRTY_DAYS=i.ONE_DAY*30,i.ONE_WEEK=i.SEVEN_DAYS,i.TWO_WEEKS=i.ONE_WEEK*2,i.THREE_WEEKS=i.ONE_WEEK*3,i.FOUR_WEEKS=i.ONE_WEEK*4,i.ONE_YEAR=i.ONE_DAY*365}(Hc)),Hc}var pf;function up(){return pf||(pf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=oi;e.__exportStar(lE(),i),e.__exportStar(fE(),i)}(zc)),zc}var gf;function dE(){if(gf)return rn;gf=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.fromMiliseconds=rn.toMiliseconds=void 0;const i=up();function e(s){return s*i.ONE_THOUSAND}rn.toMiliseconds=e;function t(s){return Math.floor(s/i.ONE_THOUSAND)}return rn.fromMiliseconds=t,rn}var yf;function pE(){return yf||(yf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=oi;e.__exportStar(hE(),i),e.__exportStar(dE(),i)}(Fc)),Fc}var Ln={},vf;function gE(){if(vf)return Ln;vf=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.Watch=void 0;class i{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const s=this.get(t);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-s.started;this.timestamps.set(t,{started:s.started,elapsed:o})}get(t){const s=this.timestamps.get(t);if(typeof s>"u")throw new Error(`No timestamp found for label: ${t}`);return s}elapsed(t){const s=this.get(t);return s.elapsed||Date.now()-s.started}}return Ln.Watch=i,Ln.default=i,Ln}var Bc={},ds={},mf;function yE(){if(mf)return ds;mf=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.IWatch=void 0;class i{}return ds.IWatch=i,ds}var _f;function vE(){return _f||(_f=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),oi.__exportStar(yE(),i)}(Bc)),Bc}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=oi;e.__exportStar(pE(),i),e.__exportStar(gE(),i),e.__exportStar(vE(),i),e.__exportStar(up(),i)})(ve);var ft={};Object.defineProperty(ft,"__esModule",{value:!0});ft.getLocalStorage=ft.getLocalStorageOrThrow=ft.getCrypto=ft.getCryptoOrThrow=lp=ft.getLocation=ft.getLocationOrThrow=Mu=ft.getNavigator=ft.getNavigatorOrThrow=hp=ft.getDocument=ft.getDocumentOrThrow=ft.getFromWindowOrThrow=ft.getFromWindow=void 0;function un(i){let e;return typeof window<"u"&&typeof window[i]<"u"&&(e=window[i]),e}ft.getFromWindow=un;function Hn(i){const e=un(i);if(!e)throw new Error(`${i} is not defined in Window`);return e}ft.getFromWindowOrThrow=Hn;function mE(){return Hn("document")}ft.getDocumentOrThrow=mE;function _E(){return un("document")}var hp=ft.getDocument=_E;function wE(){return Hn("navigator")}ft.getNavigatorOrThrow=wE;function bE(){return un("navigator")}var Mu=ft.getNavigator=bE;function EE(){return Hn("location")}ft.getLocationOrThrow=EE;function DE(){return un("location")}var lp=ft.getLocation=DE;function SE(){return Hn("crypto")}ft.getCryptoOrThrow=SE;function IE(){return un("crypto")}ft.getCrypto=IE;function xE(){return Hn("localStorage")}ft.getLocalStorageOrThrow=xE;function OE(){return un("localStorage")}ft.getLocalStorage=OE;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});var fp=ju.getWindowMetadata=void 0;const wf=ft;function PE(){let i,e;try{i=wf.getDocumentOrThrow(),e=wf.getLocationOrThrow()}catch{return null}function t(){const D=i.getElementsByTagName("link"),I=[];for(let A=0;A<D.length;A++){const P=D[A],H=P.getAttribute("rel");if(H&&H.toLowerCase().indexOf("icon")>-1){const B=P.getAttribute("href");if(B)if(B.toLowerCase().indexOf("https:")===-1&&B.toLowerCase().indexOf("http:")===-1&&B.indexOf("//")!==0){let ne=e.protocol+"//"+e.host;if(B.indexOf("/")===0)ne+=B;else{const L=e.pathname.split("/");L.pop();const $=L.join("/");ne+=$+"/"+B}I.push(ne)}else if(B.indexOf("//")===0){const ne=e.protocol+B;I.push(ne)}else I.push(B)}}return I}function s(...D){const I=i.getElementsByTagName("meta");for(let A=0;A<I.length;A++){const P=I[A],H=["itemprop","property","name"].map(B=>P.getAttribute(B)).filter(B=>B?D.includes(B):!1);if(H.length&&H){const B=P.getAttribute("content");if(B)return B}}return""}function o(){let D=s("name","og:site_name","og:title","twitter:title");return D||(D=i.title),D}function c(){return s("description","og:description","twitter:description","keywords")}const d=o(),f=c(),y=e.origin,g=t();return{description:f,url:y,icons:g,name:d}}fp=ju.getWindowMetadata=PE;var xs={},CE=i=>encodeURIComponent(i).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),dp="%[a-f0-9]{2}",bf=new RegExp("("+dp+")|([^%]+?)","gi"),Ef=new RegExp("("+dp+")+","gi");function yu(i,e){try{return[decodeURIComponent(i.join(""))]}catch{}if(i.length===1)return i;e=e||1;var t=i.slice(0,e),s=i.slice(e);return Array.prototype.concat.call([],yu(t),yu(s))}function AE(i){try{return decodeURIComponent(i)}catch{for(var e=i.match(bf)||[],t=1;t<e.length;t++)i=yu(e,t).join(""),e=i.match(bf)||[];return i}}function TE(i){for(var e={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},t=Ef.exec(i);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var s=AE(t[0]);s!==t[0]&&(e[t[0]]=s)}t=Ef.exec(i)}e["%C2"]="ï¿½";for(var o=Object.keys(e),c=0;c<o.length;c++){var d=o[c];i=i.replace(new RegExp(d,"g"),e[d])}return i}var RE=function(i){if(typeof i!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof i+"`");try{return i=i.replace(/\+/g," "),decodeURIComponent(i)}catch{return TE(i)}},NE=(i,e)=>{if(!(typeof i=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[i];const t=i.indexOf(e);return t===-1?[i]:[i.slice(0,t),i.slice(t+e.length)]},LE=function(i,e){for(var t={},s=Object.keys(i),o=Array.isArray(e),c=0;c<s.length;c++){var d=s[c],f=i[d];(o?e.indexOf(d)!==-1:e(d,f,i))&&(t[d]=f)}return t};(function(i){const e=CE,t=RE,s=NE,o=LE,c=L=>L==null,d=Symbol("encodeFragmentIdentifier");function f(L){switch(L.arrayFormat){case"index":return $=>(x,R)=>{const E=x.length;return R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?x:R===null?[...x,[m($,L),"[",E,"]"].join("")]:[...x,[m($,L),"[",m(E,L),"]=",m(R,L)].join("")]};case"bracket":return $=>(x,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?x:R===null?[...x,[m($,L),"[]"].join("")]:[...x,[m($,L),"[]=",m(R,L)].join("")];case"colon-list-separator":return $=>(x,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?x:R===null?[...x,[m($,L),":list="].join("")]:[...x,[m($,L),":list=",m(R,L)].join("")];case"comma":case"separator":case"bracket-separator":{const $=L.arrayFormat==="bracket-separator"?"[]=":"=";return x=>(R,E)=>E===void 0||L.skipNull&&E===null||L.skipEmptyString&&E===""?R:(E=E===null?"":E,R.length===0?[[m(x,L),$,m(E,L)].join("")]:[[R,m(E,L)].join(L.arrayFormatSeparator)])}default:return $=>(x,R)=>R===void 0||L.skipNull&&R===null||L.skipEmptyString&&R===""?x:R===null?[...x,m($,L)]:[...x,[m($,L),"=",m(R,L)].join("")]}}function y(L){let $;switch(L.arrayFormat){case"index":return(x,R,E)=>{if($=/\[(\d*)\]$/.exec(x),x=x.replace(/\[\d*\]$/,""),!$){E[x]=R;return}E[x]===void 0&&(E[x]={}),E[x][$[1]]=R};case"bracket":return(x,R,E)=>{if($=/(\[\])$/.exec(x),x=x.replace(/\[\]$/,""),!$){E[x]=R;return}if(E[x]===void 0){E[x]=[R];return}E[x]=[].concat(E[x],R)};case"colon-list-separator":return(x,R,E)=>{if($=/(:list)$/.exec(x),x=x.replace(/:list$/,""),!$){E[x]=R;return}if(E[x]===void 0){E[x]=[R];return}E[x]=[].concat(E[x],R)};case"comma":case"separator":return(x,R,E)=>{const u=typeof R=="string"&&R.includes(L.arrayFormatSeparator),w=typeof R=="string"&&!u&&D(R,L).includes(L.arrayFormatSeparator);R=w?D(R,L):R;const W=u||w?R.split(L.arrayFormatSeparator).map(G=>D(G,L)):R===null?R:D(R,L);E[x]=W};case"bracket-separator":return(x,R,E)=>{const u=/(\[\])$/.test(x);if(x=x.replace(/\[\]$/,""),!u){E[x]=R&&D(R,L);return}const w=R===null?[]:R.split(L.arrayFormatSeparator).map(W=>D(W,L));if(E[x]===void 0){E[x]=w;return}E[x]=[].concat(E[x],w)};default:return(x,R,E)=>{if(E[x]===void 0){E[x]=R;return}E[x]=[].concat(E[x],R)}}}function g(L){if(typeof L!="string"||L.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(L,$){return $.encode?$.strict?e(L):encodeURIComponent(L):L}function D(L,$){return $.decode?t(L):L}function I(L){return Array.isArray(L)?L.sort():typeof L=="object"?I(Object.keys(L)).sort(($,x)=>Number($)-Number(x)).map($=>L[$]):L}function A(L){const $=L.indexOf("#");return $!==-1&&(L=L.slice(0,$)),L}function P(L){let $="";const x=L.indexOf("#");return x!==-1&&($=L.slice(x)),$}function H(L){L=A(L);const $=L.indexOf("?");return $===-1?"":L.slice($+1)}function B(L,$){return $.parseNumbers&&!Number.isNaN(Number(L))&&typeof L=="string"&&L.trim()!==""?L=Number(L):$.parseBooleans&&L!==null&&(L.toLowerCase()==="true"||L.toLowerCase()==="false")&&(L=L.toLowerCase()==="true"),L}function ne(L,$){$=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},$),g($.arrayFormatSeparator);const x=y($),R=Object.create(null);if(typeof L!="string"||(L=L.trim().replace(/^[?#&]/,""),!L))return R;for(const E of L.split("&")){if(E==="")continue;let[u,w]=s($.decode?E.replace(/\+/g," "):E,"=");w=w===void 0?null:["comma","separator","bracket-separator"].includes($.arrayFormat)?w:D(w,$),x(D(u,$),w,R)}for(const E of Object.keys(R)){const u=R[E];if(typeof u=="object"&&u!==null)for(const w of Object.keys(u))u[w]=B(u[w],$);else R[E]=B(u,$)}return $.sort===!1?R:($.sort===!0?Object.keys(R).sort():Object.keys(R).sort($.sort)).reduce((E,u)=>{const w=R[u];return w&&typeof w=="object"&&!Array.isArray(w)?E[u]=I(w):E[u]=w,E},Object.create(null))}i.extract=H,i.parse=ne,i.stringify=(L,$)=>{if(!L)return"";$=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},$),g($.arrayFormatSeparator);const x=w=>$.skipNull&&c(L[w])||$.skipEmptyString&&L[w]==="",R=f($),E={};for(const w of Object.keys(L))x(w)||(E[w]=L[w]);const u=Object.keys(E);return $.sort!==!1&&u.sort($.sort),u.map(w=>{const W=L[w];return W===void 0?"":W===null?m(w,$):Array.isArray(W)?W.length===0&&$.arrayFormat==="bracket-separator"?m(w,$)+"[]":W.reduce(R(w),[]).join("&"):m(w,$)+"="+m(W,$)}).filter(w=>w.length>0).join("&")},i.parseUrl=(L,$)=>{$=Object.assign({decode:!0},$);const[x,R]=s(L,"#");return Object.assign({url:x.split("?")[0]||"",query:ne(H(L),$)},$&&$.parseFragmentIdentifier&&R?{fragmentIdentifier:D(R,$)}:{})},i.stringifyUrl=(L,$)=>{$=Object.assign({encode:!0,strict:!0,[d]:!0},$);const x=A(L.url).split("?")[0]||"",R=i.extract(L.url),E=i.parse(R,{sort:!1}),u=Object.assign(E,L.query);let w=i.stringify(u,$);w&&(w=`?${w}`);let W=P(L.url);return L.fragmentIdentifier&&(W=`#${$[d]?m(L.fragmentIdentifier,$):L.fragmentIdentifier}`),`${x}${w}${W}`},i.pick=(L,$,x)=>{x=Object.assign({parseFragmentIdentifier:!0,[d]:!1},x);const{url:R,query:E,fragmentIdentifier:u}=i.parseUrl(L,x);return i.stringifyUrl({url:R,query:o(E,$),fragmentIdentifier:u},x)},i.exclude=(L,$,x)=>{const R=Array.isArray($)?E=>!$.includes(E):(E,u)=>!$(E,u);return i.pick(L,R,x)}})(xs);const UE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},$E=":";function ME(i){const[e,t]=i.split($E);return{namespace:e,reference:t}}function jE(i,e=[]){const t=[];return Object.keys(i).forEach(s=>{if(e.length&&!e.includes(s))return;const o=i[s];t.push(...o.accounts)}),t}function pp(i,e){return i.includes(":")?[i]:e.chains||[]}const gp="base10",hr="base16",vu="base64pad",qu="utf8",yp=0,hn=1,qE=0,Df=1,mu=12,Fu=32;function FE(){const i=Uu.generateKeyPair();return{privateKey:lr(i.secretKey,hr),publicKey:lr(i.publicKey,hr)}}function _u(){const i=zn.randomBytes(Fu);return lr(i,hr)}function zE(i,e){const t=Uu.sharedKey(br(i,hr),br(e,hr),!0),s=new S1(ua.SHA256,t).expand(Fu);return lr(s,hr)}function HE(i){const e=ua.hash(br(i,hr));return lr(e,hr)}function jn(i){const e=ua.hash(br(i,qu));return lr(e,hr)}function BE(i){return br(`${i}`,gp)}function As(i){return Number(lr(i,gp))}function KE(i){const e=BE(typeof i.type<"u"?i.type:yp);if(As(e)===hn&&typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof i.senderPublicKey<"u"?br(i.senderPublicKey,hr):void 0,s=typeof i.iv<"u"?br(i.iv,hr):zn.randomBytes(mu),o=new Nu.ChaCha20Poly1305(br(i.symKey,hr)).seal(s,br(i.message,qu));return VE({type:e,sealed:o,iv:s,senderPublicKey:t})}function kE(i){const e=new Nu.ChaCha20Poly1305(br(i.symKey,hr)),{sealed:t,iv:s}=Zo(i.encoded),o=e.open(s,t);if(o===null)throw new Error("Failed to decrypt");return lr(o,qu)}function VE(i){if(As(i.type)===hn){if(typeof i.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return lr(fu([i.type,i.senderPublicKey,i.iv,i.sealed]),vu)}return lr(fu([i.type,i.iv,i.sealed]),vu)}function Zo(i){const e=br(i,vu),t=e.slice(qE,Df),s=Df;if(As(t)===hn){const f=s+Fu,y=f+mu,g=e.slice(s,f),m=e.slice(f,y),D=e.slice(y);return{type:t,sealed:D,iv:m,senderPublicKey:g}}const o=s+mu,c=e.slice(s,o),d=e.slice(o);return{type:t,sealed:d,iv:c}}function WE(i,e){const t=Zo(i);return vp({type:As(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?lr(t.senderPublicKey,hr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function vp(i){const e=(i==null?void 0:i.type)||yp;if(e===hn){if(typeof(i==null?void 0:i.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(i==null?void 0:i.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:i==null?void 0:i.senderPublicKey,receiverPublicKey:i==null?void 0:i.receiverPublicKey}}function Sf(i){return i.type===hn&&typeof i.senderPublicKey=="string"&&typeof i.receiverPublicKey=="string"}var GE=Object.defineProperty,If=Object.getOwnPropertySymbols,YE=Object.prototype.hasOwnProperty,JE=Object.prototype.propertyIsEnumerable,xf=(i,e,t)=>e in i?GE(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Of=(i,e)=>{for(var t in e||(e={}))YE.call(e,t)&&xf(i,t,e[t]);if(If)for(var t of If(e))JE.call(e,t)&&xf(i,t,e[t]);return i};const QE="ReactNative",Pr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},XE="js";function zu(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Bn(){return!hp()&&!!Mu()&&navigator.product===QE}function Kn(){return!zu()&&!!Mu()}function Ts(){return Bn()?Pr.reactNative:zu()?Pr.node:Kn()?Pr.browser:Pr.unknown}function ZE(){var i;try{return Bn()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(i=global.Application)==null?void 0:i.applicationId:void 0}catch{return}}function e3(i,e){let t=xs.parse(i);return t=Of(Of({},t),e),i=xs.stringify(t),i}function t3(){return fp()||{name:"",description:"",url:"",icons:[""]}}function r3(){if(Ts()===Pr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:s}=global.Platform;return[t,s].join("-")}const i=qb();if(i===null)return"unknown";const e=i.os?i.os.replace(" ","").toLowerCase():"unknown";return i.type==="browser"?[e,i.name,i.version].join("-"):[e,i.version].join("-")}function i3(){var i;const e=Ts();return e===Pr.browser?[e,((i=lp())==null?void 0:i.host)||"unknown"].join(":"):e}function n3(i,e,t){const s=r3(),o=i3();return[[i,e].join("-"),[XE,t].join("-"),s,o].join("/")}function s3({protocol:i,version:e,relayUrl:t,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:d,bundleId:f}){const y=t.split("?"),g=n3(i,e,s),m={auth:o,ua:g,projectId:c,useOnCloseEvent:d||void 0,origin:f||void 0},D=e3(y[1]||"",m);return y[0]+"?"+D}function an(i,e){return i.filter(t=>e.includes(t)).length===i.length}function mp(i){return Object.fromEntries(i.entries())}function _p(i){return new Map(Object.entries(i))}function Un(i=ve.FIVE_MINUTES,e){const t=ve.toMiliseconds(i||ve.FIVE_MINUTES);let s,o,c;return{resolve:d=>{c&&s&&(clearTimeout(c),s(d))},reject:d=>{c&&o&&(clearTimeout(c),o(d))},done:()=>new Promise((d,f)=>{c=setTimeout(()=>{f(new Error(e))},t),s=d,o=f})}}function Os(i,e,t){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const d=await i;s(d)}catch(d){o(d)}clearTimeout(c)})}function wp(i,e){if(typeof e=="string"&&e.startsWith(`${i}:`))return e;if(i.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(i.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${i}`)}function o3(i){return wp("topic",i)}function a3(i){return wp("id",i)}function bp(i){const[e,t]=i.split(":"),s={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")s.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))s.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return s}function Gr(i,e){return ve.fromMiliseconds((e||Date.now())+ve.toMiliseconds(i))}function Mi(i){return Date.now()>=ve.toMiliseconds(i)}function Ht(i,e){return`${i}${e?`:${e}`:""}`}function Kc(i=[],e=[]){return[...new Set([...i,...e])]}async function c3({id:i,topic:e,wcDeepLink:t}){try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t;let o=s==null?void 0:s.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${i}&sessionTopic=${e}`,d=Ts();d===Pr.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):d===Pr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}async function u3(i,e){try{return await i.getItem(e)||(Kn()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}const h3="irn";function wu(i){return(i==null?void 0:i.relay)||{protocol:h3}}function Wo(i){const e=UE[i];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${i}`);return e}var l3=Object.defineProperty,Pf=Object.getOwnPropertySymbols,f3=Object.prototype.hasOwnProperty,d3=Object.prototype.propertyIsEnumerable,Cf=(i,e,t)=>e in i?l3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,p3=(i,e)=>{for(var t in e||(e={}))f3.call(e,t)&&Cf(i,t,e[t]);if(Pf)for(var t of Pf(e))d3.call(e,t)&&Cf(i,t,e[t]);return i};function g3(i,e="-"){const t={},s="relay"+e;return Object.keys(i).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),d=i[o];t[c]=d}}),t}function Af(i){i=i.includes("wc://")?i.replace("wc://",""):i,i=i.includes("wc:")?i.replace("wc:",""):i;const e=i.indexOf(":"),t=i.indexOf("?")!==-1?i.indexOf("?"):void 0,s=i.substring(0,e),o=i.substring(e+1,t).split("@"),c=typeof t<"u"?i.substring(t):"",d=xs.parse(c);return{protocol:s,topic:y3(o[0]),version:parseInt(o[1],10),symKey:d.symKey,relay:g3(d)}}function y3(i){return i.startsWith("//")?i.substring(2):i}function v3(i,e="-"){const t="relay",s={};return Object.keys(i).forEach(o=>{const c=t+e+o;i[o]&&(s[c]=i[o])}),s}function m3(i){return`${i.protocol}:${i.topic}@${i.version}?`+xs.stringify(p3({symKey:i.symKey},v3(i.relay)))}function kn(i){const e=[];return i.forEach(t=>{const[s,o]=t.split(":");e.push(`${s}:${o}`)}),e}function _3(i){const e=[];return Object.values(i).forEach(t=>{e.push(...kn(t.accounts))}),e}function w3(i,e){const t=[];return Object.values(i).forEach(s=>{kn(s.accounts).includes(e)&&t.push(...s.methods)}),t}function b3(i,e){const t=[];return Object.values(i).forEach(s=>{kn(s.accounts).includes(e)&&t.push(...s.events)}),t}function E3(i,e){const t=Go(i,e);if(t)throw new Error(t.message);const s={};for(const[o,c]of Object.entries(i))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(d=>`${d.split(":")[0]}:${d.split(":")[1]}`)};return s}function Hu(i){return i.includes(":")}function bs(i){return Hu(i)?i.split(":")[0]:i}const D3={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},S3={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(i,e){const{message:t,code:s}=S3[i];return{message:e?`${t} ${e}`:t,code:s}}function Lt(i,e){const{message:t,code:s}=D3[i];return{message:e?`${t} ${e}`:t,code:s}}function si(i,e){return Array.isArray(i)?typeof e<"u"&&i.length?i.every(e):!0:!1}function qn(i){return Object.getPrototypeOf(i)===Object.prototype&&Object.keys(i).length}function ur(i){return typeof i>"u"}function Gt(i,e){return e&&ur(i)?!0:typeof i=="string"&&!!i.trim().length}function Bu(i,e){return e&&ur(i)?!0:typeof i=="number"&&!isNaN(i)}function I3(i,e){const{requiredNamespaces:t}=e,s=Object.keys(i.namespaces),o=Object.keys(t);let c=!0;return an(o,s)?(s.forEach(d=>{const{accounts:f,methods:y,events:g}=i.namespaces[d],m=kn(f),D=t[d];(!an(pp(d,D),m)||!an(D.methods,y)||!an(D.events,g))&&(c=!1)}),c):!1}function ea(i){return Gt(i,!1)&&i.includes(":")?i.split(":").length===2:!1}function x3(i){if(Gt(i,!1)&&i.includes(":")){const e=i.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ea(t)}}return!1}function O3(i){if(Gt(i,!1))try{return typeof new URL(i)<"u"}catch{return!1}return!1}function P3(i){var e;return(e=i==null?void 0:i.proposer)==null?void 0:e.publicKey}function C3(i){return i==null?void 0:i.topic}function A3(i,e){let t=null;return Gt(i==null?void 0:i.publicKey,!1)||(t=ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function Tf(i){let e=!0;return si(i)?i.length&&(e=i.every(t=>Gt(t,!1))):e=!1,e}function T3(i,e,t){let s=null;return si(e)&&e.length?e.forEach(o=>{s||ea(o)||(s=Lt("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):ea(i)||(s=Lt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function R3(i,e,t){let s=null;return Object.entries(i).forEach(([o,c])=>{if(s)return;const d=T3(o,pp(o,c),`${e} ${t}`);d&&(s=d)}),s}function N3(i,e){let t=null;return si(i)?i.forEach(s=>{t||x3(s)||(t=Lt("UNSUPPORTED_ACCOUNTS",`${e}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):t=Lt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function L3(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=N3(s==null?void 0:s.accounts,`${e} namespace`);o&&(t=o)}),t}function U3(i,e){let t=null;return Tf(i==null?void 0:i.methods)?Tf(i==null?void 0:i.events)||(t=Lt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Lt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Ep(i,e){let t=null;return Object.values(i).forEach(s=>{if(t)return;const o=U3(s,`${e}, namespace`);o&&(t=o)}),t}function $3(i,e,t){let s=null;if(i&&qn(i)){const o=Ep(i,e);o&&(s=o);const c=R3(i,e,t);c&&(s=c)}else s=ue("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return s}function Go(i,e){let t=null;if(i&&qn(i)){const s=Ep(i,e);s&&(t=s);const o=L3(i,e);o&&(t=o)}else t=ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function Dp(i){return Gt(i.protocol,!0)}function M3(i,e){let t=!1;return e&&!i?t=!0:i&&si(i)&&i.length&&i.forEach(s=>{t=Dp(s)}),t}function j3(i){return typeof i=="number"}function wr(i){return typeof i<"u"&&typeof i!==null}function q3(i){return!(!i||typeof i!="object"||!i.code||!Bu(i.code,!1)||!i.message||!Gt(i.message,!1))}function F3(i){return!(ur(i)||!Gt(i.method,!1))}function z3(i){return!(ur(i)||ur(i.result)&&ur(i.error)||!Bu(i.id,!1)||!Gt(i.jsonrpc,!1))}function H3(i){return!(ur(i)||!Gt(i.name,!1))}function Rf(i,e){return!(!ea(e)||!_3(i).includes(e))}function B3(i,e,t){return Gt(t,!1)?w3(i,e).includes(t):!1}function K3(i,e,t){return Gt(t,!1)?b3(i,e).includes(t):!1}function Nf(i,e,t){let s=null;const o=k3(i),c=V3(e),d=Object.keys(o),f=Object.keys(c),y=Lf(Object.keys(i)),g=Lf(Object.keys(e)),m=y.filter(D=>!g.includes(D));return m.length&&(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${m.toString()}
      Received: ${Object.keys(e).toString()}`)),an(d,f)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${d.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(D=>{if(!D.includes(":")||s)return;const I=kn(e[D].accounts);I.includes(D)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${D}
        Required: ${D}
        Approved: ${I.toString()}`))}),d.forEach(D=>{s||(an(o[D].methods,c[D].methods)?an(o[D].events,c[D].events)||(s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${D}`)):s=ue("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${D}`))}),s}function k3(i){const e={};return Object.keys(i).forEach(t=>{var s;t.includes(":")?e[t]=i[t]:(s=i[t].chains)==null||s.forEach(o=>{e[o]={methods:i[t].methods,events:i[t].events}})}),e}function Lf(i){return[...new Set(i.map(e=>e.includes(":")?e.split(":")[0]:e))]}function V3(i){const e={};return Object.keys(i).forEach(t=>{if(t.includes(":"))e[t]=i[t];else{const s=kn(i[t].accounts);s==null||s.forEach(o=>{e[o]={accounts:i[t].accounts.filter(c=>c.includes(`${o}:`)),methods:i[t].methods,events:i[t].events}})}}),e}function W3(i,e){return Bu(i,!1)&&i<=e.max&&i>=e.min}function Uf(){const i=Ts();return new Promise(e=>{switch(i){case Pr.browser:e(G3());break;case Pr.reactNative:e(Y3());break;case Pr.node:e(J3());break;default:e(!0)}})}function G3(){return Kn()&&(navigator==null?void 0:navigator.onLine)}async function Y3(){if(Bn()&&typeof global<"u"&&global!=null&&global.NetInfo){const i=await(global==null?void 0:global.NetInfo.fetch());return i==null?void 0:i.isConnected}return!0}function J3(){return!0}function Q3(i){switch(Ts()){case Pr.browser:X3(i);break;case Pr.reactNative:Z3(i);break}}function X3(i){!Bn()&&Kn()&&(window.addEventListener("online",()=>i(!0)),window.addEventListener("offline",()=>i(!1)))}function Z3(i){Bn()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>i(e==null?void 0:e.isConnected)))}const kc={};let Fo=class{static get(e){return kc[e]}static set(e,t){kc[e]=t}static delete(e){delete kc[e]}};const eD=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,tD=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,rD=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function iD(i,e){if(i==="__proto__"||i==="constructor"&&e&&typeof e=="object"&&"prototype"in e){nD(i);return}return e}function nD(i){console.warn(`[destr] Dropping "${i}" key to prevent prototype pollution.`)}function zo(i,e={}){if(typeof i!="string")return i;const t=i.trim();if(i[0]==='"'&&i.at(-1)==='"'&&!i.includes("\\"))return t.slice(1,-1);if(t.length<=9){const s=t.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!rD.test(i)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return i}try{if(eD.test(i)||tD.test(i)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(i,iD)}return JSON.parse(i)}catch(s){if(e.strict)throw s;return i}}function sD(i){return!i||typeof i.then!="function"?Promise.resolve(i):i}function Wt(i,...e){try{return sD(i(...e))}catch(t){return Promise.reject(t)}}function oD(i){const e=typeof i;return i===null||e!=="object"&&e!=="function"}function aD(i){const e=Object.getPrototypeOf(i);return!e||e.isPrototypeOf(Object)}function Yo(i){if(oD(i))return String(i);if(aD(i)||Array.isArray(i))return JSON.stringify(i);if(typeof i.toJSON=="function")return Yo(i.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Sp(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const bu="base64:";function cD(i){if(typeof i=="string")return i;Sp();const e=Buffer.from(i).toString("base64");return bu+e}function uD(i){return typeof i!="string"||!i.startsWith(bu)?i:(Sp(),Buffer.from(i.slice(bu.length),"base64"))}function _r(i){return i?i.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function hD(...i){return _r(i.join(":"))}function Ho(i){return i=_r(i),i?i+":":""}const lD="memory",fD=()=>{const i=new Map;return{name:lD,options:{},hasItem(e){return i.has(e)},getItem(e){return i.get(e)??null},getItemRaw(e){return i.get(e)??null},setItem(e,t){i.set(e,t)},setItemRaw(e,t){i.set(e,t)},removeItem(e){i.delete(e)},getKeys(){return Array.from(i.keys())},clear(){i.clear()},dispose(){i.clear()}}};function dD(i={}){const e={mounts:{"":i.driver||fD()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=g=>{for(const m of e.mountpoints)if(g.startsWith(m))return{base:m,relativeKey:g.slice(m.length),driver:e.mounts[m]};return{base:"",relativeKey:g,driver:e.mounts[""]}},s=(g,m)=>e.mountpoints.filter(D=>D.startsWith(g)||m&&g.startsWith(D)).map(D=>({relativeBase:g.length>D.length?g.slice(D.length):void 0,mountpoint:D,driver:e.mounts[D]})),o=(g,m)=>{if(e.watching){m=_r(m);for(const D of e.watchListeners)D(g,m)}},c=async()=>{if(!e.watching){e.watching=!0;for(const g in e.mounts)e.unwatch[g]=await $f(e.mounts[g],o,g)}},d=async()=>{if(e.watching){for(const g in e.unwatch)await e.unwatch[g]();e.unwatch={},e.watching=!1}},f=(g,m,D)=>{const I=new Map,A=P=>{let H=I.get(P.base);return H||(H={driver:P.driver,base:P.base,items:[]},I.set(P.base,H)),H};for(const P of g){const H=typeof P=="string",B=_r(H?P:P.key),ne=H?void 0:P.value,L=H||!P.options?m:{...m,...P.options},$=t(B);A($).items.push({key:B,value:ne,relativeKey:$.relativeKey,options:L})}return Promise.all([...I.values()].map(P=>D(P))).then(P=>P.flat())},y={hasItem(g,m={}){g=_r(g);const{relativeKey:D,driver:I}=t(g);return Wt(I.hasItem,D,m)},getItem(g,m={}){g=_r(g);const{relativeKey:D,driver:I}=t(g);return Wt(I.getItem,D,m).then(A=>zo(A))},getItems(g,m){return f(g,m,D=>D.driver.getItems?Wt(D.driver.getItems,D.items.map(I=>({key:I.relativeKey,options:I.options})),m).then(I=>I.map(A=>({key:hD(D.base,A.key),value:zo(A.value)}))):Promise.all(D.items.map(I=>Wt(D.driver.getItem,I.relativeKey,I.options).then(A=>({key:I.key,value:zo(A)})))))},getItemRaw(g,m={}){g=_r(g);const{relativeKey:D,driver:I}=t(g);return I.getItemRaw?Wt(I.getItemRaw,D,m):Wt(I.getItem,D,m).then(A=>uD(A))},async setItem(g,m,D={}){if(m===void 0)return y.removeItem(g);g=_r(g);const{relativeKey:I,driver:A}=t(g);A.setItem&&(await Wt(A.setItem,I,Yo(m),D),A.watch||o("update",g))},async setItems(g,m){await f(g,m,async D=>{D.driver.setItems&&await Wt(D.driver.setItems,D.items.map(I=>({key:I.relativeKey,value:Yo(I.value),options:I.options})),m),D.driver.setItem&&await Promise.all(D.items.map(I=>Wt(D.driver.setItem,I.relativeKey,Yo(I.value),I.options)))})},async setItemRaw(g,m,D={}){if(m===void 0)return y.removeItem(g,D);g=_r(g);const{relativeKey:I,driver:A}=t(g);if(A.setItemRaw)await Wt(A.setItemRaw,I,m,D);else if(A.setItem)await Wt(A.setItem,I,cD(m),D);else return;A.watch||o("update",g)},async removeItem(g,m={}){typeof m=="boolean"&&(m={removeMeta:m}),g=_r(g);const{relativeKey:D,driver:I}=t(g);I.removeItem&&(await Wt(I.removeItem,D,m),(m.removeMeta||m.removeMata)&&await Wt(I.removeItem,D+"$",m),I.watch||o("remove",g))},async getMeta(g,m={}){typeof m=="boolean"&&(m={nativeOnly:m}),g=_r(g);const{relativeKey:D,driver:I}=t(g),A=Object.create(null);if(I.getMeta&&Object.assign(A,await Wt(I.getMeta,D,m)),!m.nativeOnly){const P=await Wt(I.getItem,D+"$",m).then(H=>zo(H));P&&typeof P=="object"&&(typeof P.atime=="string"&&(P.atime=new Date(P.atime)),typeof P.mtime=="string"&&(P.mtime=new Date(P.mtime)),Object.assign(A,P))}return A},setMeta(g,m,D={}){return this.setItem(g+"$",m,D)},removeMeta(g,m={}){return this.removeItem(g+"$",m)},async getKeys(g,m={}){g=Ho(g);const D=s(g,!0);let I=[];const A=[];for(const P of D){const B=(await Wt(P.driver.getKeys,P.relativeBase,m)).map(ne=>P.mountpoint+_r(ne)).filter(ne=>!I.some(L=>ne.startsWith(L)));A.push(...B),I=[P.mountpoint,...I.filter(ne=>!ne.startsWith(P.mountpoint))]}return g?A.filter(P=>P.startsWith(g)&&!P.endsWith("$")):A.filter(P=>!P.endsWith("$"))},async clear(g,m={}){g=Ho(g),await Promise.all(s(g,!1).map(async D=>{if(D.driver.clear)return Wt(D.driver.clear,D.relativeBase,m);if(D.driver.removeItem){const I=await D.driver.getKeys(D.relativeBase||"",m);return Promise.all(I.map(A=>D.driver.removeItem(A,m)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(g=>Mf(g)))},async watch(g){return await c(),e.watchListeners.push(g),async()=>{e.watchListeners=e.watchListeners.filter(m=>m!==g),e.watchListeners.length===0&&await d()}},async unwatch(){e.watchListeners=[],await d()},mount(g,m){if(g=Ho(g),g&&e.mounts[g])throw new Error(`already mounted at ${g}`);return g&&(e.mountpoints.push(g),e.mountpoints.sort((D,I)=>I.length-D.length)),e.mounts[g]=m,e.watching&&Promise.resolve($f(m,o,g)).then(D=>{e.unwatch[g]=D}).catch(console.error),y},async unmount(g,m=!0){g=Ho(g),!(!g||!e.mounts[g])&&(e.watching&&g in e.unwatch&&(e.unwatch[g](),delete e.unwatch[g]),m&&await Mf(e.mounts[g]),e.mountpoints=e.mountpoints.filter(D=>D!==g),delete e.mounts[g])},getMount(g=""){g=_r(g)+":";const m=t(g);return{driver:m.driver,base:m.base}},getMounts(g="",m={}){return g=_r(g),s(g,m.parents).map(I=>({driver:I.driver,base:I.mountpoint}))}};return y}function $f(i,e,t){return i.watch?i.watch((s,o)=>e(s,t+o)):()=>{}}async function Mf(i){typeof i.dispose=="function"&&await Wt(i.dispose)}function ln(i){return new Promise((e,t)=>{i.oncomplete=i.onsuccess=()=>e(i.result),i.onabort=i.onerror=()=>t(i.error)})}function Ip(i,e){const t=indexedDB.open(i);t.onupgradeneeded=()=>t.result.createObjectStore(e);const s=ln(t);return(o,c)=>s.then(d=>c(d.transaction(e,o).objectStore(e)))}let Vc;function Rs(){return Vc||(Vc=Ip("keyval-store","keyval")),Vc}function jf(i,e=Rs()){return e("readonly",t=>ln(t.get(i)))}function pD(i,e,t=Rs()){return t("readwrite",s=>(s.put(e,i),ln(s.transaction)))}function gD(i,e=Rs()){return e("readwrite",t=>(t.delete(i),ln(t.transaction)))}function yD(i=Rs()){return i("readwrite",e=>(e.clear(),ln(e.transaction)))}function vD(i,e){return i.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ln(i.transaction)}function mD(i=Rs()){return i("readonly",e=>{if(e.getAllKeys)return ln(e.getAllKeys());const t=[];return vD(e,s=>t.push(s.key)).then(()=>t)})}const _D=i=>JSON.stringify(i,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),wD=i=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=i.replace(e,'$1"$2n"$3');return JSON.parse(t,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Ns(i){if(typeof i!="string")throw new Error(`Cannot safe json parse value of type ${typeof i}`);try{return wD(i)}catch{return i}}function cn(i){return typeof i=="string"?i:_D(i)||""}const bD="idb-keyval";var ED=(i={})=>{const e=i.base&&i.base.length>0?`${i.base}:`:"",t=o=>e+o;let s;return i.dbName&&i.storeName&&(s=Ip(i.dbName,i.storeName)),{name:bD,options:i,async hasItem(o){return!(typeof await jf(t(o),s)>"u")},async getItem(o){return await jf(t(o),s)??null},setItem(o,c){return pD(t(o),c,s)},removeItem(o){return gD(t(o),s)},getKeys(){return mD(s)},clear(){return yD(s)}}};const DD="WALLET_CONNECT_V2_INDEXED_DB",SD="keyvaluestorage";let ID=class{constructor(){this.indexedDb=dD({driver:ED({dbName:DD,storeName:SD})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,cn(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jo={exports:{}};(function(){let i;function e(){}i=e,i.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,s){this[t]=String(s)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(s){t[s]=void 0,delete t[s]})},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Wc<"u"&&Wc.localStorage?Jo.exports=Wc.localStorage:typeof window<"u"&&window.localStorage?Jo.exports=window.localStorage:Jo.exports=new e})();function xD(i){var e;return[i[0],Ns((e=i[1])!=null?e:"")]}class OD{constructor(){this.localStorage=Jo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(xD)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Ns(t)}async setItem(e,t){this.localStorage.setItem(e,cn(t))}async removeItem(e){this.localStorage.removeItem(e)}}const PD="wc_storage_version",qf=1,CD=async(i,e,t)=>{const s=PD,o=await e.getItem(s);if(o&&o>=qf){t(e);return}const c=await i.getKeys();if(!c.length){t(e);return}const d=[];for(;c.length;){const f=c.shift();if(!f)continue;const y=f.toLowerCase();if(y.includes("wc@")||y.includes("walletconnect")||y.includes("wc_")||y.includes("wallet_connect")){const g=await i.getItem(f);await e.setItem(f,g),d.push(f)}}await e.setItem(s,qf),t(e),AD(i,d)},AD=async(i,e)=>{e.length&&e.forEach(async t=>{await i.removeItem(t)})};let TD=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new OD;this.storage=e;try{const t=new ID;CD(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Vn={},ps={},Gc={},gs={};let fn=class{};const RD=Object.freeze(Object.defineProperty({__proto__:null,IEvents:fn},Symbol.toStringTag,{value:"Module"})),ND=Au(RD);var Ff;function LD(){if(Ff)return gs;Ff=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.IHeartBeat=void 0;const i=ND;class e extends i.IEvents{constructor(s){super()}}return gs.IHeartBeat=e,gs}var zf;function xp(){return zf||(zf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),oi.__exportStar(LD(),i)}(Gc)),Gc}var Yc={},sn={},Hf;function UD(){if(Hf)return sn;Hf=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.HEARTBEAT_EVENTS=sn.HEARTBEAT_INTERVAL=void 0;const i=ve;return sn.HEARTBEAT_INTERVAL=i.FIVE_SECONDS,sn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},sn}var Bf;function Op(){return Bf||(Bf=1,function(i){Object.defineProperty(i,"__esModule",{value:!0}),oi.__exportStar(UD(),i)}(Yc)),Yc}var Kf;function $D(){if(Kf)return ps;Kf=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.HeartBeat=void 0;const i=oi,e=Cr,t=ve,s=xp(),o=Op();class c extends s.IHeartBeat{constructor(f){super(f),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=(f==null?void 0:f.interval)||o.HEARTBEAT_INTERVAL}static init(f){return i.__awaiter(this,void 0,void 0,function*(){const y=new c(f);return yield y.init(),y})}init(){return i.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(f,y){this.events.on(f,y)}once(f,y){this.events.once(f,y)}off(f,y){this.events.off(f,y)}removeListener(f,y){this.events.removeListener(f,y)}initialize(){return i.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return ps.HeartBeat=c,ps}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=oi;e.__exportStar($D(),i),e.__exportStar(xp(),i),e.__exportStar(Op(),i)})(Vn);var Ze={},Jc,kf;function MD(){if(kf)return Jc;kf=1;function i(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Jc=e;function e(t,s,o){var c=o&&o.stringify||i,d=1;if(typeof t=="object"&&t!==null){var f=s.length+d;if(f===1)return t;var y=new Array(f);y[0]=c(t);for(var g=1;g<f;g++)y[g]=c(s[g]);return y.join(" ")}if(typeof t!="string")return t;var m=s.length;if(m===0)return t;for(var D="",I=1-d,A=-1,P=t&&t.length||0,H=0;H<P;){if(t.charCodeAt(H)===37&&H+1<P){switch(A=A>-1?A:0,t.charCodeAt(H+1)){case 100:case 102:if(I>=m||s[I]==null)break;A<H&&(D+=t.slice(A,H)),D+=Number(s[I]),A=H+2,H++;break;case 105:if(I>=m||s[I]==null)break;A<H&&(D+=t.slice(A,H)),D+=Math.floor(Number(s[I])),A=H+2,H++;break;case 79:case 111:case 106:if(I>=m||s[I]===void 0)break;A<H&&(D+=t.slice(A,H));var B=typeof s[I];if(B==="string"){D+="'"+s[I]+"'",A=H+2,H++;break}if(B==="function"){D+=s[I].name||"<anonymous>",A=H+2,H++;break}D+=c(s[I]),A=H+2,H++;break;case 115:if(I>=m)break;A<H&&(D+=t.slice(A,H)),D+=String(s[I]),A=H+2,H++;break;case 37:A<H&&(D+=t.slice(A,H)),D+="%",A=H+2,H++,I--;break}++I}++H}return A===-1?t:(A<P&&(D+=t.slice(A)),D)}return Jc}var Qc,Vf;function jD(){if(Vf)return Qc;Vf=1;const i=MD();Qc=o;const e=R().console||{},t={mapHttpRequest:P,mapHttpResponse:P,wrapRequestSerializer:H,wrapResponseSerializer:H,wrapErrorSerializer:H,req:P,res:P,err:I};function s(E,u){return Array.isArray(E)?E.filter(function(W){return W!=="!stdSerializers.err"}):E===!0?Object.keys(u):!1}function o(E){E=E||{},E.browser=E.browser||{};const u=E.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const w=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const W=E.serializers||{},G=s(E.browser.serialize,W);let se=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(se=!1);const ce=["error","fatal","warn","info","debug","trace"];typeof w=="function"&&(w.error=w.fatal=w.warn=w.info=w.debug=w.trace=w),E.enabled===!1&&(E.level="silent");const de=E.level||"info",b=Object.create(w);b.log||(b.log=B),Object.defineProperty(b,"levelVal",{get:ee}),Object.defineProperty(b,"level",{get:Q,set:k});const C={transmit:u,serialize:G,asObject:E.browser.asObject,levels:ce,timestamp:A(E)};b.levels=o.levels,b.level=de,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=B,b.serializers=W,b._serialize=G,b._stdErrSerialize=se,b.child=V,u&&(b._logEvent=D());function ee(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Q(){return this._level}function k(J){if(J!=="silent"&&!this.levels.values[J])throw Error("unknown level "+J);this._level=J,c(C,b,"error","log"),c(C,b,"fatal","error"),c(C,b,"warn","error"),c(C,b,"info","log"),c(C,b,"debug","log"),c(C,b,"trace","log")}function V(J,re){if(!J)throw new Error("missing bindings for child Pino");re=re||{},G&&J.serializers&&(re.serializers=J.serializers);const we=re.serializers;if(G&&we){var oe=Object.assign({},W,we),be=E.browser.serialize===!0?Object.keys(oe):G;delete J.serializers,y([J],be,oe,this._stdErrSerialize)}function le(me){this._childLevel=(me._childLevel|0)+1,this.error=g(me,J,"error"),this.fatal=g(me,J,"fatal"),this.warn=g(me,J,"warn"),this.info=g(me,J,"info"),this.debug=g(me,J,"debug"),this.trace=g(me,J,"trace"),oe&&(this.serializers=oe,this._serialize=be),u&&(this._logEvent=D([].concat(me._logEvent.bindings,J)))}return le.prototype=this,new le(this)}return b}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=t,o.stdTimeFunctions=Object.assign({},{nullTime:ne,epochTime:L,unixTime:$,isoTime:x});function c(E,u,w,W){const G=Object.getPrototypeOf(u);u[w]=u.levelVal>u.levels.values[w]?B:G[w]?G[w]:e[w]||e[W]||B,d(E,u,w)}function d(E,u,w){!E.transmit&&u[w]===B||(u[w]=function(W){return function(){const se=E.timestamp(),ce=new Array(arguments.length),de=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var b=0;b<ce.length;b++)ce[b]=arguments[b];if(E.serialize&&!E.asObject&&y(ce,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?W.call(de,f(this,w,ce,se)):W.apply(de,ce),E.transmit){const C=E.transmit.level||u.level,ee=o.levels.values[C],Q=o.levels.values[w];if(Q<ee)return;m(this,{ts:se,methodLevel:w,methodValue:Q,transmitLevel:C,transmitValue:o.levels.values[E.transmit.level||u.level],send:E.transmit.send,val:u.levelVal},ce)}}}(u[w]))}function f(E,u,w,W){E._serialize&&y(w,E._serialize,E.serializers,E._stdErrSerialize);const G=w.slice();let se=G[0];const ce={};W&&(ce.time=W),ce.level=o.levels.values[u];let de=(E._childLevel|0)+1;if(de<1&&(de=1),se!==null&&typeof se=="object"){for(;de--&&typeof G[0]=="object";)Object.assign(ce,G.shift());se=G.length?i(G.shift(),G):void 0}else typeof se=="string"&&(se=i(G.shift(),G));return se!==void 0&&(ce.msg=se),ce}function y(E,u,w,W){for(const G in E)if(W&&E[G]instanceof Error)E[G]=o.stdSerializers.err(E[G]);else if(typeof E[G]=="object"&&!Array.isArray(E[G]))for(const se in E[G])u&&u.indexOf(se)>-1&&se in w&&(E[G][se]=w[se](E[G][se]))}function g(E,u,w){return function(){const W=new Array(1+arguments.length);W[0]=u;for(var G=1;G<W.length;G++)W[G]=arguments[G-1];return E[w].apply(this,W)}}function m(E,u,w){const W=u.send,G=u.ts,se=u.methodLevel,ce=u.methodValue,de=u.val,b=E._logEvent.bindings;y(w,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=G,E._logEvent.messages=w.filter(function(C){return b.indexOf(C)===-1}),E._logEvent.level.label=se,E._logEvent.level.value=ce,W(se,E._logEvent,de),E._logEvent=D(b)}function D(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function I(E){const u={type:E.constructor.name,msg:E.message,stack:E.stack};for(const w in E)u[w]===void 0&&(u[w]=E[w]);return u}function A(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?ne:L}function P(){return{}}function H(E){return E}function B(){}function ne(){return!1}function L(){return Date.now()}function $(){return Math.round(Date.now()/1e3)}function x(){return new Date(Date.now()).toISOString()}function R(){function E(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return Qc}var on={},Wf;function Pp(){return Wf||(Wf=1,Object.defineProperty(on,"__esModule",{value:!0}),on.PINO_CUSTOM_CONTEXT_KEY=on.PINO_LOGGER_DEFAULTS=void 0,on.PINO_LOGGER_DEFAULTS={level:"info"},on.PINO_CUSTOM_CONTEXT_KEY="custom_context"),on}var cr={},Gf;function qD(){if(Gf)return cr;Gf=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.generateChildLogger=cr.formatChildLoggerContext=cr.getLoggerContext=cr.setBrowserLoggerContext=cr.getBrowserLoggerContext=cr.getDefaultLoggerOptions=void 0;const i=Pp();function e(f){return Object.assign(Object.assign({},f),{level:(f==null?void 0:f.level)||i.PINO_LOGGER_DEFAULTS.level})}cr.getDefaultLoggerOptions=e;function t(f,y=i.PINO_CUSTOM_CONTEXT_KEY){return f[y]||""}cr.getBrowserLoggerContext=t;function s(f,y,g=i.PINO_CUSTOM_CONTEXT_KEY){return f[g]=y,f}cr.setBrowserLoggerContext=s;function o(f,y=i.PINO_CUSTOM_CONTEXT_KEY){let g="";return typeof f.bindings>"u"?g=t(f,y):g=f.bindings().context||"",g}cr.getLoggerContext=o;function c(f,y,g=i.PINO_CUSTOM_CONTEXT_KEY){const m=o(f,g);return m.trim()?`${m}/${y}`:y}cr.formatChildLoggerContext=c;function d(f,y,g=i.PINO_CUSTOM_CONTEXT_KEY){const m=c(f,y,g),D=f.child({context:m});return s(D,m,g)}return cr.generateChildLogger=d,cr}(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.pino=void 0;const e=oi,t=e.__importDefault(jD());Object.defineProperty(i,"pino",{enumerable:!0,get:function(){return t.default}}),e.__exportStar(Pp(),i),e.__exportStar(qD(),i)})(Ze);class FD extends fn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let zD=class extends fn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},HD=class{constructor(e,t){this.logger=e,this.core=t}},BD=class extends fn{constructor(e,t){super(),this.relayer=e,this.logger=t}},KD=class extends fn{constructor(e){super()}},kD=class{constructor(e,t,s,o){this.core=e,this.logger=t,this.name=s}};class VD extends fn{constructor(e,t){super(),this.relayer=e,this.logger=t}}let WD=class extends fn{constructor(e,t){super(),this.core=e,this.logger=t}},GD=class{constructor(e,t){this.projectId=e,this.logger=t}},YD=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},JD=class{constructor(e){this.client=e}};var Ku={},Cp={};(function(i){Object.defineProperty(i,"__esModule",{value:!0});var e=$e,t=Ar;i.DIGEST_LENGTH=64,i.BLOCK_SIZE=128;var s=function(){function f(){this.digestLength=i.DIGEST_LENGTH,this.blockSize=i.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return f.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},f.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},f.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},f.prototype.update=function(y,g){if(g===void 0&&(g=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var m=0;if(this._bytesHashed+=g,this._bufferLength>0){for(;this._bufferLength<i.BLOCK_SIZE&&g>0;)this._buffer[this._bufferLength++]=y[m++],g--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(g>=this.blockSize&&(m=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,m,g),g%=this.blockSize);g>0;)this._buffer[this._bufferLength++]=y[m++],g--;return this},f.prototype.finish=function(y){if(!this._finished){var g=this._bytesHashed,m=this._bufferLength,D=g/536870912|0,I=g<<3,A=g%128<112?128:256;this._buffer[m]=128;for(var P=m+1;P<A-8;P++)this._buffer[P]=0;e.writeUint32BE(D,this._buffer,A-8),e.writeUint32BE(I,this._buffer,A-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,A),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)e.writeUint32BE(this._stateHi[P],y,P*8),e.writeUint32BE(this._stateLo[P],y,P*8+4);return this},f.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},f.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},f.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},f.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},f}();i.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(f,y,g,m,D,I,A){for(var P=g[0],H=g[1],B=g[2],ne=g[3],L=g[4],$=g[5],x=g[6],R=g[7],E=m[0],u=m[1],w=m[2],W=m[3],G=m[4],se=m[5],ce=m[6],de=m[7],b,C,ee,Q,k,V,J,re;A>=128;){for(var we=0;we<16;we++){var oe=8*we+I;f[we]=e.readUint32BE(D,oe),y[we]=e.readUint32BE(D,oe+4)}for(var we=0;we<80;we++){var be=P,le=H,me=B,z=ne,F=L,U=$,l=x,T=R,ae=E,fe=u,Ie=w,He=W,ke=G,Me=se,gt=ce,yt=de;if(b=R,C=de,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=(L>>>14|G<<18)^(L>>>18|G<<14)^(G>>>9|L<<23),C=(G>>>14|L<<18)^(G>>>18|L<<14)^(L>>>9|G<<23),k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,b=L&$^~L&x,C=G&se^~G&ce,k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,b=o[we*2],C=o[we*2+1],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,b=f[we%16],C=y[we%16],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,ee=J&65535|re<<16,Q=k&65535|V<<16,b=ee,C=Q,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=(P>>>28|E<<4)^(E>>>2|P<<30)^(E>>>7|P<<25),C=(E>>>28|P<<4)^(P>>>2|E<<30)^(P>>>7|E<<25),k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,b=P&H^P&B^H&B,C=E&u^E&w^u&w,k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,T=J&65535|re<<16,yt=k&65535|V<<16,b=z,C=He,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=ee,C=Q,k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,z=J&65535|re<<16,He=k&65535|V<<16,H=be,B=le,ne=me,L=z,$=F,x=U,R=l,P=T,u=ae,w=fe,W=Ie,G=He,se=ke,ce=Me,de=gt,E=yt,we%16===15)for(var oe=0;oe<16;oe++)b=f[oe],C=y[oe],k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=f[(oe+9)%16],C=y[(oe+9)%16],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,ee=f[(oe+1)%16],Q=y[(oe+1)%16],b=(ee>>>1|Q<<31)^(ee>>>8|Q<<24)^ee>>>7,C=(Q>>>1|ee<<31)^(Q>>>8|ee<<24)^(Q>>>7|ee<<25),k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,ee=f[(oe+14)%16],Q=y[(oe+14)%16],b=(ee>>>19|Q<<13)^(Q>>>29|ee<<3)^ee>>>6,C=(Q>>>19|ee<<13)^(ee>>>29|Q<<3)^(Q>>>6|ee<<26),k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,f[oe]=J&65535|re<<16,y[oe]=k&65535|V<<16}b=P,C=E,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[0],C=m[0],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[0]=P=J&65535|re<<16,m[0]=E=k&65535|V<<16,b=H,C=u,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[1],C=m[1],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[1]=H=J&65535|re<<16,m[1]=u=k&65535|V<<16,b=B,C=w,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[2],C=m[2],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[2]=B=J&65535|re<<16,m[2]=w=k&65535|V<<16,b=ne,C=W,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[3],C=m[3],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[3]=ne=J&65535|re<<16,m[3]=W=k&65535|V<<16,b=L,C=G,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[4],C=m[4],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[4]=L=J&65535|re<<16,m[4]=G=k&65535|V<<16,b=$,C=se,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[5],C=m[5],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[5]=$=J&65535|re<<16,m[5]=se=k&65535|V<<16,b=x,C=ce,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[6],C=m[6],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[6]=x=J&65535|re<<16,m[6]=ce=k&65535|V<<16,b=R,C=de,k=C&65535,V=C>>>16,J=b&65535,re=b>>>16,b=g[7],C=m[7],k+=C&65535,V+=C>>>16,J+=b&65535,re+=b>>>16,V+=k>>>16,J+=V>>>16,re+=J>>>16,g[7]=R=J&65535|re<<16,m[7]=de=k&65535|V<<16,I+=128,A-=128}return I}function d(f){var y=new s;y.update(f);var g=y.digest();return y.clean(),g}i.hash=d})(Cp);(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.convertSecretKeyToX25519=i.convertPublicKeyToX25519=i.verify=i.sign=i.extractPublicKeyFromSecretKey=i.generateKeyPair=i.generateKeyPairFromSeed=i.SEED_LENGTH=i.SECRET_KEY_LENGTH=i.PUBLIC_KEY_LENGTH=i.SIGNATURE_LENGTH=void 0;const e=zn,t=Cp,s=Ar;i.SIGNATURE_LENGTH=64,i.PUBLIC_KEY_LENGTH=32,i.SECRET_KEY_LENGTH=64,i.SEED_LENGTH=32;function o(z){const F=new Float64Array(16);if(z)for(let U=0;U<z.length;U++)F[U]=z[U];return F}const c=new Uint8Array(32);c[0]=9;const d=o(),f=o([1]),y=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),D=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function A(z,F){for(let U=0;U<16;U++)z[U]=F[U]|0}function P(z){let F=1;for(let U=0;U<16;U++){let l=z[U]+F+65535;F=Math.floor(l/65536),z[U]=l-F*65536}z[0]+=F-1+37*(F-1)}function H(z,F,U){const l=~(U-1);for(let T=0;T<16;T++){const ae=l&(z[T]^F[T]);z[T]^=ae,F[T]^=ae}}function B(z,F){const U=o(),l=o();for(let T=0;T<16;T++)l[T]=F[T];P(l),P(l),P(l);for(let T=0;T<2;T++){U[0]=l[0]-65517;for(let fe=1;fe<15;fe++)U[fe]=l[fe]-65535-(U[fe-1]>>16&1),U[fe-1]&=65535;U[15]=l[15]-32767-(U[14]>>16&1);const ae=U[15]>>16&1;U[14]&=65535,H(l,U,1-ae)}for(let T=0;T<16;T++)z[2*T]=l[T]&255,z[2*T+1]=l[T]>>8}function ne(z,F){let U=0;for(let l=0;l<32;l++)U|=z[l]^F[l];return(1&U-1>>>8)-1}function L(z,F){const U=new Uint8Array(32),l=new Uint8Array(32);return B(U,z),B(l,F),ne(U,l)}function $(z){const F=new Uint8Array(32);return B(F,z),F[0]&1}function x(z,F){for(let U=0;U<16;U++)z[U]=F[2*U]+(F[2*U+1]<<8);z[15]&=32767}function R(z,F,U){for(let l=0;l<16;l++)z[l]=F[l]+U[l]}function E(z,F,U){for(let l=0;l<16;l++)z[l]=F[l]-U[l]}function u(z,F,U){let l,T,ae=0,fe=0,Ie=0,He=0,ke=0,Me=0,gt=0,yt=0,qe=0,xe=0,Ne=0,Le=0,Fe=0,Pe=0,Ue=0,Se=0,Ce=0,Be=0,Oe=0,Ve=0,Ge=0,et=0,tt=0,Je=0,rr=0,fr=0,Qr=0,ir=0,ai=0,xi=0,Hi=0,Dt=U[0],vt=U[1],St=U[2],It=U[3],bt=U[4],mt=U[5],Ut=U[6],$t=U[7],xt=U[8],Mt=U[9],Ot=U[10],At=U[11],Pt=U[12],lt=U[13],jt=U[14],qt=U[15];l=F[0],ae+=l*Dt,fe+=l*vt,Ie+=l*St,He+=l*It,ke+=l*bt,Me+=l*mt,gt+=l*Ut,yt+=l*$t,qe+=l*xt,xe+=l*Mt,Ne+=l*Ot,Le+=l*At,Fe+=l*Pt,Pe+=l*lt,Ue+=l*jt,Se+=l*qt,l=F[1],fe+=l*Dt,Ie+=l*vt,He+=l*St,ke+=l*It,Me+=l*bt,gt+=l*mt,yt+=l*Ut,qe+=l*$t,xe+=l*xt,Ne+=l*Mt,Le+=l*Ot,Fe+=l*At,Pe+=l*Pt,Ue+=l*lt,Se+=l*jt,Ce+=l*qt,l=F[2],Ie+=l*Dt,He+=l*vt,ke+=l*St,Me+=l*It,gt+=l*bt,yt+=l*mt,qe+=l*Ut,xe+=l*$t,Ne+=l*xt,Le+=l*Mt,Fe+=l*Ot,Pe+=l*At,Ue+=l*Pt,Se+=l*lt,Ce+=l*jt,Be+=l*qt,l=F[3],He+=l*Dt,ke+=l*vt,Me+=l*St,gt+=l*It,yt+=l*bt,qe+=l*mt,xe+=l*Ut,Ne+=l*$t,Le+=l*xt,Fe+=l*Mt,Pe+=l*Ot,Ue+=l*At,Se+=l*Pt,Ce+=l*lt,Be+=l*jt,Oe+=l*qt,l=F[4],ke+=l*Dt,Me+=l*vt,gt+=l*St,yt+=l*It,qe+=l*bt,xe+=l*mt,Ne+=l*Ut,Le+=l*$t,Fe+=l*xt,Pe+=l*Mt,Ue+=l*Ot,Se+=l*At,Ce+=l*Pt,Be+=l*lt,Oe+=l*jt,Ve+=l*qt,l=F[5],Me+=l*Dt,gt+=l*vt,yt+=l*St,qe+=l*It,xe+=l*bt,Ne+=l*mt,Le+=l*Ut,Fe+=l*$t,Pe+=l*xt,Ue+=l*Mt,Se+=l*Ot,Ce+=l*At,Be+=l*Pt,Oe+=l*lt,Ve+=l*jt,Ge+=l*qt,l=F[6],gt+=l*Dt,yt+=l*vt,qe+=l*St,xe+=l*It,Ne+=l*bt,Le+=l*mt,Fe+=l*Ut,Pe+=l*$t,Ue+=l*xt,Se+=l*Mt,Ce+=l*Ot,Be+=l*At,Oe+=l*Pt,Ve+=l*lt,Ge+=l*jt,et+=l*qt,l=F[7],yt+=l*Dt,qe+=l*vt,xe+=l*St,Ne+=l*It,Le+=l*bt,Fe+=l*mt,Pe+=l*Ut,Ue+=l*$t,Se+=l*xt,Ce+=l*Mt,Be+=l*Ot,Oe+=l*At,Ve+=l*Pt,Ge+=l*lt,et+=l*jt,tt+=l*qt,l=F[8],qe+=l*Dt,xe+=l*vt,Ne+=l*St,Le+=l*It,Fe+=l*bt,Pe+=l*mt,Ue+=l*Ut,Se+=l*$t,Ce+=l*xt,Be+=l*Mt,Oe+=l*Ot,Ve+=l*At,Ge+=l*Pt,et+=l*lt,tt+=l*jt,Je+=l*qt,l=F[9],xe+=l*Dt,Ne+=l*vt,Le+=l*St,Fe+=l*It,Pe+=l*bt,Ue+=l*mt,Se+=l*Ut,Ce+=l*$t,Be+=l*xt,Oe+=l*Mt,Ve+=l*Ot,Ge+=l*At,et+=l*Pt,tt+=l*lt,Je+=l*jt,rr+=l*qt,l=F[10],Ne+=l*Dt,Le+=l*vt,Fe+=l*St,Pe+=l*It,Ue+=l*bt,Se+=l*mt,Ce+=l*Ut,Be+=l*$t,Oe+=l*xt,Ve+=l*Mt,Ge+=l*Ot,et+=l*At,tt+=l*Pt,Je+=l*lt,rr+=l*jt,fr+=l*qt,l=F[11],Le+=l*Dt,Fe+=l*vt,Pe+=l*St,Ue+=l*It,Se+=l*bt,Ce+=l*mt,Be+=l*Ut,Oe+=l*$t,Ve+=l*xt,Ge+=l*Mt,et+=l*Ot,tt+=l*At,Je+=l*Pt,rr+=l*lt,fr+=l*jt,Qr+=l*qt,l=F[12],Fe+=l*Dt,Pe+=l*vt,Ue+=l*St,Se+=l*It,Ce+=l*bt,Be+=l*mt,Oe+=l*Ut,Ve+=l*$t,Ge+=l*xt,et+=l*Mt,tt+=l*Ot,Je+=l*At,rr+=l*Pt,fr+=l*lt,Qr+=l*jt,ir+=l*qt,l=F[13],Pe+=l*Dt,Ue+=l*vt,Se+=l*St,Ce+=l*It,Be+=l*bt,Oe+=l*mt,Ve+=l*Ut,Ge+=l*$t,et+=l*xt,tt+=l*Mt,Je+=l*Ot,rr+=l*At,fr+=l*Pt,Qr+=l*lt,ir+=l*jt,ai+=l*qt,l=F[14],Ue+=l*Dt,Se+=l*vt,Ce+=l*St,Be+=l*It,Oe+=l*bt,Ve+=l*mt,Ge+=l*Ut,et+=l*$t,tt+=l*xt,Je+=l*Mt,rr+=l*Ot,fr+=l*At,Qr+=l*Pt,ir+=l*lt,ai+=l*jt,xi+=l*qt,l=F[15],Se+=l*Dt,Ce+=l*vt,Be+=l*St,Oe+=l*It,Ve+=l*bt,Ge+=l*mt,et+=l*Ut,tt+=l*$t,Je+=l*xt,rr+=l*Mt,fr+=l*Ot,Qr+=l*At,ir+=l*Pt,ai+=l*lt,xi+=l*jt,Hi+=l*qt,ae+=38*Ce,fe+=38*Be,Ie+=38*Oe,He+=38*Ve,ke+=38*Ge,Me+=38*et,gt+=38*tt,yt+=38*Je,qe+=38*rr,xe+=38*fr,Ne+=38*Qr,Le+=38*ir,Fe+=38*ai,Pe+=38*xi,Ue+=38*Hi,T=1,l=ae+T+65535,T=Math.floor(l/65536),ae=l-T*65536,l=fe+T+65535,T=Math.floor(l/65536),fe=l-T*65536,l=Ie+T+65535,T=Math.floor(l/65536),Ie=l-T*65536,l=He+T+65535,T=Math.floor(l/65536),He=l-T*65536,l=ke+T+65535,T=Math.floor(l/65536),ke=l-T*65536,l=Me+T+65535,T=Math.floor(l/65536),Me=l-T*65536,l=gt+T+65535,T=Math.floor(l/65536),gt=l-T*65536,l=yt+T+65535,T=Math.floor(l/65536),yt=l-T*65536,l=qe+T+65535,T=Math.floor(l/65536),qe=l-T*65536,l=xe+T+65535,T=Math.floor(l/65536),xe=l-T*65536,l=Ne+T+65535,T=Math.floor(l/65536),Ne=l-T*65536,l=Le+T+65535,T=Math.floor(l/65536),Le=l-T*65536,l=Fe+T+65535,T=Math.floor(l/65536),Fe=l-T*65536,l=Pe+T+65535,T=Math.floor(l/65536),Pe=l-T*65536,l=Ue+T+65535,T=Math.floor(l/65536),Ue=l-T*65536,l=Se+T+65535,T=Math.floor(l/65536),Se=l-T*65536,ae+=T-1+37*(T-1),T=1,l=ae+T+65535,T=Math.floor(l/65536),ae=l-T*65536,l=fe+T+65535,T=Math.floor(l/65536),fe=l-T*65536,l=Ie+T+65535,T=Math.floor(l/65536),Ie=l-T*65536,l=He+T+65535,T=Math.floor(l/65536),He=l-T*65536,l=ke+T+65535,T=Math.floor(l/65536),ke=l-T*65536,l=Me+T+65535,T=Math.floor(l/65536),Me=l-T*65536,l=gt+T+65535,T=Math.floor(l/65536),gt=l-T*65536,l=yt+T+65535,T=Math.floor(l/65536),yt=l-T*65536,l=qe+T+65535,T=Math.floor(l/65536),qe=l-T*65536,l=xe+T+65535,T=Math.floor(l/65536),xe=l-T*65536,l=Ne+T+65535,T=Math.floor(l/65536),Ne=l-T*65536,l=Le+T+65535,T=Math.floor(l/65536),Le=l-T*65536,l=Fe+T+65535,T=Math.floor(l/65536),Fe=l-T*65536,l=Pe+T+65535,T=Math.floor(l/65536),Pe=l-T*65536,l=Ue+T+65535,T=Math.floor(l/65536),Ue=l-T*65536,l=Se+T+65535,T=Math.floor(l/65536),Se=l-T*65536,ae+=T-1+37*(T-1),z[0]=ae,z[1]=fe,z[2]=Ie,z[3]=He,z[4]=ke,z[5]=Me,z[6]=gt,z[7]=yt,z[8]=qe,z[9]=xe,z[10]=Ne,z[11]=Le,z[12]=Fe,z[13]=Pe,z[14]=Ue,z[15]=Se}function w(z,F){u(z,F,F)}function W(z,F){const U=o();let l;for(l=0;l<16;l++)U[l]=F[l];for(l=253;l>=0;l--)w(U,U),l!==2&&l!==4&&u(U,U,F);for(l=0;l<16;l++)z[l]=U[l]}function G(z,F){const U=o();let l;for(l=0;l<16;l++)U[l]=F[l];for(l=250;l>=0;l--)w(U,U),l!==1&&u(U,U,F);for(l=0;l<16;l++)z[l]=U[l]}function se(z,F){const U=o(),l=o(),T=o(),ae=o(),fe=o(),Ie=o(),He=o(),ke=o(),Me=o();E(U,z[1],z[0]),E(Me,F[1],F[0]),u(U,U,Me),R(l,z[0],z[1]),R(Me,F[0],F[1]),u(l,l,Me),u(T,z[3],F[3]),u(T,T,g),u(ae,z[2],F[2]),R(ae,ae,ae),E(fe,l,U),E(Ie,ae,T),R(He,ae,T),R(ke,l,U),u(z[0],fe,Ie),u(z[1],ke,He),u(z[2],He,Ie),u(z[3],fe,ke)}function ce(z,F,U){for(let l=0;l<4;l++)H(z[l],F[l],U)}function de(z,F){const U=o(),l=o(),T=o();W(T,F[2]),u(U,F[0],T),u(l,F[1],T),B(z,l),z[31]^=$(U)<<7}function b(z,F,U){A(z[0],d),A(z[1],f),A(z[2],f),A(z[3],d);for(let l=255;l>=0;--l){const T=U[l/8|0]>>(l&7)&1;ce(z,F,T),se(F,z),se(z,z),ce(z,F,T)}}function C(z,F){const U=[o(),o(),o(),o()];A(U[0],m),A(U[1],D),A(U[2],f),u(U[3],m,D),b(z,U,F)}function ee(z){if(z.length!==i.SEED_LENGTH)throw new Error(`ed25519: seed must be ${i.SEED_LENGTH} bytes`);const F=(0,t.hash)(z);F[0]&=248,F[31]&=127,F[31]|=64;const U=new Uint8Array(32),l=[o(),o(),o(),o()];C(l,F),de(U,l);const T=new Uint8Array(64);return T.set(z),T.set(U,32),{publicKey:U,secretKey:T}}i.generateKeyPairFromSeed=ee;function Q(z){const F=(0,e.randomBytes)(32,z),U=ee(F);return(0,s.wipe)(F),U}i.generateKeyPair=Q;function k(z){if(z.length!==i.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${i.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(z.subarray(32))}i.extractPublicKeyFromSecretKey=k;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function J(z,F){let U,l,T,ae;for(l=63;l>=32;--l){for(U=0,T=l-32,ae=l-12;T<ae;++T)F[T]+=U-16*F[l]*V[T-(l-32)],U=Math.floor((F[T]+128)/256),F[T]-=U*256;F[T]+=U,F[l]=0}for(U=0,T=0;T<32;T++)F[T]+=U-(F[31]>>4)*V[T],U=F[T]>>8,F[T]&=255;for(T=0;T<32;T++)F[T]-=U*V[T];for(l=0;l<32;l++)F[l+1]+=F[l]>>8,z[l]=F[l]&255}function re(z){const F=new Float64Array(64);for(let U=0;U<64;U++)F[U]=z[U];for(let U=0;U<64;U++)z[U]=0;J(z,F)}function we(z,F){const U=new Float64Array(64),l=[o(),o(),o(),o()],T=(0,t.hash)(z.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const ae=new Uint8Array(64);ae.set(T.subarray(32),32);const fe=new t.SHA512;fe.update(ae.subarray(32)),fe.update(F);const Ie=fe.digest();fe.clean(),re(Ie),C(l,Ie),de(ae,l),fe.reset(),fe.update(ae.subarray(0,32)),fe.update(z.subarray(32)),fe.update(F);const He=fe.digest();re(He);for(let ke=0;ke<32;ke++)U[ke]=Ie[ke];for(let ke=0;ke<32;ke++)for(let Me=0;Me<32;Me++)U[ke+Me]+=He[ke]*T[Me];return J(ae.subarray(32),U),ae}i.sign=we;function oe(z,F){const U=o(),l=o(),T=o(),ae=o(),fe=o(),Ie=o(),He=o();return A(z[2],f),x(z[1],F),w(T,z[1]),u(ae,T,y),E(T,T,z[2]),R(ae,z[2],ae),w(fe,ae),w(Ie,fe),u(He,Ie,fe),u(U,He,T),u(U,U,ae),G(U,U),u(U,U,T),u(U,U,ae),u(U,U,ae),u(z[0],U,ae),w(l,z[0]),u(l,l,ae),L(l,T)&&u(z[0],z[0],I),w(l,z[0]),u(l,l,ae),L(l,T)?-1:($(z[0])===F[31]>>7&&E(z[0],d,z[0]),u(z[3],z[0],z[1]),0)}function be(z,F,U){const l=new Uint8Array(32),T=[o(),o(),o(),o()],ae=[o(),o(),o(),o()];if(U.length!==i.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${i.SIGNATURE_LENGTH} bytes`);if(oe(ae,z))return!1;const fe=new t.SHA512;fe.update(U.subarray(0,32)),fe.update(z),fe.update(F);const Ie=fe.digest();return re(Ie),b(T,ae,Ie),C(ae,U.subarray(32)),se(T,ae),de(l,T),!ne(U,l)}i.verify=be;function le(z){let F=[o(),o(),o(),o()];if(oe(F,z))throw new Error("Ed25519: invalid public key");let U=o(),l=o(),T=F[1];R(U,f,T),E(l,f,T),W(l,l),u(U,U,l);let ae=new Uint8Array(32);return B(ae,U),ae}i.convertPublicKeyToX25519=le;function me(z){const F=(0,t.hash)(z.subarray(0,32));F[0]&=248,F[31]&=127,F[31]|=64;const U=new Uint8Array(F.subarray(0,32));return(0,s.wipe)(F),U}i.convertSecretKeyToX25519=me})(Ku);const QD="EdDSA",XD="JWT",Ap=".",Tp="base64url",ZD="utf8",e6="utf8",t6=":",r6="did",i6="key",Yf="base58btc",n6="z",s6="K36",o6=32;function ta(i){return lr(br(cn(i),ZD),Tp)}function Rp(i){const e=br(s6,Yf),t=n6+lr(fu([e,i]),Yf);return[r6,i6,t].join(t6)}function a6(i){return lr(i,Tp)}function c6(i){return br([ta(i.header),ta(i.payload)].join(Ap),e6)}function u6(i){return[ta(i.header),ta(i.payload),a6(i.signature)].join(Ap)}function Jf(i=zn.randomBytes(o6)){return Ku.generateKeyPairFromSeed(i)}async function h6(i,e,t,s,o=ve.fromMiliseconds(Date.now())){const c={alg:QD,typ:XD},d=Rp(s.publicKey),f=o+t,y={iss:d,sub:i,aud:e,iat:o,exp:f},g=c6({header:c,payload:y}),m=Ku.sign(s.secretKey,g);return u6({header:c,payload:y,signature:m})}const l6="PARSE_ERROR",f6="INVALID_REQUEST",d6="METHOD_NOT_FOUND",p6="INVALID_PARAMS",Np="INTERNAL_ERROR",ku="SERVER_ERROR",g6=[-32700,-32600,-32601,-32602,-32603],Ss={[l6]:{code:-32700,message:"Parse error"},[f6]:{code:-32600,message:"Invalid Request"},[d6]:{code:-32601,message:"Method not found"},[p6]:{code:-32602,message:"Invalid params"},[Np]:{code:-32603,message:"Internal error"},[ku]:{code:-32e3,message:"Server error"}},Lp=ku;function y6(i){return g6.includes(i)}function Qf(i){return Object.keys(Ss).includes(i)?Ss[i]:Ss[Lp]}function v6(i){const e=Object.values(Ss).find(t=>t.code===i);return e||Ss[Lp]}function Up(i,e,t){return i.message.includes("getaddrinfo ENOTFOUND")||i.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):i}var $p={},_i={},Xf;function m6(){if(Xf)return _i;Xf=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.isBrowserCryptoAvailable=_i.getSubtleCrypto=_i.getBrowerCrypto=void 0;function i(){return(Jr===null||Jr===void 0?void 0:Jr.crypto)||(Jr===null||Jr===void 0?void 0:Jr.msCrypto)||{}}_i.getBrowerCrypto=i;function e(){const s=i();return s.subtle||s.webkitSubtle}_i.getSubtleCrypto=e;function t(){return!!i()&&!!e()}return _i.isBrowserCryptoAvailable=t,_i}var wi={},Zf;function _6(){if(Zf)return wi;Zf=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.isBrowser=wi.isNode=wi.isReactNative=void 0;function i(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}wi.isReactNative=i;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}wi.isNode=e;function t(){return!i()&&!e()}return wi.isBrowser=t,wi}(function(i){Object.defineProperty(i,"__esModule",{value:!0});const e=oi;e.__exportStar(m6(),i),e.__exportStar(_6(),i)})($p);function Vu(i=3){const e=Date.now()*Math.pow(10,i),t=Math.floor(Math.random()*Math.pow(10,i));return e+t}function Mp(i=6){return BigInt(Vu(i))}function Fn(i,e,t){return{id:t||Vu(),jsonrpc:"2.0",method:i,params:e}}function Wu(i,e){return{id:i,jsonrpc:"2.0",result:e}}function la(i,e,t){return{id:i,jsonrpc:"2.0",error:w6(e,t)}}function w6(i,e){return typeof i>"u"?Qf(Np):(typeof i=="string"&&(i=Object.assign(Object.assign({},Qf(ku)),{message:i})),typeof e<"u"&&(i.data=e),y6(i.code)&&(i=v6(i.code)),i)}class b6{}class E6 extends b6{constructor(){super()}}class D6 extends E6{constructor(e){super()}}const S6="^https?:",I6="^wss?:";function x6(i){const e=i.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function jp(i,e){const t=x6(i);return typeof t>"u"?!1:new RegExp(e).test(t)}function ed(i){return jp(i,S6)}function td(i){return jp(i,I6)}function O6(i){return new RegExp("wss?://localhost(:d{2,5})?").test(i)}function qp(i){return typeof i=="object"&&"id"in i&&"jsonrpc"in i&&i.jsonrpc==="2.0"}function Gu(i){return qp(i)&&"method"in i}function fa(i){return qp(i)&&(Di(i)||Yr(i))}function Di(i){return"result"in i}function Yr(i){return"error"in i}class Si extends D6{constructor(e){super(e),this.events=new Cr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Fn(e.method,e.params||[],e.id||Mp().toString()),t)}async requestStrict(e,t){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{Yr(c)?o(c.error):s(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),fa(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const P6=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),C6=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",rd=i=>i.split("?")[0],id=10,A6=P6();let T6=class{constructor(e){if(this.url=e,this.events=new Cr.EventEmitter,this.registering=!1,!td(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(cn(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!td(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,s)=>{const o=new URLSearchParams(e).get("origin"),c=$p.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!O6(e)},d=new A6(e,[],c);C6()?d.onerror=f=>{const y=f;s(this.emitError(y.error))}:d.on("error",f=>{s(this.emitError(f))}),d.onopen=()=>{this.onOpen(d),t(d)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ns(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=la(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Up(e,rd(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>id&&this.events.setMaxListeners(id)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${rd(this.url)}`));return this.events.emit("register_error",t),t}};var ra={exports:{}};ra.exports;(function(i,e){var t=200,s="__lodash_hash_undefined__",o=1,c=2,d=9007199254740991,f="[object Arguments]",y="[object Array]",g="[object AsyncFunction]",m="[object Boolean]",D="[object Date]",I="[object Error]",A="[object Function]",P="[object GeneratorFunction]",H="[object Map]",B="[object Number]",ne="[object Null]",L="[object Object]",$="[object Promise]",x="[object Proxy]",R="[object RegExp]",E="[object Set]",u="[object String]",w="[object Symbol]",W="[object Undefined]",G="[object WeakMap]",se="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",b="[object Float64Array]",C="[object Int8Array]",ee="[object Int16Array]",Q="[object Int32Array]",k="[object Uint8Array]",V="[object Uint8ClampedArray]",J="[object Uint16Array]",re="[object Uint32Array]",we=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,le={};le[de]=le[b]=le[C]=le[ee]=le[Q]=le[k]=le[V]=le[J]=le[re]=!0,le[f]=le[y]=le[se]=le[m]=le[ce]=le[D]=le[I]=le[A]=le[H]=le[B]=le[L]=le[R]=le[E]=le[u]=le[G]=!1;var me=typeof Jr=="object"&&Jr&&Jr.Object===Object&&Jr,z=typeof self=="object"&&self&&self.Object===Object&&self,F=me||z||Function("return this")(),U=e&&!e.nodeType&&e,l=U&&!0&&i&&!i.nodeType&&i,T=l&&l.exports===U,ae=T&&me.process,fe=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Ie=fe&&fe.isTypedArray;function He(S,M){for(var te=-1,pe=S==null?0:S.length,ct=0,Te=[];++te<pe;){var dt=S[te];M(dt,te,S)&&(Te[ct++]=dt)}return Te}function ke(S,M){for(var te=-1,pe=M.length,ct=S.length;++te<pe;)S[ct+te]=M[te];return S}function Me(S,M){for(var te=-1,pe=S==null?0:S.length;++te<pe;)if(M(S[te],te,S))return!0;return!1}function gt(S,M){for(var te=-1,pe=Array(S);++te<S;)pe[te]=M(te);return pe}function yt(S){return function(M){return S(M)}}function qe(S,M){return S.has(M)}function xe(S,M){return S==null?void 0:S[M]}function Ne(S){var M=-1,te=Array(S.size);return S.forEach(function(pe,ct){te[++M]=[ct,pe]}),te}function Le(S,M){return function(te){return S(M(te))}}function Fe(S){var M=-1,te=Array(S.size);return S.forEach(function(pe){te[++M]=pe}),te}var Pe=Array.prototype,Ue=Function.prototype,Se=Object.prototype,Ce=F["__core-js_shared__"],Be=Ue.toString,Oe=Se.hasOwnProperty,Ve=function(){var S=/[^.]+$/.exec(Ce&&Ce.keys&&Ce.keys.IE_PROTO||"");return S?"Symbol(src)_1."+S:""}(),Ge=Se.toString,et=RegExp("^"+Be.call(Oe).replace(we,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=T?F.Buffer:void 0,Je=F.Symbol,rr=F.Uint8Array,fr=Se.propertyIsEnumerable,Qr=Pe.splice,ir=Je?Je.toStringTag:void 0,ai=Object.getOwnPropertySymbols,xi=tt?tt.isBuffer:void 0,Hi=Le(Object.keys,Object),Dt=Er(F,"DataView"),vt=Er(F,"Map"),St=Er(F,"Promise"),It=Er(F,"Set"),bt=Er(F,"WeakMap"),mt=Er(Object,"create"),Ut=ui(Dt),$t=ui(vt),xt=ui(St),Mt=ui(It),Ot=ui(bt),At=Je?Je.prototype:void 0,Pt=At?At.valueOf:void 0;function lt(S){var M=-1,te=S==null?0:S.length;for(this.clear();++M<te;){var pe=S[M];this.set(pe[0],pe[1])}}function jt(){this.__data__=mt?mt(null):{},this.size=0}function qt(S){var M=this.has(S)&&delete this.__data__[S];return this.size-=M?1:0,M}function ga(S){var M=this.__data__;if(mt){var te=M[S];return te===s?void 0:te}return Oe.call(M,S)?M[S]:void 0}function ya(S){var M=this.__data__;return mt?M[S]!==void 0:Oe.call(M,S)}function va(S,M){var te=this.__data__;return this.size+=this.has(S)?0:1,te[S]=mt&&M===void 0?s:M,this}lt.prototype.clear=jt,lt.prototype.delete=qt,lt.prototype.get=ga,lt.prototype.has=ya,lt.prototype.set=va;function Tr(S){var M=-1,te=S==null?0:S.length;for(this.clear();++M<te;){var pe=S[M];this.set(pe[0],pe[1])}}function ma(){this.__data__=[],this.size=0}function _a(S){var M=this.__data__,te=Bi(M,S);if(te<0)return!1;var pe=M.length-1;return te==pe?M.pop():Qr.call(M,te,1),--this.size,!0}function wa(S){var M=this.__data__,te=Bi(M,S);return te<0?void 0:M[te][1]}function ba(S){return Bi(this.__data__,S)>-1}function Ea(S,M){var te=this.__data__,pe=Bi(te,S);return pe<0?(++this.size,te.push([S,M])):te[pe][1]=M,this}Tr.prototype.clear=ma,Tr.prototype.delete=_a,Tr.prototype.get=wa,Tr.prototype.has=ba,Tr.prototype.set=Ea;function ci(S){var M=-1,te=S==null?0:S.length;for(this.clear();++M<te;){var pe=S[M];this.set(pe[0],pe[1])}}function pn(){this.size=0,this.__data__={hash:new lt,map:new(vt||Tr),string:new lt}}function Da(S){var M=Oi(this,S).delete(S);return this.size-=M?1:0,M}function gn(S){return Oi(this,S).get(S)}function Sa(S){return Oi(this,S).has(S)}function Ia(S,M){var te=Oi(this,S),pe=te.size;return te.set(S,M),this.size+=te.size==pe?0:1,this}ci.prototype.clear=pn,ci.prototype.delete=Da,ci.prototype.get=gn,ci.prototype.has=Sa,ci.prototype.set=Ia;function yn(S){var M=-1,te=S==null?0:S.length;for(this.__data__=new ci;++M<te;)this.add(S[M])}function Us(S){return this.__data__.set(S,s),this}function $s(S){return this.__data__.has(S)}yn.prototype.add=yn.prototype.push=Us,yn.prototype.has=$s;function zr(S){var M=this.__data__=new Tr(S);this.size=M.size}function xa(){this.__data__=new Tr,this.size=0}function Oa(S){var M=this.__data__,te=M.delete(S);return this.size=M.size,te}function Pa(S){return this.__data__.get(S)}function Ca(S){return this.__data__.has(S)}function Ms(S,M){var te=this.__data__;if(te instanceof Tr){var pe=te.__data__;if(!vt||pe.length<t-1)return pe.push([S,M]),this.size=++te.size,this;te=this.__data__=new ci(pe)}return te.set(S,M),this.size=te.size,this}zr.prototype.clear=xa,zr.prototype.delete=Oa,zr.prototype.get=Pa,zr.prototype.has=Ca,zr.prototype.set=Ms;function js(S,M){var te=_n(S),pe=!te&&Js(S),ct=!te&&!pe&&Yn(S),Te=!te&&!pe&&!ct&&Zs(S),dt=te||pe||ct||Te,Ft=dt?gt(S.length,String):[],Qe=Ft.length;for(var ut in S)(M||Oe.call(S,ut))&&!(dt&&(ut=="length"||ct&&(ut=="offset"||ut=="parent")||Te&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||ks(ut,Qe)))&&Ft.push(ut);return Ft}function Bi(S,M){for(var te=S.length;te--;)if(Ys(S[te][0],M))return te;return-1}function Wn(S,M,te){var pe=M(S);return _n(S)?pe:ke(pe,te(S))}function Ki(S){return S==null?S===void 0?W:ne:ir&&ir in Object(S)?Bs(S):Ra(S)}function Gn(S){return Vi(S)&&Ki(S)==f}function ki(S,M,te,pe,ct){return S===M?!0:S==null||M==null||!Vi(S)&&!Vi(M)?S!==S&&M!==M:qs(S,M,te,pe,ki,ct)}function qs(S,M,te,pe,ct,Te){var dt=_n(S),Ft=_n(M),Qe=dt?y:Xr(S),ut=Ft?y:Xr(M);Qe=Qe==f?L:Qe,ut=ut==f?L:ut;var Tt=Qe==L,dr=ut==L,zt=Qe==ut;if(zt&&Yn(S)){if(!Yn(M))return!1;dt=!0,Tt=!1}if(zt&&!Tt)return Te||(Te=new zr),dt||Zs(S)?vn(S,M,te,pe,ct,Te):Ta(S,M,Qe,te,pe,ct,Te);if(!(te&o)){var pt=Tt&&Oe.call(S,"__wrapped__"),nr=dr&&Oe.call(M,"__wrapped__");if(pt||nr){var Hr=pt?S.value():S,Rr=nr?M.value():M;return Te||(Te=new zr),ct(Hr,Rr,te,pe,Te)}}return zt?(Te||(Te=new zr),Hs(S,M,te,pe,ct,Te)):!1}function Aa(S){if(!Xs(S)||Ws(S))return!1;var M=wn(S)?et:oe;return M.test(ui(S))}function Fs(S){return Vi(S)&&Qs(S.length)&&!!le[Ki(S)]}function zs(S){if(!Gs(S))return Hi(S);var M=[];for(var te in Object(S))Oe.call(S,te)&&te!="constructor"&&M.push(te);return M}function vn(S,M,te,pe,ct,Te){var dt=te&o,Ft=S.length,Qe=M.length;if(Ft!=Qe&&!(dt&&Qe>Ft))return!1;var ut=Te.get(S);if(ut&&Te.get(M))return ut==M;var Tt=-1,dr=!0,zt=te&c?new yn:void 0;for(Te.set(S,M),Te.set(M,S);++Tt<Ft;){var pt=S[Tt],nr=M[Tt];if(pe)var Hr=dt?pe(nr,pt,Tt,M,S,Te):pe(pt,nr,Tt,S,M,Te);if(Hr!==void 0){if(Hr)continue;dr=!1;break}if(zt){if(!Me(M,function(Rr,Zr){if(!qe(zt,Zr)&&(pt===Rr||ct(pt,Rr,te,pe,Te)))return zt.push(Zr)})){dr=!1;break}}else if(!(pt===nr||ct(pt,nr,te,pe,Te))){dr=!1;break}}return Te.delete(S),Te.delete(M),dr}function Ta(S,M,te,pe,ct,Te,dt){switch(te){case ce:if(S.byteLength!=M.byteLength||S.byteOffset!=M.byteOffset)return!1;S=S.buffer,M=M.buffer;case se:return!(S.byteLength!=M.byteLength||!Te(new rr(S),new rr(M)));case m:case D:case B:return Ys(+S,+M);case I:return S.name==M.name&&S.message==M.message;case R:case u:return S==M+"";case H:var Ft=Ne;case E:var Qe=pe&o;if(Ft||(Ft=Fe),S.size!=M.size&&!Qe)return!1;var ut=dt.get(S);if(ut)return ut==M;pe|=c,dt.set(S,M);var Tt=vn(Ft(S),Ft(M),pe,ct,Te,dt);return dt.delete(S),Tt;case w:if(Pt)return Pt.call(S)==Pt.call(M)}return!1}function Hs(S,M,te,pe,ct,Te){var dt=te&o,Ft=mn(S),Qe=Ft.length,ut=mn(M),Tt=ut.length;if(Qe!=Tt&&!dt)return!1;for(var dr=Qe;dr--;){var zt=Ft[dr];if(!(dt?zt in M:Oe.call(M,zt)))return!1}var pt=Te.get(S);if(pt&&Te.get(M))return pt==M;var nr=!0;Te.set(S,M),Te.set(M,S);for(var Hr=dt;++dr<Qe;){zt=Ft[dr];var Rr=S[zt],Zr=M[zt];if(pe)var Jn=dt?pe(Zr,Rr,zt,M,S,Te):pe(Rr,Zr,zt,S,M,Te);if(!(Jn===void 0?Rr===Zr||ct(Rr,Zr,te,pe,Te):Jn)){nr=!1;break}Hr||(Hr=zt=="constructor")}if(nr&&!Hr){var Wi=S.constructor,kt=M.constructor;Wi!=kt&&"constructor"in S&&"constructor"in M&&!(typeof Wi=="function"&&Wi instanceof Wi&&typeof kt=="function"&&kt instanceof kt)&&(nr=!1)}return Te.delete(S),Te.delete(M),nr}function mn(S){return Wn(S,Ua,Ks)}function Oi(S,M){var te=S.__data__;return Vs(M)?te[typeof M=="string"?"string":"hash"]:te.map}function Er(S,M){var te=xe(S,M);return Aa(te)?te:void 0}function Bs(S){var M=Oe.call(S,ir),te=S[ir];try{S[ir]=void 0;var pe=!0}catch{}var ct=Ge.call(S);return pe&&(M?S[ir]=te:delete S[ir]),ct}var Ks=ai?function(S){return S==null?[]:(S=Object(S),He(ai(S),function(M){return fr.call(S,M)}))}:at,Xr=Ki;(Dt&&Xr(new Dt(new ArrayBuffer(1)))!=ce||vt&&Xr(new vt)!=H||St&&Xr(St.resolve())!=$||It&&Xr(new It)!=E||bt&&Xr(new bt)!=G)&&(Xr=function(S){var M=Ki(S),te=M==L?S.constructor:void 0,pe=te?ui(te):"";if(pe)switch(pe){case Ut:return ce;case $t:return H;case xt:return $;case Mt:return E;case Ot:return G}return M});function ks(S,M){return M=M??d,!!M&&(typeof S=="number"||be.test(S))&&S>-1&&S%1==0&&S<M}function Vs(S){var M=typeof S;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?S!=="__proto__":S===null}function Ws(S){return!!Ve&&Ve in S}function Gs(S){var M=S&&S.constructor,te=typeof M=="function"&&M.prototype||Se;return S===te}function Ra(S){return Ge.call(S)}function ui(S){if(S!=null){try{return Be.call(S)}catch{}try{return S+""}catch{}}return""}function Ys(S,M){return S===M||S!==S&&M!==M}var Js=Gn(function(){return arguments}())?Gn:function(S){return Vi(S)&&Oe.call(S,"callee")&&!fr.call(S,"callee")},_n=Array.isArray;function Na(S){return S!=null&&Qs(S.length)&&!wn(S)}var Yn=xi||st;function La(S,M){return ki(S,M)}function wn(S){if(!Xs(S))return!1;var M=Ki(S);return M==A||M==P||M==g||M==x}function Qs(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=d}function Xs(S){var M=typeof S;return S!=null&&(M=="object"||M=="function")}function Vi(S){return S!=null&&typeof S=="object"}var Zs=Ie?yt(Ie):Fs;function Ua(S){return Na(S)?js(S):zs(S)}function at(){return[]}function st(){return!1}i.exports=La})(ra,ra.exports);var R6=ra.exports;const N6=Cu(R6);var L6={};function U6(i,e){if(i.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),s=0;s<t.length;s++)t[s]=255;for(var o=0;o<i.length;o++){var c=i.charAt(o),d=c.charCodeAt(0);if(t[d]!==255)throw new TypeError(c+" is ambiguous");t[d]=o}var f=i.length,y=i.charAt(0),g=Math.log(f)/Math.log(256),m=Math.log(256)/Math.log(f);function D(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var H=0,B=0,ne=0,L=P.length;ne!==L&&P[ne]===0;)ne++,H++;for(var $=(L-ne)*m+1>>>0,x=new Uint8Array($);ne!==L;){for(var R=P[ne],E=0,u=$-1;(R!==0||E<B)&&u!==-1;u--,E++)R+=256*x[u]>>>0,x[u]=R%f>>>0,R=R/f>>>0;if(R!==0)throw new Error("Non-zero carry");B=E,ne++}for(var w=$-B;w!==$&&x[w]===0;)w++;for(var W=y.repeat(H);w<$;++w)W+=i.charAt(x[w]);return W}function I(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var H=0;if(P[H]!==" "){for(var B=0,ne=0;P[H]===y;)B++,H++;for(var L=(P.length-H)*g+1>>>0,$=new Uint8Array(L);P[H];){var x=t[P.charCodeAt(H)];if(x===255)return;for(var R=0,E=L-1;(x!==0||R<ne)&&E!==-1;E--,R++)x+=f*$[E]>>>0,$[E]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");ne=R,H++}if(P[H]!==" "){for(var u=L-ne;u!==L&&$[u]===0;)u++;for(var w=new Uint8Array(B+(L-u)),W=B;u!==L;)w[W++]=$[u++];return w}}}function A(P){var H=I(P);if(H)return H;throw new Error(`Non-${e} character`)}return{encode:D,decodeUnsafe:I,decode:A}}var $6=U6,M6=$6;const Fp=i=>{if(i instanceof Uint8Array&&i.constructor.name==="Uint8Array")return i;if(i instanceof ArrayBuffer)return new Uint8Array(i);if(ArrayBuffer.isView(i))return new Uint8Array(i.buffer,i.byteOffset,i.byteLength);throw new Error("Unknown type, must be binary type")},j6=i=>new TextEncoder().encode(i),q6=i=>new TextDecoder().decode(i);class F6{constructor(e,t,s){this.name=e,this.prefix=t,this.baseEncode=s}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class z6{constructor(e,t,s){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=s}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return zp(this,e)}}let H6=class{constructor(e){this.decoders=e}or(e){return zp(this,e)}decode(e){const t=e[0],s=this.decoders[t];if(s)return s.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const zp=(i,e)=>new H6({...i.decoders||{[i.prefix]:i},...e.decoders||{[e.prefix]:e}});class B6{constructor(e,t,s,o){this.name=e,this.prefix=t,this.baseEncode=s,this.baseDecode=o,this.encoder=new F6(e,t,s),this.decoder=new z6(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const da=({name:i,prefix:e,encode:t,decode:s})=>new B6(i,e,t,s),Ls=({prefix:i,name:e,alphabet:t})=>{const{encode:s,decode:o}=M6(t,e);return da({prefix:i,name:e,encode:s,decode:c=>Fp(o(c))})},K6=(i,e,t,s)=>{const o={};for(let m=0;m<e.length;++m)o[e[m]]=m;let c=i.length;for(;i[c-1]==="=";)--c;const d=new Uint8Array(c*t/8|0);let f=0,y=0,g=0;for(let m=0;m<c;++m){const D=o[i[m]];if(D===void 0)throw new SyntaxError(`Non-${s} character`);y=y<<t|D,f+=t,f>=8&&(f-=8,d[g++]=255&y>>f)}if(f>=t||255&y<<8-f)throw new SyntaxError("Unexpected end of data");return d},k6=(i,e,t)=>{const s=e[e.length-1]==="=",o=(1<<t)-1;let c="",d=0,f=0;for(let y=0;y<i.length;++y)for(f=f<<8|i[y],d+=8;d>t;)d-=t,c+=e[o&f>>d];if(d&&(c+=e[o&f<<t-d]),s)for(;c.length*t&7;)c+="=";return c},Qt=({name:i,prefix:e,bitsPerChar:t,alphabet:s})=>da({prefix:e,name:i,encode(o){return k6(o,s,t)},decode(o){return K6(o,s,t,i)}}),V6=da({prefix:"\0",name:"identity",encode:i=>q6(i),decode:i=>j6(i)});var W6=Object.freeze({__proto__:null,identity:V6});const G6=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Y6=Object.freeze({__proto__:null,base2:G6});const J6=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Q6=Object.freeze({__proto__:null,base8:J6});const X6=Ls({prefix:"9",name:"base10",alphabet:"0123456789"});var Z6=Object.freeze({__proto__:null,base10:X6});const e2=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),t2=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var r2=Object.freeze({__proto__:null,base16:e2,base16upper:t2});const i2=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),n2=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s2=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o2=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),a2=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),c2=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),u2=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h2=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),l2=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var f2=Object.freeze({__proto__:null,base32:i2,base32upper:n2,base32pad:s2,base32padupper:o2,base32hex:a2,base32hexupper:c2,base32hexpad:u2,base32hexpadupper:h2,base32z:l2});const d2=Ls({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),p2=Ls({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var g2=Object.freeze({__proto__:null,base36:d2,base36upper:p2});const y2=Ls({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),v2=Ls({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var m2=Object.freeze({__proto__:null,base58btc:y2,base58flickr:v2});const _2=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),w2=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),b2=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),E2=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var D2=Object.freeze({__proto__:null,base64:_2,base64pad:w2,base64url:b2,base64urlpad:E2});const Hp=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),S2=Hp.reduce((i,e,t)=>(i[t]=e,i),[]),I2=Hp.reduce((i,e,t)=>(i[e.codePointAt(0)]=t,i),[]);function x2(i){return i.reduce((e,t)=>(e+=S2[t],e),"")}function O2(i){const e=[];for(const t of i){const s=I2[t.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(s)}return new Uint8Array(e)}const P2=da({prefix:"ðŸš€",name:"base256emoji",encode:x2,decode:O2});var C2=Object.freeze({__proto__:null,base256emoji:P2}),A2=Bp,nd=128,T2=127,R2=~T2,N2=Math.pow(2,31);function Bp(i,e,t){e=e||[],t=t||0;for(var s=t;i>=N2;)e[t++]=i&255|nd,i/=128;for(;i&R2;)e[t++]=i&255|nd,i>>>=7;return e[t]=i|0,Bp.bytes=t-s+1,e}var L2=Eu,U2=128,sd=127;function Eu(i,s){var t=0,s=s||0,o=0,c=s,d,f=i.length;do{if(c>=f)throw Eu.bytes=0,new RangeError("Could not decode varint");d=i[c++],t+=o<28?(d&sd)<<o:(d&sd)*Math.pow(2,o),o+=7}while(d>=U2);return Eu.bytes=c-s,t}var $2=Math.pow(2,7),M2=Math.pow(2,14),j2=Math.pow(2,21),q2=Math.pow(2,28),F2=Math.pow(2,35),z2=Math.pow(2,42),H2=Math.pow(2,49),B2=Math.pow(2,56),K2=Math.pow(2,63),k2=function(i){return i<$2?1:i<M2?2:i<j2?3:i<q2?4:i<F2?5:i<z2?6:i<H2?7:i<B2?8:i<K2?9:10},V2={encode:A2,decode:L2,encodingLength:k2},Kp=V2;const od=(i,e,t=0)=>(Kp.encode(i,e,t),e),ad=i=>Kp.encodingLength(i),Du=(i,e)=>{const t=e.byteLength,s=ad(i),o=s+ad(t),c=new Uint8Array(o+t);return od(i,c,0),od(t,c,s),c.set(e,o),new W2(i,t,e,c)};class W2{constructor(e,t,s,o){this.code=e,this.size=t,this.digest=s,this.bytes=o}}const kp=({name:i,code:e,encode:t})=>new G2(i,e,t);class G2{constructor(e,t,s){this.name=e,this.code=t,this.encode=s}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Du(this.code,t):t.then(s=>Du(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Vp=i=>async e=>new Uint8Array(await crypto.subtle.digest(i,e)),Y2=kp({name:"sha2-256",code:18,encode:Vp("SHA-256")}),J2=kp({name:"sha2-512",code:19,encode:Vp("SHA-512")});var Q2=Object.freeze({__proto__:null,sha256:Y2,sha512:J2});const Wp=0,X2="identity",Gp=Fp,Z2=i=>Du(Wp,Gp(i)),eS={code:Wp,name:X2,encode:Gp,digest:Z2};var tS=Object.freeze({__proto__:null,identity:eS});new TextEncoder,new TextDecoder;const cd={...W6,...Y6,...Q6,...Z6,...r2,...f2,...g2,...m2,...D2,...C2};({...Q2,...tS});function Yp(i){return globalThis.Buffer!=null?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):i}function rS(i=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Yp(globalThis.Buffer.allocUnsafe(i)):new Uint8Array(i)}function Jp(i,e,t,s){return{name:i,prefix:e,encoder:{name:i,prefix:e,encode:t},decoder:{decode:s}}}const ud=Jp("utf8","u",i=>"u"+new TextDecoder("utf8").decode(i),i=>new TextEncoder().encode(i.substring(1))),Xc=Jp("ascii","a",i=>{let e="a";for(let t=0;t<i.length;t++)e+=String.fromCharCode(i[t]);return e},i=>{i=i.substring(1);const e=rS(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}),iS={utf8:ud,"utf-8":ud,hex:cd.base16,latin1:Xc,ascii:Xc,binary:Xc,...cd};function nS(i,e="utf8"){const t=iS[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Yp(globalThis.Buffer.from(i,"utf-8")):t.decoder.decode(`${t.prefix}${i}`)}const Qp="wc",sS=2,Yu="core",ji=`${Qp}@2:${Yu}:`,oS={name:Yu,logger:"error"},aS={database:":memory:"},cS="crypto",hd="client_ed25519_seed",uS=ve.ONE_DAY,hS="keychain",lS="0.3",fS="messages",dS="0.3",pS=ve.SIX_HOURS,gS="publisher",Xp="irn",yS="error",Zp="wss://relay.walletconnect.com",ld="wss://relay.walletconnect.org",vS="relayer",tr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},mS="_subscription",bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_S=ve.ONE_SECOND,wS="2.10.6",bS=1e4,ES="0.3",DS="WALLETCONNECT_CLIENT_ID",Wr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},SS="subscription",IS="0.3",xS=ve.FIVE_SECONDS*1e3,OS="pairing",PS="0.3",ys={wc_pairingDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:0},res:{ttl:ve.ONE_DAY,prompt:!1,tag:0}}},Es={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ni={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},CS="history",AS="0.3",TS="expirer",Fr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},RS="0.3",Zc="verify-api",$n="https://verify.walletconnect.com",Su="https://verify.walletconnect.org",NS=[$n,Su];class LS{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=hS,this.version=lS,this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=ue("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=e,this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,mp(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?_p(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class US{constructor(e,t,s){this.core=e,this.logger=t,this.name=cS,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=Jf(o);return Rp(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=FE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),d=Jf(c),f=_u();return await h6(f,o,uS,d)},this.generateSharedKey=(o,c,d)=>{this.isInitialized();const f=this.getPrivateKey(o),y=zE(f,c);return this.setSymKey(y,d)},this.setSymKey=async(o,c)=>{this.isInitialized();const d=c||HE(o);return await this.keychain.set(d,o),d},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,d)=>{this.isInitialized();const f=vp(d),y=cn(c);if(Sf(f)){const I=f.senderPublicKey,A=f.receiverPublicKey;o=await this.generateSharedKey(I,A)}const g=this.getSymKey(o),{type:m,senderPublicKey:D}=f;return KE({type:m,symKey:g,message:y,senderPublicKey:D})},this.decode=async(o,c,d)=>{this.isInitialized();const f=WE(c,d);if(Sf(f)){const y=f.receiverPublicKey,g=f.senderPublicKey;o=await this.generateSharedKey(y,g)}try{const y=this.getSymKey(o),g=kE({symKey:y,encoded:c});return Ns(g)}catch(y){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(y)}},this.getPayloadType=o=>{const c=Zo(o);return As(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Zo(o);return c.senderPublicKey?lr(c.senderPublicKey,hr):void 0},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.keychain=s||new LS(this.core,this.logger)}get context(){return Ze.getLoggerContext(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(hd)}catch{e=_u(),await this.keychain.set(hd,e)}return nS(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $S extends HD{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=fS,this.version=dS,this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=jn(o);let d=this.messages.get(s);return typeof d>"u"&&(d={}),typeof d[c]<"u"||(d[c]=o,this.messages.set(s,d),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),d=jn(o);return typeof c[d]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Ze.generateChildLogger(e,this.name),this.core=t}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,mp(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?_p(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class MS extends BD{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Cr.EventEmitter,this.name=gS,this.queue=new Map,this.publishTimeout=ve.toMiliseconds(ve.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{var d;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const f=(c==null?void 0:c.ttl)||pS,y=wu(c),g=(c==null?void 0:c.prompt)||!1,m=(c==null?void 0:c.tag)||0,D=(c==null?void 0:c.id)||Mp().toString(),I={topic:s,message:o,opts:{ttl:f,relay:y,prompt:g,tag:m,id:D}},A=setTimeout(()=>this.queue.set(D,I),this.publishTimeout);try{await await Os(this.rpcPublish(s,o,f,y,g,m,D),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(D),this.relayer.events.emit(tr.publish,I)}catch(P){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(d=c==null?void 0:c.internal)!=null&&d.throwOnFailedPublish)throw this.removeRequestFromQueue(D),P;return}finally{clearTimeout(A)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(f){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(f),f}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.registerEventListeners()}get context(){return Ze.getLoggerContext(this.logger)}rpcPublish(e,t,s,o,c,d,f){var y,g,m,D;const I={method:Wo(o.protocol).publish,params:{topic:e,message:t,ttl:s,prompt:c,tag:d},id:f};return ur((y=I.params)==null?void 0:y.prompt)&&((g=I.params)==null||delete g.prompt),ur((m=I.params)==null?void 0:m.tag)&&((D=I.params)==null||delete D.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:I}),this.relayer.request(I)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:s,opts:o}=e;await this.publish(t,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Vn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(tr.connection_stalled);return}this.checkQueue()}),this.relayer.on(tr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class jS{constructor(){this.map=new Map,this.set=(e,t)=>{const s=this.get(e);this.exists(e,t)||this.map.set(e,[...s,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const s=this.get(e);if(!this.exists(e,t))return;const o=s.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var qS=Object.defineProperty,FS=Object.defineProperties,zS=Object.getOwnPropertyDescriptors,fd=Object.getOwnPropertySymbols,HS=Object.prototype.hasOwnProperty,BS=Object.prototype.propertyIsEnumerable,dd=(i,e,t)=>e in i?qS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,vs=(i,e)=>{for(var t in e||(e={}))HS.call(e,t)&&dd(i,t,e[t]);if(fd)for(var t of fd(e))BS.call(e,t)&&dd(i,t,e[t]);return i},eu=(i,e)=>FS(i,zS(e));class KS extends VD{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new jS,this.events=new Cr.EventEmitter,this.name=SS,this.version=IS,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ji,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=wu(o),d={topic:s,relay:c};this.pending.set(s,d);const f=await this.rpcSubscribe(s,c);return this.onSubscribe(f,d),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),f}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof(o==null?void 0:o.id)<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((o,c)=>{const d=new ve.Watch;d.start(this.pendingSubscriptionWatchLabel);const f=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(f),d.stop(this.pendingSubscriptionWatchLabel),o(!0)),d.elapsed(this.pendingSubscriptionWatchLabel)>=xS&&(clearInterval(f),d.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Ze.generateChildLogger(t,this.name),this.clientId=""}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let s=!1;try{s=this.getSubscription(e).topic===t}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const s=this.topicMap.get(e);await Promise.all(s.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}});try{const o=wu(s);await this.rpcUnsubscribe(e,t,o);const c=Lt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const s={method:Wo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Os(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}return jn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,s={method:Wo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Os(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(tr.connection_stalled)}}rpcUnsubscribe(e,t,s){const o={method:Wo(s.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,eu(vs({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,vs({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,s){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,s),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,vs({},t)),this.topicMap.set(t.topic,e),this.events.emit(Wr.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const s=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(s.topic,e),this.events.emit(Wr.deleted,eu(vs({},s),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Wr.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Wr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);si(t)&&this.onBatchSubscribe(t.map((s,o)=>eu(vs({},e[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Vn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(tr.connect,async()=>{await this.onConnect()}),this.relayer.on(tr.disconnect,()=>{this.onDisconnect()}),this.events.on(Wr.created,async e=>{const t=Wr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Wr.deleted,async e=>{const t=Wr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var kS=Object.defineProperty,pd=Object.getOwnPropertySymbols,VS=Object.prototype.hasOwnProperty,WS=Object.prototype.propertyIsEnumerable,gd=(i,e,t)=>e in i?kS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,GS=(i,e)=>{for(var t in e||(e={}))VS.call(e,t)&&gd(i,t,e[t]);if(pd)for(var t of pd(e))WS.call(e,t)&&gd(i,t,e[t]);return i};class YS extends KD{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Cr.EventEmitter,this.name=vS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(tr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(tr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(bi.payload,this.onPayloadHandler),this.provider.on(bi.connect,this.onConnectHandler),this.provider.on(bi.disconnect,this.onDisconnectHandler),this.provider.on(bi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ze.generateChildLogger(e.logger,this.name):Ze.pino(Ze.getDefaultLoggerOptions({level:e.logger||yS})),this.messages=new $S(this.logger,e.core),this.subscriber=new KS(this,this.logger),this.publisher=new MS(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Zp,this.projectId=e.projectId,this.bundleId=ZE(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${ld}...`),await this.restartTransport(ld)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},bS)}get context(){return Ze.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,s){this.isInitialized(),await this.publisher.publish(e,t,s),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"";if(o)return o;let c;const d=f=>{f.topic===e&&(this.subscriber.off(Wr.created,d),c())};return await Promise.all([new Promise(f=>{c=f,this.subscriber.on(Wr.created,d)}),new Promise(async f=>{o=await this.subscriber.subscribe(e,t),f()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Os(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Wr.resubscribed,()=>{t()})}),new Promise(async(t,s)=>{try{await Os(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){s(o);return}t()})])}catch(t){this.logger.error(t);const s=t;if(!this.isConnectionStalled(s.message))throw t;this.provider.events.emit(bi.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Uf())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Si(new T6(s3({sdkVersion:wS,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:s}=e;await this.messages.set(t,s)}async shouldIgnoreMessageEvent(e){const{topic:t,message:s}=e;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Gu(e)){if(!e.method.endsWith(mS))return;const t=e.params,{topic:s,message:o,publishedAt:c}=t.data,d={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(GS({type:"event",event:t.id},d)),this.events.emit(t.id,d),await this.acknowledgePayload(e),await this.onMessageEvent(d)}else fa(e)&&this.events.emit(tr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(tr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Wu(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(bi.payload,this.onPayloadHandler),this.provider.off(bi.connect,this.onConnectHandler),this.provider.off(bi.disconnect,this.onDisconnectHandler),this.provider.off(bi.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(tr.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await Uf();Q3(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(tr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},ve.toMiliseconds(_S)))}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var JS=Object.defineProperty,yd=Object.getOwnPropertySymbols,QS=Object.prototype.hasOwnProperty,XS=Object.prototype.propertyIsEnumerable,vd=(i,e,t)=>e in i?JS(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,md=(i,e)=>{for(var t in e||(e={}))QS.call(e,t)&&vd(i,t,e[t]);if(yd)for(var t of yd(e))XS.call(e,t)&&vd(i,t,e[t]);return i};class pa extends kD{constructor(e,t,s,o=ji,c=void 0){super(e,t,s,o),this.core=e,this.logger=t,this.name=s,this.map=new Map,this.version=ES,this.cached=[],this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(d=>{this.getKey&&d!==null&&!ur(d)?this.map.set(this.getKey(d),d):P3(d)?this.map.set(d.id,d):C3(d)&&this.map.set(d.topic,d)}),this.cached=[],this.initialized=!0)},this.set=async(d,f)=>{this.isInitialized(),this.map.has(d)?await this.update(d,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:d,value:f}),this.map.set(d,f),await this.persist())},this.get=d=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:d}),this.getData(d)),this.getAll=d=>(this.isInitialized(),d?this.values.filter(f=>Object.keys(d).every(y=>N6(f[y],d[y]))):this.values),this.update=async(d,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:d,update:f});const y=md(md({},this.getData(d)),f);this.map.set(d,y),await this.persist()},this.delete=async(d,f)=>{this.isInitialized(),this.map.has(d)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:d,reason:f}),this.map.delete(d),await this.persist())},this.logger=Ze.generateChildLogger(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ZS{constructor(e,t){this.core=e,this.logger=t,this.name=OS,this.version=PS,this.events=new Ru,this.initialized=!1,this.storagePrefix=ji,this.ignoredPayloadTypes=[hn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=_u(),o=await this.core.crypto.setSymKey(s),c=Gr(ve.FIVE_MINUTES),d={protocol:Xp},f={topic:o,expiry:c,relay:d,active:!1},y=m3({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:d});return await this.pairings.set(o,f),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:y}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:d}=Af(s.uri);let f;if(this.pairings.keys.includes(o)&&(f=this.pairings.get(o),f.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const y=Gr(ve.FIVE_MINUTES),g={topic:o,relay:d,expiry:y,active:!1};return await this.pairings.set(o,g),this.core.expirer.set(o,y),s.activatePairing&&await this.activate({topic:o}),this.events.emit(Es.create,g),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:d})),g},this.activate=async({topic:s})=>{this.isInitialized();const o=Gr(ve.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:d,resolve:f,reject:y}=Un();this.events.once(Ht("pairing_ping",c),({error:g})=>{g?y(g):f()}),await d()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Lt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const d=Fn(o,c),f=await this.core.crypto.encode(s,d),y=ys[o].req;return this.core.history.set(s,d),this.core.relayer.publish(s,f,y),d.id},this.sendResult=async(s,o,c)=>{const d=Wu(s,c),f=await this.core.crypto.encode(o,d),y=await this.core.history.get(o,s),g=ys[y.request.method].res;await this.core.relayer.publish(o,f,g),await this.core.history.resolve(d)},this.sendError=async(s,o,c)=>{const d=la(s,c),f=await this.core.crypto.encode(o,d),y=await this.core.history.get(o,s),g=ys[y.request.method]?ys[y.request.method].res:ys.unregistered_method.res;await this.core.relayer.publish(o,f,g),await this.core.history.resolve(d)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Lt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>Mi(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,d=(await this.core.history.get(o,c.id)).request.method;switch(d){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(d)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit(Es.ping,{id:c,topic:s})}catch(d){await this.sendError(c,s,d),this.logger.error(d)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{Di(o)?this.events.emit(Ht("pairing_ping",c),{}):Yr(o)&&this.events.emit(Ht("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(Es.delete,{id:c,topic:s})}catch(d){await this.sendError(c,s,d),this.logger.error(d)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:d}=o;try{if(this.registeredMethods.includes(d))return;const f=Lt("WC_METHOD_UNSUPPORTED",d);await this.sendError(c,s,f),this.logger.error(f)}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Lt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var o;if(!wr(s)){const{message:d}=ue("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(d)}if(!O3(s.uri)){const{message:d}=ue("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(d)}const c=Af(s.uri);if(!((o=c==null?void 0:c.relay)!=null&&o.protocol)){const{message:d}=ue("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(d)}if(!(c!=null&&c.symKey)){const{message:d}=ue("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(d)}},this.isValidPing=async s=>{if(!wr(s)){const{message:c}=ue("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!wr(s)){const{message:c}=ue("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Gt(s,!1)){const{message:o}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(Mi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=ue("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=e,this.logger=Ze.generateChildLogger(t,this.name),this.pairings=new pa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Ze.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(t,s);try{Gu(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):fa(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(Fr.expired,async e=>{const{topic:t}=bp(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Es.expire,{topic:t}))})}}class eI extends zD{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Cr.EventEmitter,this.name=CS,this.version=AS,this.cached=[],this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const d={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:Gr(ve.THIRTY_DAYS)};this.records.set(d.id,d),this.events.emit(ni.created,d)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=Yr(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(ni.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(ni.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const s={topic:t.topic,request:Fn(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(s)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(s)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ni.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ni.created,e=>{const t=ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.updated,e=>{const t=ni.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(ni.deleted,e=>{const t=ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Vn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{ve.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class tI extends WD{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Cr.EventEmitter,this.name=TS,this.version=RS,this.cached=[],this.initialized=!1,this.storagePrefix=ji,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),d={target:c,expiry:o};this.expirations.set(c,d),this.checkExpiry(c,d),this.events.emit(Fr.created,{target:c,expiration:d})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(Fr.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=Ze.generateChildLogger(t,this.name)}get context(){return Ze.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return o3(e);if(typeof e=="number")return a3(e);const{message:t}=ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Fr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:s}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}return t}checkExpiry(e,t){const{expiry:s}=t;ve.toMiliseconds(s)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Fr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Vn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Fr.created,e=>{const t=Fr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Fr.expired,e=>{const t=Fr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Fr.deleted,e=>{const t=Fr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}class rI extends GD{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Zc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||Bn()||!Kn())return;const o=this.getVerifyUrl(s==null?void 0:s.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Su;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(s==null?void 0:s.verifyUrl);let c;try{c=await this.fetchAttestation(s.attestationId,o)}catch(d){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${o}`),this.logger.info(d),c=await this.fetchAttestation(s.attestationId,Su)}return c},this.fetchAttestation=async(s,o)=>{this.logger.info(`resolving attestation: ${s} from url: ${o}`);const c=this.startAbortTimer(ve.ONE_SECOND*2),d=await fetch(`${o}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(c),d.status===200?await d.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const o=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),s())};await Promise.race([new Promise(c=>{if(document.getElementById(Zc))return c();window.addEventListener("message",o);const d=document.createElement("iframe");d.id=Zc,d.src=`${this.verifyUrl}/${this.projectId}`,d.style.display="none",document.body.append(d),this.iframe=d,s=c}),new Promise((c,d)=>setTimeout(()=>{window.removeEventListener("message",o),d("verify iframe load timeout")},ve.toMiliseconds(ve.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let o=s||$n;return NS.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${$n}`),o=$n),o},this.logger=Ze.generateChildLogger(t,this.name),this.verifyUrl=$n,this.abortController=new AbortController,this.isDevEnv=zu()&&L6.IS_VITEST}get context(){return Ze.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ve.toMiliseconds(e))}}var iI=Object.defineProperty,_d=Object.getOwnPropertySymbols,nI=Object.prototype.hasOwnProperty,sI=Object.prototype.propertyIsEnumerable,wd=(i,e,t)=>e in i?iI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,bd=(i,e)=>{for(var t in e||(e={}))nI.call(e,t)&&wd(i,t,e[t]);if(_d)for(var t of _d(e))sI.call(e,t)&&wd(i,t,e[t]);return i};class Ju extends FD{constructor(e){super(e),this.protocol=Qp,this.version=sS,this.name=Yu,this.events=new Cr.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Zp,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||oS.logger}));this.logger=Ze.generateChildLogger(t,this.name),this.heartbeat=new Vn.HeartBeat,this.crypto=new US(this,this.logger,e==null?void 0:e.keychain),this.history=new eI(this,this.logger),this.expirer=new tI(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new TD(bd(bd({},aS),e==null?void 0:e.storageOptions)),this.relayer=new YS({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ZS(this,this.logger),this.verify=new rI(this.projectId||"",this.logger)}static async init(e){const t=new Ju(e);await t.initialize();const s=await t.crypto.getClientId();return await t.storage.setItem(DS,s),t}get context(){return Ze.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const oI=Ju,eg="wc",tg=2,rg="client",Qu=`${eg}@${tg}:${rg}:`,tu={name:rg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Ed="WALLETCONNECT_DEEPLINK_CHOICE",aI="proposal",ig="Proposal expired",cI="session",Bo=ve.SEVEN_DAYS,uI="engine",ms={wc_sessionPropose:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ve.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ve.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ve.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ve.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ve.THIRTY_SECONDS,prompt:!1,tag:1115}}},ru={min:ve.FIVE_MINUTES,max:ve.SEVEN_DAYS},Ei={idle:"IDLE",active:"ACTIVE"},hI="request",lI=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var fI=Object.defineProperty,dI=Object.defineProperties,pI=Object.getOwnPropertyDescriptors,Dd=Object.getOwnPropertySymbols,gI=Object.prototype.hasOwnProperty,yI=Object.prototype.propertyIsEnumerable,Sd=(i,e,t)=>e in i?fI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,mr=(i,e)=>{for(var t in e||(e={}))gI.call(e,t)&&Sd(i,t,e[t]);if(Dd)for(var t of Dd(e))yI.call(e,t)&&Sd(i,t,e[t]);return i},_s=(i,e)=>dI(i,pI(e));class vI extends JD{constructor(e){super(e),this.name=uI,this.events=new Ru,this.initialized=!1,this.ignoredPayloadTypes=[hn],this.requestQueue={state:Ei.idle,queue:[]},this.sessionRequestQueue={state:Ei.idle,queue:[]},this.requestQueueDelay=ve.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(ms)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const s=_s(mr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:d,sessionProperties:f,relays:y}=s;let g=o,m,D=!1;if(g&&(D=this.client.core.pairing.pairings.get(g).active),!g||!D){const{topic:$,uri:x}=await this.client.core.pairing.create();g=$,m=x}const I=await this.client.core.crypto.generateKeyPair(),A=mr({requiredNamespaces:c,optionalNamespaces:d,relays:y??[{protocol:Xp}],proposer:{publicKey:I,metadata:this.client.metadata}},f&&{sessionProperties:f}),{reject:P,resolve:H,done:B}=Un(ve.FIVE_MINUTES,ig);if(this.events.once(Ht("session_connect"),async({error:$,session:x})=>{if($)P($);else if(x){x.self.publicKey=I;const R=_s(mr({},x),{requiredNamespaces:x.requiredNamespaces,optionalNamespaces:x.optionalNamespaces});await this.client.session.set(x.topic,R),await this.setExpiry(x.topic,x.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:x.peer.metadata}),H(R)}}),!g){const{message:$}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error($)}const ne=await this.sendRequest({topic:g,method:"wc_sessionPropose",params:A}),L=Gr(ve.FIVE_MINUTES);return await this.setProposal(ne,mr({id:ne,expiry:L},A)),{uri:m,approval:B}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:d}=t,f=this.client.proposal.get(s);let{pairingTopic:y,proposer:g,requiredNamespaces:m,optionalNamespaces:D}=f;y=y||"",qn(m)||(m=E3(c,"approve()"));const I=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,P=await this.client.core.crypto.generateSharedKey(I,A);y&&s&&(await this.client.core.pairing.updateMetadata({topic:y,metadata:g.metadata}),await this.sendResult({id:s,topic:y,result:{relay:{protocol:o??"irn"},responderPublicKey:I}}),await this.client.proposal.delete(s,Lt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:y}));const H=mr({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:m,optionalNamespaces:D,pairingTopic:y,controller:{publicKey:I,metadata:this.client.metadata},expiry:Gr(Bo)},d&&{sessionProperties:d});await this.client.core.relayer.subscribe(P),await this.sendRequest({topic:P,method:"wc_sessionSettle",params:H,throwOnFailedPublish:!0});const B=_s(mr({},H),{topic:P,pairingTopic:y,acknowledged:!1,self:H.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:I});return await this.client.session.set(P,B),await this.setExpiry(P,Gr(Bo)),{topic:P,acknowledged:()=>new Promise(ne=>setTimeout(()=>ne(this.client.session.get(P)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:s,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Lt("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:s,namespaces:o}=t,c=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:d,resolve:f,reject:y}=Un();return this.events.once(Ht("session_update",c),({error:g})=>{g?y(g):f()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:d}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:s}=t,o=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:c,resolve:d,reject:f}=Un();return this.events.once(Ht("session_extend",o),({error:y})=>{y?f(y):d()}),await this.setExpiry(s,Gr(Bo)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:s,request:o,topic:c,expiry:d}=t,f=Vu(),{done:y,resolve:g,reject:m}=Un(d,"Request expired. Please try again.");return this.events.once(Ht("session_request",f),({error:D,result:I})=>{D?m(D):g(I)}),await Promise.all([new Promise(async D=>{await this.sendRequest({clientRpcId:f,topic:c,method:"wc_sessionRequest",params:{request:o,chainId:s},expiry:d,throwOnFailedPublish:!0}).catch(I=>m(I)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:f}),D()}),new Promise(async D=>{const I=await u3(this.client.core.storage,Ed);c3({id:f,topic:c,wcDeepLink:I}),D()}),y()]).then(D=>D[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:o}=t,{id:c}=o;Di(o)?await this.sendResult({id:c,topic:s,result:o.result,throwOnFailedPublish:!0}):Yr(o)&&await this.sendError(c,s,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:s}=t;if(this.client.session.keys.includes(s)){const o=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:c,resolve:d,reject:f}=Un();this.events.once(Ht("session_ping",o),({error:y})=>{y?f(y):d()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:s,event:o,chainId:c}=t;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:o,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:s}=t;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Lt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(s=>I3(s,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const s=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var d,f;return((d=c.peerMetadata)==null?void 0:d.url)&&((f=c.peerMetadata)==null?void 0:f.url)===t.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(t,s)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,Lt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),s||this.client.core.expirer.del(t),this.client.core.storage.removeItem(Ed).catch(c=>this.client.logger.warn(c))},this.deleteProposal=async(t,s)=>{await Promise.all([this.client.proposal.delete(t,Lt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,s),o?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),o&&(this.sessionRequestQueue.state=Ei.idle)},this.setExpiry=async(t,s)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:s}),this.client.core.expirer.set(t,s)},this.setProposal=async(t,s)=>{await this.client.proposal.set(t,s),this.client.core.expirer.set(t,s.expiry)},this.setPendingSessionRequest=async t=>{const s=ms.wc_sessionRequest.req.ttl,{id:o,topic:c,params:d,verifyContext:f}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:d,verifyContext:f}),s&&this.client.core.expirer.set(o,Gr(s))},this.sendRequest=async t=>{const{topic:s,method:o,params:c,expiry:d,relayRpcId:f,clientRpcId:y,throwOnFailedPublish:g}=t,m=Fn(o,c,y);if(Kn()&&lI.includes(o)){const A=jn(JSON.stringify(m));this.client.core.verify.register({attestationId:A})}const D=await this.client.core.crypto.encode(s,m),I=ms[o].req;return d&&(I.ttl=d),f&&(I.id=f),this.client.core.history.set(s,m),g?(I.internal=_s(mr({},I.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,D,I)):this.client.core.relayer.publish(s,D,I).catch(A=>this.client.logger.error(A)),m.id},this.sendResult=async t=>{const{id:s,topic:o,result:c,throwOnFailedPublish:d}=t,f=Wu(s,c),y=await this.client.core.crypto.encode(o,f),g=await this.client.core.history.get(o,s),m=ms[g.request.method].res;d?(m.internal=_s(mr({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,y,m)):this.client.core.relayer.publish(o,y,m).catch(D=>this.client.logger.error(D)),await this.client.core.history.resolve(f)},this.sendError=async(t,s,o)=>{const c=la(t,o),d=await this.client.core.crypto.encode(s,c),f=await this.client.core.history.get(s,t),y=ms[f.request.method].res;this.client.core.relayer.publish(s,d,y),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],s=[];this.client.session.getAll().forEach(o=>{Mi(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Mi(o.expiry)&&s.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Ei.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ei.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=Ei.idle},this.processRequest=t=>{const{topic:s,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:s,payload:o}=t,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:s}=t,{message:o}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(mr({},s.params));const d=Gr(ve.FIVE_MINUTES),f=mr({id:c,pairingTopic:t,expiry:d},o);await this.setProposal(c,f);const y=jn(JSON.stringify(s)),g=await this.getVerifyContext(y,f.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:f,verifyContext:g})}catch(d){await this.sendError(c,t,d),this.client.logger.error(d)}},this.onSessionProposeResponse=async(t,s)=>{const{id:o}=s;if(Di(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const d=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:d});const f=d.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:f});const y=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const g=await this.client.core.crypto.generateSharedKey(f,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const m=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:t})}else Yr(s)&&(await this.client.proposal.delete(o,Lt("USER_DISCONNECTED")),this.events.emit(Ht("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:d,controller:f,expiry:y,namespaces:g,requiredNamespaces:m,optionalNamespaces:D,sessionProperties:I,pairingTopic:A}=s.params,P=mr({topic:t,relay:d,expiry:y,namespaces:g,acknowledged:!0,pairingTopic:A,requiredNamespaces:m,optionalNamespaces:D,controller:f.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:f.publicKey,metadata:f.metadata}},I&&{sessionProperties:I});await this.sendResult({id:s.id,topic:t,result:!0}),this.events.emit(Ht("session_connect"),{session:P}),this.cleanupDuplicatePairings(P)}catch(d){await this.sendError(o,t,d),this.client.logger.error(d)}},this.onSessionSettleResponse=async(t,s)=>{const{id:o}=s;Di(s)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ht("session_approve",o),{})):Yr(s)&&(await this.client.session.delete(t,Lt("USER_DISCONNECTED")),this.events.emit(Ht("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(t,s)=>{const{params:o,id:c}=s;try{const d=`${t}_session_update`,f=Fo.get(d);if(f&&this.isRequestOutOfSync(f,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(mr({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:o}),Fo.set(d,c)}catch(d){await this.sendError(c,t,d),this.client.logger.error(d)}},this.isRequestOutOfSync=(t,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ht("session_update",o),{}):Yr(s)&&this.events.emit(Ht("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(t,s)=>{const{id:o}=s;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Gr(Bo)),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ht("session_extend",o),{}):Yr(s)&&this.events.emit(Ht("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(t,s)=>{const{id:o}=s;try{this.isValidPing({topic:t}),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,s)=>{const{id:o}=s;setTimeout(()=>{Di(s)?this.events.emit(Ht("session_ping",o),{}):Yr(s)&&this.events.emit(Ht("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(t,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(tr.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult({id:o,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(mr({topic:t},c));const d=jn(JSON.stringify(Fn("wc_sessionRequest",c,o))),f=this.client.session.get(t),y=await this.getVerifyContext(d,f.peer.metadata),g={id:o,topic:t,params:c,verifyContext:y};await this.setPendingSessionRequest(g),this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue()}catch(d){await this.sendError(o,t,d),this.client.logger.error(d)}},this.onSessionRequestResponse=(t,s)=>{const{id:o}=s;Di(s)?this.events.emit(Ht("session_request",o),{result:s.result}):Yr(s)&&this.events.emit(Ht("session_request",o),{error:s.error})},this.onSessionEventRequest=async(t,s)=>{const{id:o,params:c}=s;try{const d=`${t}_session_event_${c.event.name}`,f=Fo.get(d);if(f&&this.isRequestOutOfSync(f,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(mr({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c}),Fo.set(d,o)}catch(d){await this.sendError(o,t,d),this.client.logger.error(d)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ei.idle,this.processSessionRequestQueue()},ve.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Ei.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ei.active,this.client.events.emit("session_request",t)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=t=>{if(t.active)return;const s=this.client.proposal.getAll().find(o=>o.pairingTopic===t.topic);s&&this.onSessionProposeRequest(t.topic,Fn("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async t=>{if(!wr(t)){const{message:y}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:d,relays:f}=t;if(ur(s)||await this.isValidPairingTopic(s),!M3(f,!0)){const{message:y}=ue("MISSING_OR_INVALID",`connect() relays: ${f}`);throw new Error(y)}!ur(o)&&qn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ur(c)&&qn(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ur(d)||this.validateSessionProps(d,"sessionProperties")},this.validateNamespaces=(t,s)=>{const o=$3(t,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!wr(t))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:d}=t;await this.isValidProposalId(s);const f=this.client.proposal.get(s),y=Go(o,"approve()");if(y)throw new Error(y.message);const g=Nf(f.requiredNamespaces,o,"approve()");if(g)throw new Error(g.message);if(!Gt(c,!0)){const{message:m}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(m)}ur(d)||this.validateSessionProps(d,"sessionProperties")},this.isValidReject=async t=>{if(!wr(t)){const{message:c}=ue("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:s,reason:o}=t;if(await this.isValidProposalId(s),!q3(o)){const{message:c}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!wr(t)){const{message:g}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}const{relay:s,controller:o,namespaces:c,expiry:d}=t;if(!Dp(s)){const{message:g}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const f=A3(o,"onSessionSettleRequest()");if(f)throw new Error(f.message);const y=Go(c,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(Mi(d)){const{message:g}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async t=>{if(!wr(t)){const{message:y}=ue("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:s,namespaces:o}=t;await this.isValidSessionTopic(s);const c=this.client.session.get(s),d=Go(o,"update()");if(d)throw new Error(d.message);const f=Nf(c.requiredNamespaces,o,"update()");if(f)throw new Error(f.message)},this.isValidExtend=async t=>{if(!wr(t)){const{message:o}=ue("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionTopic(s)},this.isValidRequest=async t=>{if(!wr(t)){const{message:y}=ue("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:s,request:o,chainId:c,expiry:d}=t;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!Rf(f,c)){const{message:y}=ue("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(y)}if(!F3(o)){const{message:y}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(y)}if(!B3(f,c,o.method)){const{message:y}=ue("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(y)}if(d&&!W3(d,ru)){const{message:y}=ue("MISSING_OR_INVALID",`request() expiry: ${d}. Expiry must be a number (in seconds) between ${ru.min} and ${ru.max}`);throw new Error(y)}},this.isValidRespond=async t=>{if(!wr(t)){const{message:c}=ue("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:o}=t;if(await this.isValidSessionTopic(s),!z3(o)){const{message:c}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!wr(t)){const{message:o}=ue("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async t=>{if(!wr(t)){const{message:f}=ue("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(f)}const{topic:s,event:o,chainId:c}=t;await this.isValidSessionTopic(s);const{namespaces:d}=this.client.session.get(s);if(!Rf(d,c)){const{message:f}=ue("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(f)}if(!H3(o)){const{message:f}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}if(!K3(d,c,o.name)){const{message:f}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(f)}},this.isValidDisconnect=async t=>{if(!wr(t)){const{message:o}=ue("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:s}=t;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(t,s)=>{const o={verified:{verifyUrl:s.verifyUrl||$n,validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c.origin,o.verified.isScam=c.isScam,o.verified.validation=c.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,s)=>{Object.values(t).forEach(o=>{if(!Gt(o,!1)){const{message:c}=ue("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(tr.message,async e=>{const{topic:t,message:s}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(t,s);try{Gu(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):fa(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(Fr.expired,async e=>{const{topic:t,id:s}=bp(e.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,ue("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(Es.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Gt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Mi(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ue("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gt(e,!1)){const{message:t}=ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Mi(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ue("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gt(e,!1)){const{message:t}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!j3(e)){const{message:t}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Mi(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ue("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class mI extends pa{constructor(e,t){super(e,t,aI,Qu),this.core=e,this.logger=t}}class _I extends pa{constructor(e,t){super(e,t,cI,Qu),this.core=e,this.logger=t}}class wI extends pa{constructor(e,t){super(e,t,hI,Qu,s=>s.id),this.core=e,this.logger=t}}let bI=class ng extends YD{constructor(e){super(e),this.protocol=eg,this.version=tg,this.name=tu.name,this.events=new Cr.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||tu.name,this.metadata=(e==null?void 0:e.metadata)||t3();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||tu.logger}));this.core=(e==null?void 0:e.core)||new oI(e),this.logger=Ze.generateChildLogger(t,this.name),this.session=new _I(this.core,this.logger),this.proposal=new mI(this.core,this.logger),this.pendingRequest=new wI(this.core,this.logger),this.engine=new vI(this)}static async init(e){const t=new ng(e);return await t.initialize(),t}get context(){return Ze.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Iu={exports:{}};(function(i,e){var t=typeof self<"u"?self:Jr,s=function(){function c(){this.fetch=!1,this.DOMException=t.DOMException}return c.prototype=t,new c}();(function(c){(function(d){var f={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function y(b){return b&&DataView.prototype.isPrototypeOf(b)}if(f.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(b){return b&&g.indexOf(Object.prototype.toString.call(b))>-1};function D(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function I(b){return typeof b!="string"&&(b=String(b)),b}function A(b){var C={next:function(){var ee=b.shift();return{done:ee===void 0,value:ee}}};return f.iterable&&(C[Symbol.iterator]=function(){return C}),C}function P(b){this.map={},b instanceof P?b.forEach(function(C,ee){this.append(ee,C)},this):Array.isArray(b)?b.forEach(function(C){this.append(C[0],C[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(C){this.append(C,b[C])},this)}P.prototype.append=function(b,C){b=D(b),C=I(C);var ee=this.map[b];this.map[b]=ee?ee+", "+C:C},P.prototype.delete=function(b){delete this.map[D(b)]},P.prototype.get=function(b){return b=D(b),this.has(b)?this.map[b]:null},P.prototype.has=function(b){return this.map.hasOwnProperty(D(b))},P.prototype.set=function(b,C){this.map[D(b)]=I(C)},P.prototype.forEach=function(b,C){for(var ee in this.map)this.map.hasOwnProperty(ee)&&b.call(C,this.map[ee],ee,this)},P.prototype.keys=function(){var b=[];return this.forEach(function(C,ee){b.push(ee)}),A(b)},P.prototype.values=function(){var b=[];return this.forEach(function(C){b.push(C)}),A(b)},P.prototype.entries=function(){var b=[];return this.forEach(function(C,ee){b.push([ee,C])}),A(b)},f.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function H(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function B(b){return new Promise(function(C,ee){b.onload=function(){C(b.result)},b.onerror=function(){ee(b.error)}})}function ne(b){var C=new FileReader,ee=B(C);return C.readAsArrayBuffer(b),ee}function L(b){var C=new FileReader,ee=B(C);return C.readAsText(b),ee}function $(b){for(var C=new Uint8Array(b),ee=new Array(C.length),Q=0;Q<C.length;Q++)ee[Q]=String.fromCharCode(C[Q]);return ee.join("")}function x(b){if(b.slice)return b.slice(0);var C=new Uint8Array(b.byteLength);return C.set(new Uint8Array(b)),C.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(b){this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:f.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:f.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:f.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():f.arrayBuffer&&f.blob&&y(b)?(this._bodyArrayBuffer=x(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||m(b))?this._bodyArrayBuffer=x(b):this._bodyText=b=Object.prototype.toString.call(b):this._bodyText="",this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var b=H(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?H(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ne)}),this.text=function(){var b=H(this);if(b)return b;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(b){var C=b.toUpperCase();return E.indexOf(C)>-1?C:b}function w(b,C){C=C||{};var ee=C.body;if(b instanceof w){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,C.headers||(this.headers=new P(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!ee&&b._bodyInit!=null&&(ee=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new P(C.headers)),this.method=u(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ee)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ee)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function W(b){var C=new FormData;return b.trim().split("&").forEach(function(ee){if(ee){var Q=ee.split("="),k=Q.shift().replace(/\+/g," "),V=Q.join("=").replace(/\+/g," ");C.append(decodeURIComponent(k),decodeURIComponent(V))}}),C}function G(b){var C=new P,ee=b.replace(/\r?\n[\t ]+/g," ");return ee.split(/\r?\n/).forEach(function(Q){var k=Q.split(":"),V=k.shift().trim();if(V){var J=k.join(":").trim();C.append(V,J)}}),C}R.call(w.prototype);function se(b,C){C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"OK",this.headers=new P(C.headers),this.url=C.url||"",this._initBody(b)}R.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},se.error=function(){var b=new se(null,{status:0,statusText:""});return b.type="error",b};var ce=[301,302,303,307,308];se.redirect=function(b,C){if(ce.indexOf(C)===-1)throw new RangeError("Invalid status code");return new se(null,{status:C,headers:{location:b}})},d.DOMException=c.DOMException;try{new d.DOMException}catch{d.DOMException=function(C,ee){this.message=C,this.name=ee;var Q=Error(C);this.stack=Q.stack},d.DOMException.prototype=Object.create(Error.prototype),d.DOMException.prototype.constructor=d.DOMException}function de(b,C){return new Promise(function(ee,Q){var k=new w(b,C);if(k.signal&&k.signal.aborted)return Q(new d.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function J(){V.abort()}V.onload=function(){var re={status:V.status,statusText:V.statusText,headers:G(V.getAllResponseHeaders()||"")};re.url="responseURL"in V?V.responseURL:re.headers.get("X-Request-URL");var we="response"in V?V.response:V.responseText;ee(new se(we,re))},V.onerror=function(){Q(new TypeError("Network request failed"))},V.ontimeout=function(){Q(new TypeError("Network request failed"))},V.onabort=function(){Q(new d.DOMException("Aborted","AbortError"))},V.open(k.method,k.url,!0),k.credentials==="include"?V.withCredentials=!0:k.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&f.blob&&(V.responseType="blob"),k.headers.forEach(function(re,we){V.setRequestHeader(we,re)}),k.signal&&(k.signal.addEventListener("abort",J),V.onreadystatechange=function(){V.readyState===4&&k.signal.removeEventListener("abort",J)}),V.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return de.polyfill=!0,c.fetch||(c.fetch=de,c.Headers=P,c.Request=w,c.Response=se),d.Headers=P,d.Request=w,d.Response=se,d.fetch=de,Object.defineProperty(d,"__esModule",{value:!0}),d})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;e=o.fetch,e.default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,i.exports=e})(Iu,Iu.exports);var EI=Iu.exports;const Id=Cu(EI),DI={Accept:"application/json","Content-Type":"application/json"},SI="POST",xd={headers:DI,method:SI},Od=10;class zi{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Cr.EventEmitter,this.isAvailable=!1,this.registering=!1,!ed(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,t){this.isAvailable||await this.register();try{const s=cn(e),c=await(await Id(this.url,Object.assign(Object.assign({},xd),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(e.id,s)}}async register(e=this.url){if(!ed(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=cn({id:1,jsonrpc:"2.0",method:"test",params:[]});await Id(e,Object.assign(Object.assign({},xd),{body:t}))}this.onOpen()}catch(t){const s=this.parseError(t);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ns(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),o=s.message||s.toString(),c=la(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return Up(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Od&&this.events.setMaxListeners(Od)}}const Pd="error",II="wss://relay.walletconnect.com",xI="wc",OI="universal_provider",Cd=`${xI}@2:${OI}:`,PI="https://rpc.walletconnect.com/v1/",Ii={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(i,e){(function(){var t,s="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",f="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",g=500,m="__lodash_placeholder__",D=1,I=2,A=4,P=1,H=2,B=1,ne=2,L=4,$=8,x=16,R=32,E=64,u=128,w=256,W=512,G=30,se="...",ce=800,de=16,b=1,C=2,ee=3,Q=1/0,k=9007199254740991,V=17976931348623157e292,J=NaN,re=4294967295,we=re-1,oe=re>>>1,be=[["ary",u],["bind",B],["bindKey",ne],["curry",$],["curryRight",x],["flip",W],["partial",R],["partialRight",E],["rearg",w]],le="[object Arguments]",me="[object Array]",z="[object AsyncFunction]",F="[object Boolean]",U="[object Date]",l="[object DOMException]",T="[object Error]",ae="[object Function]",fe="[object GeneratorFunction]",Ie="[object Map]",He="[object Number]",ke="[object Null]",Me="[object Object]",gt="[object Promise]",yt="[object Proxy]",qe="[object RegExp]",xe="[object Set]",Ne="[object String]",Le="[object Symbol]",Fe="[object Undefined]",Pe="[object WeakMap]",Ue="[object WeakSet]",Se="[object ArrayBuffer]",Ce="[object DataView]",Be="[object Float32Array]",Oe="[object Float64Array]",Ve="[object Int8Array]",Ge="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",Je="[object Uint8ClampedArray]",rr="[object Uint16Array]",fr="[object Uint32Array]",Qr=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,ai=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xi=/&(?:amp|lt|gt|quot|#39);/g,Hi=/[&<>"']/g,Dt=RegExp(xi.source),vt=RegExp(Hi.source),St=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,bt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ut=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xt=/[\\^$.*+?()[\]{}|]/g,Mt=RegExp(xt.source),Ot=/^\s+/,At=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ga=/[()=,{}\[\]\/\s]/,ya=/\\(\\)?/g,va=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tr=/\w*$/,ma=/^[-+]0x[0-9a-f]+$/i,_a=/^0b[01]+$/i,wa=/^\[object .+?Constructor\]$/,ba=/^0o[0-7]+$/i,Ea=/^(?:0|[1-9]\d*)$/,ci=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pn=/($^)/,Da=/['\n\r\u2028\u2029\\]/g,gn="\\ud800-\\udfff",Sa="\\u0300-\\u036f",Ia="\\ufe20-\\ufe2f",yn="\\u20d0-\\u20ff",Us=Sa+Ia+yn,$s="\\u2700-\\u27bf",zr="a-z\\xdf-\\xf6\\xf8-\\xff",xa="\\xac\\xb1\\xd7\\xf7",Oa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pa="\\u2000-\\u206f",Ca=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ms="A-Z\\xc0-\\xd6\\xd8-\\xde",js="\\ufe0e\\ufe0f",Bi=xa+Oa+Pa+Ca,Wn="['â€™]",Ki="["+gn+"]",Gn="["+Bi+"]",ki="["+Us+"]",qs="\\d+",Aa="["+$s+"]",Fs="["+zr+"]",zs="[^"+gn+Bi+qs+$s+zr+Ms+"]",vn="\\ud83c[\\udffb-\\udfff]",Ta="(?:"+ki+"|"+vn+")",Hs="[^"+gn+"]",mn="(?:\\ud83c[\\udde6-\\uddff]){2}",Oi="[\\ud800-\\udbff][\\udc00-\\udfff]",Er="["+Ms+"]",Bs="\\u200d",Ks="(?:"+Fs+"|"+zs+")",Xr="(?:"+Er+"|"+zs+")",ks="(?:"+Wn+"(?:d|ll|m|re|s|t|ve))?",Vs="(?:"+Wn+"(?:D|LL|M|RE|S|T|VE))?",Ws=Ta+"?",Gs="["+js+"]?",Ra="(?:"+Bs+"(?:"+[Hs,mn,Oi].join("|")+")"+Gs+Ws+")*",ui="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ys="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Js=Gs+Ws+Ra,_n="(?:"+[Aa,mn,Oi].join("|")+")"+Js,Na="(?:"+[Hs+ki+"?",ki,mn,Oi,Ki].join("|")+")",Yn=RegExp(Wn,"g"),La=RegExp(ki,"g"),wn=RegExp(vn+"(?="+vn+")|"+Na+Js,"g"),Qs=RegExp([Er+"?"+Fs+"+"+ks+"(?="+[Gn,Er,"$"].join("|")+")",Xr+"+"+Vs+"(?="+[Gn,Er+Ks,"$"].join("|")+")",Er+"?"+Ks+"+"+ks,Er+"+"+Vs,Ys,ui,qs,_n].join("|"),"g"),Xs=RegExp("["+Bs+gn+Us+js+"]"),Vi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ua=-1,at={};at[Be]=at[Oe]=at[Ve]=at[Ge]=at[et]=at[tt]=at[Je]=at[rr]=at[fr]=!0,at[le]=at[me]=at[Se]=at[F]=at[Ce]=at[U]=at[T]=at[ae]=at[Ie]=at[He]=at[Me]=at[qe]=at[xe]=at[Ne]=at[Pe]=!1;var st={};st[le]=st[me]=st[Se]=st[Ce]=st[F]=st[U]=st[Be]=st[Oe]=st[Ve]=st[Ge]=st[et]=st[Ie]=st[He]=st[Me]=st[qe]=st[xe]=st[Ne]=st[Le]=st[tt]=st[Je]=st[rr]=st[fr]=!0,st[T]=st[ae]=st[Pe]=!1;var S={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"s"},M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},te={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,Te=parseInt,dt=typeof ws=="object"&&ws&&ws.Object===Object&&ws,Ft=typeof self=="object"&&self&&self.Object===Object&&self,Qe=dt||Ft||Function("return this")(),ut=e&&!e.nodeType&&e,Tt=ut&&!0&&i&&!i.nodeType&&i,dr=Tt&&Tt.exports===ut,zt=dr&&dt.process,pt=function(){try{var j=Tt&&Tt.require&&Tt.require("util").types;return j||zt&&zt.binding&&zt.binding("util")}catch{}}(),nr=pt&&pt.isArrayBuffer,Hr=pt&&pt.isDate,Rr=pt&&pt.isMap,Zr=pt&&pt.isRegExp,Jn=pt&&pt.isSet,Wi=pt&&pt.isTypedArray;function kt(j,Y,K){switch(K.length){case 0:return j.call(Y);case 1:return j.call(Y,K[0]);case 2:return j.call(Y,K[0],K[1]);case 3:return j.call(Y,K[0],K[1],K[2])}return j.apply(Y,K)}function ag(j,Y,K,ge){for(var Ae=-1,rt=j==null?0:j.length;++Ae<rt;){var Bt=j[Ae];Y(ge,Bt,K(Bt),j)}return ge}function Nr(j,Y){for(var K=-1,ge=j==null?0:j.length;++K<ge&&Y(j[K],K,j)!==!1;);return j}function cg(j,Y){for(var K=j==null?0:j.length;K--&&Y(j[K],K,j)!==!1;);return j}function eh(j,Y){for(var K=-1,ge=j==null?0:j.length;++K<ge;)if(!Y(j[K],K,j))return!1;return!0}function Pi(j,Y){for(var K=-1,ge=j==null?0:j.length,Ae=0,rt=[];++K<ge;){var Bt=j[K];Y(Bt,K,j)&&(rt[Ae++]=Bt)}return rt}function eo(j,Y){var K=j==null?0:j.length;return!!K&&bn(j,Y,0)>-1}function $a(j,Y,K){for(var ge=-1,Ae=j==null?0:j.length;++ge<Ae;)if(K(Y,j[ge]))return!0;return!1}function _t(j,Y){for(var K=-1,ge=j==null?0:j.length,Ae=Array(ge);++K<ge;)Ae[K]=Y(j[K],K,j);return Ae}function Ci(j,Y){for(var K=-1,ge=Y.length,Ae=j.length;++K<ge;)j[Ae+K]=Y[K];return j}function Ma(j,Y,K,ge){var Ae=-1,rt=j==null?0:j.length;for(ge&&rt&&(K=j[++Ae]);++Ae<rt;)K=Y(K,j[Ae],Ae,j);return K}function ug(j,Y,K,ge){var Ae=j==null?0:j.length;for(ge&&Ae&&(K=j[--Ae]);Ae--;)K=Y(K,j[Ae],Ae,j);return K}function ja(j,Y){for(var K=-1,ge=j==null?0:j.length;++K<ge;)if(Y(j[K],K,j))return!0;return!1}var hg=qa("length");function lg(j){return j.split("")}function fg(j){return j.match(qt)||[]}function th(j,Y,K){var ge;return K(j,function(Ae,rt,Bt){if(Y(Ae,rt,Bt))return ge=rt,!1}),ge}function to(j,Y,K,ge){for(var Ae=j.length,rt=K+(ge?1:-1);ge?rt--:++rt<Ae;)if(Y(j[rt],rt,j))return rt;return-1}function bn(j,Y,K){return Y===Y?Sg(j,Y,K):to(j,rh,K)}function dg(j,Y,K,ge){for(var Ae=K-1,rt=j.length;++Ae<rt;)if(ge(j[Ae],Y))return Ae;return-1}function rh(j){return j!==j}function ih(j,Y){var K=j==null?0:j.length;return K?za(j,Y)/K:J}function qa(j){return function(Y){return Y==null?t:Y[j]}}function Fa(j){return function(Y){return j==null?t:j[Y]}}function nh(j,Y,K,ge,Ae){return Ae(j,function(rt,Bt,ht){K=ge?(ge=!1,rt):Y(K,rt,Bt,ht)}),K}function pg(j,Y){var K=j.length;for(j.sort(Y);K--;)j[K]=j[K].value;return j}function za(j,Y){for(var K,ge=-1,Ae=j.length;++ge<Ae;){var rt=Y(j[ge]);rt!==t&&(K=K===t?rt:K+rt)}return K}function Ha(j,Y){for(var K=-1,ge=Array(j);++K<j;)ge[K]=Y(K);return ge}function gg(j,Y){return _t(Y,function(K){return[K,j[K]]})}function sh(j){return j&&j.slice(0,uh(j)+1).replace(Ot,"")}function Dr(j){return function(Y){return j(Y)}}function Ba(j,Y){return _t(Y,function(K){return j[K]})}function Qn(j,Y){return j.has(Y)}function oh(j,Y){for(var K=-1,ge=j.length;++K<ge&&bn(Y,j[K],0)>-1;);return K}function ah(j,Y){for(var K=j.length;K--&&bn(Y,j[K],0)>-1;);return K}function yg(j,Y){for(var K=j.length,ge=0;K--;)j[K]===Y&&++ge;return ge}var vg=Fa(S),mg=Fa(M);function _g(j){return"\\"+pe[j]}function wg(j,Y){return j==null?t:j[Y]}function En(j){return Xs.test(j)}function bg(j){return Vi.test(j)}function Eg(j){for(var Y,K=[];!(Y=j.next()).done;)K.push(Y.value);return K}function Ka(j){var Y=-1,K=Array(j.size);return j.forEach(function(ge,Ae){K[++Y]=[Ae,ge]}),K}function ch(j,Y){return function(K){return j(Y(K))}}function Ai(j,Y){for(var K=-1,ge=j.length,Ae=0,rt=[];++K<ge;){var Bt=j[K];(Bt===Y||Bt===m)&&(j[K]=m,rt[Ae++]=K)}return rt}function ro(j){var Y=-1,K=Array(j.size);return j.forEach(function(ge){K[++Y]=ge}),K}function Dg(j){var Y=-1,K=Array(j.size);return j.forEach(function(ge){K[++Y]=[ge,ge]}),K}function Sg(j,Y,K){for(var ge=K-1,Ae=j.length;++ge<Ae;)if(j[ge]===Y)return ge;return-1}function Ig(j,Y,K){for(var ge=K+1;ge--;)if(j[ge]===Y)return ge;return ge}function Dn(j){return En(j)?Og(j):hg(j)}function Br(j){return En(j)?Pg(j):lg(j)}function uh(j){for(var Y=j.length;Y--&&At.test(j.charAt(Y)););return Y}var xg=Fa(te);function Og(j){for(var Y=wn.lastIndex=0;wn.test(j);)++Y;return Y}function Pg(j){return j.match(wn)||[]}function Cg(j){return j.match(Qs)||[]}var Ag=function j(Y){Y=Y==null?Qe:Sn.defaults(Qe.Object(),Y,Sn.pick(Qe,Zs));var K=Y.Array,ge=Y.Date,Ae=Y.Error,rt=Y.Function,Bt=Y.Math,ht=Y.Object,ka=Y.RegExp,Tg=Y.String,Lr=Y.TypeError,io=K.prototype,Rg=rt.prototype,In=ht.prototype,no=Y["__core-js_shared__"],so=Rg.toString,nt=In.hasOwnProperty,Ng=0,hh=function(){var r=/[^.]+$/.exec(no&&no.keys&&no.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),oo=In.toString,Lg=so.call(ht),Ug=Qe._,$g=ka("^"+so.call(nt).replace(xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ao=dr?Y.Buffer:t,Ti=Y.Symbol,co=Y.Uint8Array,lh=ao?ao.allocUnsafe:t,uo=ch(ht.getPrototypeOf,ht),fh=ht.create,dh=In.propertyIsEnumerable,ho=io.splice,ph=Ti?Ti.isConcatSpreadable:t,Xn=Ti?Ti.iterator:t,Gi=Ti?Ti.toStringTag:t,lo=function(){try{var r=Zi(ht,"defineProperty");return r({},"",{}),r}catch{}}(),Mg=Y.clearTimeout!==Qe.clearTimeout&&Y.clearTimeout,jg=ge&&ge.now!==Qe.Date.now&&ge.now,qg=Y.setTimeout!==Qe.setTimeout&&Y.setTimeout,fo=Bt.ceil,po=Bt.floor,Va=ht.getOwnPropertySymbols,Fg=ao?ao.isBuffer:t,gh=Y.isFinite,zg=io.join,Hg=ch(ht.keys,ht),Kt=Bt.max,Xt=Bt.min,Bg=ge.now,Kg=Y.parseInt,yh=Bt.random,kg=io.reverse,Wa=Zi(Y,"DataView"),Zn=Zi(Y,"Map"),Ga=Zi(Y,"Promise"),xn=Zi(Y,"Set"),es=Zi(Y,"WeakMap"),ts=Zi(ht,"create"),go=es&&new es,On={},Vg=en(Wa),Wg=en(Zn),Gg=en(Ga),Yg=en(xn),Jg=en(es),yo=Ti?Ti.prototype:t,rs=yo?yo.valueOf:t,vh=yo?yo.toString:t;function v(r){if(Ct(r)&&!Re(r)&&!(r instanceof Ye)){if(r instanceof Ur)return r;if(nt.call(r,"__wrapped__"))return ml(r)}return new Ur(r)}var Pn=function(){function r(){}return function(n){if(!Et(n))return{};if(fh)return fh(n);r.prototype=n;var a=new r;return r.prototype=t,a}}();function vo(){}function Ur(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}v.templateSettings={escape:St,evaluate:It,interpolate:bt,variable:"",imports:{_:v}},v.prototype=vo.prototype,v.prototype.constructor=v,Ur.prototype=Pn(vo.prototype),Ur.prototype.constructor=Ur;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function Qg(){var r=new Ye(this.__wrapped__);return r.__actions__=pr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=pr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=pr(this.__views__),r}function Xg(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function Zg(){var r=this.__wrapped__.value(),n=this.__dir__,a=Re(r),h=n<0,p=a?r.length:0,_=ly(0,p,this.__views__),O=_.start,N=_.end,q=N-O,X=h?N:O-1,Z=this.__iteratees__,ie=Z.length,he=0,ye=Xt(q,this.__takeCount__);if(!a||!h&&p==q&&ye==q)return zh(r,this.__actions__);var Ee=[];e:for(;q--&&he<ye;){X+=n;for(var ze=-1,De=r[X];++ze<ie;){var We=Z[ze],Xe=We.iteratee,xr=We.type,ar=Xe(De);if(xr==C)De=ar;else if(!ar){if(xr==b)continue e;break e}}Ee[he++]=De}return Ee}Ye.prototype=Pn(vo.prototype),Ye.prototype.constructor=Ye;function Yi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function e0(){this.__data__=ts?ts(null):{},this.size=0}function t0(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n}function r0(r){var n=this.__data__;if(ts){var a=n[r];return a===y?t:a}return nt.call(n,r)?n[r]:t}function i0(r){var n=this.__data__;return ts?n[r]!==t:nt.call(n,r)}function n0(r,n){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=ts&&n===t?y:n,this}Yi.prototype.clear=e0,Yi.prototype.delete=t0,Yi.prototype.get=r0,Yi.prototype.has=i0,Yi.prototype.set=n0;function hi(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function s0(){this.__data__=[],this.size=0}function o0(r){var n=this.__data__,a=mo(n,r);if(a<0)return!1;var h=n.length-1;return a==h?n.pop():ho.call(n,a,1),--this.size,!0}function a0(r){var n=this.__data__,a=mo(n,r);return a<0?t:n[a][1]}function c0(r){return mo(this.__data__,r)>-1}function u0(r,n){var a=this.__data__,h=mo(a,r);return h<0?(++this.size,a.push([r,n])):a[h][1]=n,this}hi.prototype.clear=s0,hi.prototype.delete=o0,hi.prototype.get=a0,hi.prototype.has=c0,hi.prototype.set=u0;function li(r){var n=-1,a=r==null?0:r.length;for(this.clear();++n<a;){var h=r[n];this.set(h[0],h[1])}}function h0(){this.size=0,this.__data__={hash:new Yi,map:new(Zn||hi),string:new Yi}}function l0(r){var n=Ao(this,r).delete(r);return this.size-=n?1:0,n}function f0(r){return Ao(this,r).get(r)}function d0(r){return Ao(this,r).has(r)}function p0(r,n){var a=Ao(this,r),h=a.size;return a.set(r,n),this.size+=a.size==h?0:1,this}li.prototype.clear=h0,li.prototype.delete=l0,li.prototype.get=f0,li.prototype.has=d0,li.prototype.set=p0;function Ji(r){var n=-1,a=r==null?0:r.length;for(this.__data__=new li;++n<a;)this.add(r[n])}function g0(r){return this.__data__.set(r,y),this}function y0(r){return this.__data__.has(r)}Ji.prototype.add=Ji.prototype.push=g0,Ji.prototype.has=y0;function Kr(r){var n=this.__data__=new hi(r);this.size=n.size}function v0(){this.__data__=new hi,this.size=0}function m0(r){var n=this.__data__,a=n.delete(r);return this.size=n.size,a}function _0(r){return this.__data__.get(r)}function w0(r){return this.__data__.has(r)}function b0(r,n){var a=this.__data__;if(a instanceof hi){var h=a.__data__;if(!Zn||h.length<o-1)return h.push([r,n]),this.size=++a.size,this;a=this.__data__=new li(h)}return a.set(r,n),this.size=a.size,this}Kr.prototype.clear=v0,Kr.prototype.delete=m0,Kr.prototype.get=_0,Kr.prototype.has=w0,Kr.prototype.set=b0;function mh(r,n){var a=Re(r),h=!a&&tn(r),p=!a&&!h&&$i(r),_=!a&&!h&&!p&&Rn(r),O=a||h||p||_,N=O?Ha(r.length,Tg):[],q=N.length;for(var X in r)(n||nt.call(r,X))&&!(O&&(X=="length"||p&&(X=="offset"||X=="parent")||_&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||gi(X,q)))&&N.push(X);return N}function _h(r){var n=r.length;return n?r[sc(0,n-1)]:t}function E0(r,n){return To(pr(r),Qi(n,0,r.length))}function D0(r){return To(pr(r))}function Ya(r,n,a){(a!==t&&!kr(r[n],a)||a===t&&!(n in r))&&fi(r,n,a)}function is(r,n,a){var h=r[n];(!(nt.call(r,n)&&kr(h,a))||a===t&&!(n in r))&&fi(r,n,a)}function mo(r,n){for(var a=r.length;a--;)if(kr(r[a][0],n))return a;return-1}function S0(r,n,a,h){return Ri(r,function(p,_,O){n(h,p,a(p),O)}),h}function wh(r,n){return r&&ti(n,Vt(n),r)}function I0(r,n){return r&&ti(n,yr(n),r)}function fi(r,n,a){n=="__proto__"&&lo?lo(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}function Ja(r,n){for(var a=-1,h=n.length,p=K(h),_=r==null;++a<h;)p[a]=_?t:Ac(r,n[a]);return p}function Qi(r,n,a){return r===r&&(a!==t&&(r=r<=a?r:a),n!==t&&(r=r>=n?r:n)),r}function $r(r,n,a,h,p,_){var O,N=n&D,q=n&I,X=n&A;if(a&&(O=p?a(r,h,p,_):a(r)),O!==t)return O;if(!Et(r))return r;var Z=Re(r);if(Z){if(O=dy(r),!N)return pr(r,O)}else{var ie=Zt(r),he=ie==ae||ie==fe;if($i(r))return Kh(r,N);if(ie==Me||ie==le||he&&!p){if(O=q||he?{}:ul(r),!N)return q?ry(r,I0(O,r)):ty(r,wh(O,r))}else{if(!st[ie])return p?r:{};O=py(r,ie,N)}}_||(_=new Kr);var ye=_.get(r);if(ye)return ye;_.set(r,O),jl(r)?r.forEach(function(De){O.add($r(De,n,a,De,r,_))}):$l(r)&&r.forEach(function(De,We){O.set(We,$r(De,n,a,We,r,_))});var Ee=X?q?yc:gc:q?yr:Vt,ze=Z?t:Ee(r);return Nr(ze||r,function(De,We){ze&&(We=De,De=r[We]),is(O,We,$r(De,n,a,We,r,_))}),O}function x0(r){var n=Vt(r);return function(a){return bh(a,r,n)}}function bh(r,n,a){var h=a.length;if(r==null)return!h;for(r=ht(r);h--;){var p=a[h],_=n[p],O=r[p];if(O===t&&!(p in r)||!_(O))return!1}return!0}function Eh(r,n,a){if(typeof r!="function")throw new Lr(d);return hs(function(){r.apply(t,a)},n)}function ns(r,n,a,h){var p=-1,_=eo,O=!0,N=r.length,q=[],X=n.length;if(!N)return q;a&&(n=_t(n,Dr(a))),h?(_=$a,O=!1):n.length>=o&&(_=Qn,O=!1,n=new Ji(n));e:for(;++p<N;){var Z=r[p],ie=a==null?Z:a(Z);if(Z=h||Z!==0?Z:0,O&&ie===ie){for(var he=X;he--;)if(n[he]===ie)continue e;q.push(Z)}else _(n,ie,h)||q.push(Z)}return q}var Ri=Yh(ei),Dh=Yh(Xa,!0);function O0(r,n){var a=!0;return Ri(r,function(h,p,_){return a=!!n(h,p,_),a}),a}function _o(r,n,a){for(var h=-1,p=r.length;++h<p;){var _=r[h],O=n(_);if(O!=null&&(N===t?O===O&&!Ir(O):a(O,N)))var N=O,q=_}return q}function P0(r,n,a,h){var p=r.length;for(a=je(a),a<0&&(a=-a>p?0:p+a),h=h===t||h>p?p:je(h),h<0&&(h+=p),h=a>h?0:Fl(h);a<h;)r[a++]=n;return r}function Sh(r,n){var a=[];return Ri(r,function(h,p,_){n(h,p,_)&&a.push(h)}),a}function Yt(r,n,a,h,p){var _=-1,O=r.length;for(a||(a=yy),p||(p=[]);++_<O;){var N=r[_];n>0&&a(N)?n>1?Yt(N,n-1,a,h,p):Ci(p,N):h||(p[p.length]=N)}return p}var Qa=Jh(),Ih=Jh(!0);function ei(r,n){return r&&Qa(r,n,Vt)}function Xa(r,n){return r&&Ih(r,n,Vt)}function wo(r,n){return Pi(n,function(a){return yi(r[a])})}function Xi(r,n){n=Li(n,r);for(var a=0,h=n.length;r!=null&&a<h;)r=r[ri(n[a++])];return a&&a==h?r:t}function xh(r,n,a){var h=n(r);return Re(r)?h:Ci(h,a(r))}function sr(r){return r==null?r===t?Fe:ke:Gi&&Gi in ht(r)?hy(r):Dy(r)}function Za(r,n){return r>n}function C0(r,n){return r!=null&&nt.call(r,n)}function A0(r,n){return r!=null&&n in ht(r)}function T0(r,n,a){return r>=Xt(n,a)&&r<Kt(n,a)}function ec(r,n,a){for(var h=a?$a:eo,p=r[0].length,_=r.length,O=_,N=K(_),q=1/0,X=[];O--;){var Z=r[O];O&&n&&(Z=_t(Z,Dr(n))),q=Xt(Z.length,q),N[O]=!a&&(n||p>=120&&Z.length>=120)?new Ji(O&&Z):t}Z=r[0];var ie=-1,he=N[0];e:for(;++ie<p&&X.length<q;){var ye=Z[ie],Ee=n?n(ye):ye;if(ye=a||ye!==0?ye:0,!(he?Qn(he,Ee):h(X,Ee,a))){for(O=_;--O;){var ze=N[O];if(!(ze?Qn(ze,Ee):h(r[O],Ee,a)))continue e}he&&he.push(Ee),X.push(ye)}}return X}function R0(r,n,a,h){return ei(r,function(p,_,O){n(h,a(p),_,O)}),h}function ss(r,n,a){n=Li(n,r),r=dl(r,n);var h=r==null?r:r[ri(jr(n))];return h==null?t:kt(h,r,a)}function Oh(r){return Ct(r)&&sr(r)==le}function N0(r){return Ct(r)&&sr(r)==Se}function L0(r){return Ct(r)&&sr(r)==U}function os(r,n,a,h,p){return r===n?!0:r==null||n==null||!Ct(r)&&!Ct(n)?r!==r&&n!==n:U0(r,n,a,h,os,p)}function U0(r,n,a,h,p,_){var O=Re(r),N=Re(n),q=O?me:Zt(r),X=N?me:Zt(n);q=q==le?Me:q,X=X==le?Me:X;var Z=q==Me,ie=X==Me,he=q==X;if(he&&$i(r)){if(!$i(n))return!1;O=!0,Z=!1}if(he&&!Z)return _||(_=new Kr),O||Rn(r)?ol(r,n,a,h,p,_):cy(r,n,q,a,h,p,_);if(!(a&P)){var ye=Z&&nt.call(r,"__wrapped__"),Ee=ie&&nt.call(n,"__wrapped__");if(ye||Ee){var ze=ye?r.value():r,De=Ee?n.value():n;return _||(_=new Kr),p(ze,De,a,h,_)}}return he?(_||(_=new Kr),uy(r,n,a,h,p,_)):!1}function $0(r){return Ct(r)&&Zt(r)==Ie}function tc(r,n,a,h){var p=a.length,_=p,O=!h;if(r==null)return!_;for(r=ht(r);p--;){var N=a[p];if(O&&N[2]?N[1]!==r[N[0]]:!(N[0]in r))return!1}for(;++p<_;){N=a[p];var q=N[0],X=r[q],Z=N[1];if(O&&N[2]){if(X===t&&!(q in r))return!1}else{var ie=new Kr;if(h)var he=h(X,Z,q,r,n,ie);if(!(he===t?os(Z,X,P|H,h,ie):he))return!1}}return!0}function Ph(r){if(!Et(r)||my(r))return!1;var n=yi(r)?$g:wa;return n.test(en(r))}function M0(r){return Ct(r)&&sr(r)==qe}function j0(r){return Ct(r)&&Zt(r)==xe}function q0(r){return Ct(r)&&Mo(r.length)&&!!at[sr(r)]}function Ch(r){return typeof r=="function"?r:r==null?vr:typeof r=="object"?Re(r)?Rh(r[0],r[1]):Th(r):Ql(r)}function rc(r){if(!us(r))return Hg(r);var n=[];for(var a in ht(r))nt.call(r,a)&&a!="constructor"&&n.push(a);return n}function F0(r){if(!Et(r))return Ey(r);var n=us(r),a=[];for(var h in r)h=="constructor"&&(n||!nt.call(r,h))||a.push(h);return a}function ic(r,n){return r<n}function Ah(r,n){var a=-1,h=gr(r)?K(r.length):[];return Ri(r,function(p,_,O){h[++a]=n(p,_,O)}),h}function Th(r){var n=mc(r);return n.length==1&&n[0][2]?ll(n[0][0],n[0][1]):function(a){return a===r||tc(a,r,n)}}function Rh(r,n){return wc(r)&&hl(n)?ll(ri(r),n):function(a){var h=Ac(a,r);return h===t&&h===n?Tc(a,r):os(n,h,P|H)}}function bo(r,n,a,h,p){r!==n&&Qa(n,function(_,O){if(p||(p=new Kr),Et(_))z0(r,n,O,a,bo,h,p);else{var N=h?h(Ec(r,O),_,O+"",r,n,p):t;N===t&&(N=_),Ya(r,O,N)}},yr)}function z0(r,n,a,h,p,_,O){var N=Ec(r,a),q=Ec(n,a),X=O.get(q);if(X){Ya(r,a,X);return}var Z=_?_(N,q,a+"",r,n,O):t,ie=Z===t;if(ie){var he=Re(q),ye=!he&&$i(q),Ee=!he&&!ye&&Rn(q);Z=q,he||ye||Ee?Re(N)?Z=N:Rt(N)?Z=pr(N):ye?(ie=!1,Z=Kh(q,!0)):Ee?(ie=!1,Z=kh(q,!0)):Z=[]:ls(q)||tn(q)?(Z=N,tn(N)?Z=zl(N):(!Et(N)||yi(N))&&(Z=ul(q))):ie=!1}ie&&(O.set(q,Z),p(Z,q,h,_,O),O.delete(q)),Ya(r,a,Z)}function Nh(r,n){var a=r.length;if(a)return n+=n<0?a:0,gi(n,a)?r[n]:t}function Lh(r,n,a){n.length?n=_t(n,function(_){return Re(_)?function(O){return Xi(O,_.length===1?_[0]:_)}:_}):n=[vr];var h=-1;n=_t(n,Dr(_e()));var p=Ah(r,function(_,O,N){var q=_t(n,function(X){return X(_)});return{criteria:q,index:++h,value:_}});return pg(p,function(_,O){return ey(_,O,a)})}function H0(r,n){return Uh(r,n,function(a,h){return Tc(r,h)})}function Uh(r,n,a){for(var h=-1,p=n.length,_={};++h<p;){var O=n[h],N=Xi(r,O);a(N,O)&&as(_,Li(O,r),N)}return _}function B0(r){return function(n){return Xi(n,r)}}function nc(r,n,a,h){var p=h?dg:bn,_=-1,O=n.length,N=r;for(r===n&&(n=pr(n)),a&&(N=_t(r,Dr(a)));++_<O;)for(var q=0,X=n[_],Z=a?a(X):X;(q=p(N,Z,q,h))>-1;)N!==r&&ho.call(N,q,1),ho.call(r,q,1);return r}function $h(r,n){for(var a=r?n.length:0,h=a-1;a--;){var p=n[a];if(a==h||p!==_){var _=p;gi(p)?ho.call(r,p,1):cc(r,p)}}return r}function sc(r,n){return r+po(yh()*(n-r+1))}function K0(r,n,a,h){for(var p=-1,_=Kt(fo((n-r)/(a||1)),0),O=K(_);_--;)O[h?_:++p]=r,r+=a;return O}function oc(r,n){var a="";if(!r||n<1||n>k)return a;do n%2&&(a+=r),n=po(n/2),n&&(r+=r);while(n);return a}function Ke(r,n){return Dc(fl(r,n,vr),r+"")}function k0(r){return _h(Nn(r))}function V0(r,n){var a=Nn(r);return To(a,Qi(n,0,a.length))}function as(r,n,a,h){if(!Et(r))return r;n=Li(n,r);for(var p=-1,_=n.length,O=_-1,N=r;N!=null&&++p<_;){var q=ri(n[p]),X=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return r;if(p!=O){var Z=N[q];X=h?h(Z,q,N):t,X===t&&(X=Et(Z)?Z:gi(n[p+1])?[]:{})}is(N,q,X),N=N[q]}return r}var Mh=go?function(r,n){return go.set(r,n),r}:vr,W0=lo?function(r,n){return lo(r,"toString",{configurable:!0,enumerable:!1,value:Nc(n),writable:!0})}:vr;function G0(r){return To(Nn(r))}function Mr(r,n,a){var h=-1,p=r.length;n<0&&(n=-n>p?0:p+n),a=a>p?p:a,a<0&&(a+=p),p=n>a?0:a-n>>>0,n>>>=0;for(var _=K(p);++h<p;)_[h]=r[h+n];return _}function Y0(r,n){var a;return Ri(r,function(h,p,_){return a=n(h,p,_),!a}),!!a}function Eo(r,n,a){var h=0,p=r==null?h:r.length;if(typeof n=="number"&&n===n&&p<=oe){for(;h<p;){var _=h+p>>>1,O=r[_];O!==null&&!Ir(O)&&(a?O<=n:O<n)?h=_+1:p=_}return p}return ac(r,n,vr,a)}function ac(r,n,a,h){var p=0,_=r==null?0:r.length;if(_===0)return 0;n=a(n);for(var O=n!==n,N=n===null,q=Ir(n),X=n===t;p<_;){var Z=po((p+_)/2),ie=a(r[Z]),he=ie!==t,ye=ie===null,Ee=ie===ie,ze=Ir(ie);if(O)var De=h||Ee;else X?De=Ee&&(h||he):N?De=Ee&&he&&(h||!ye):q?De=Ee&&he&&!ye&&(h||!ze):ye||ze?De=!1:De=h?ie<=n:ie<n;De?p=Z+1:_=Z}return Xt(_,we)}function jh(r,n){for(var a=-1,h=r.length,p=0,_=[];++a<h;){var O=r[a],N=n?n(O):O;if(!a||!kr(N,q)){var q=N;_[p++]=O===0?0:O}}return _}function qh(r){return typeof r=="number"?r:Ir(r)?J:+r}function Sr(r){if(typeof r=="string")return r;if(Re(r))return _t(r,Sr)+"";if(Ir(r))return vh?vh.call(r):"";var n=r+"";return n=="0"&&1/r==-Q?"-0":n}function Ni(r,n,a){var h=-1,p=eo,_=r.length,O=!0,N=[],q=N;if(a)O=!1,p=$a;else if(_>=o){var X=n?null:oy(r);if(X)return ro(X);O=!1,p=Qn,q=new Ji}else q=n?[]:N;e:for(;++h<_;){var Z=r[h],ie=n?n(Z):Z;if(Z=a||Z!==0?Z:0,O&&ie===ie){for(var he=q.length;he--;)if(q[he]===ie)continue e;n&&q.push(ie),N.push(Z)}else p(q,ie,a)||(q!==N&&q.push(ie),N.push(Z))}return N}function cc(r,n){return n=Li(n,r),r=dl(r,n),r==null||delete r[ri(jr(n))]}function Fh(r,n,a,h){return as(r,n,a(Xi(r,n)),h)}function Do(r,n,a,h){for(var p=r.length,_=h?p:-1;(h?_--:++_<p)&&n(r[_],_,r););return a?Mr(r,h?0:_,h?_+1:p):Mr(r,h?_+1:0,h?p:_)}function zh(r,n){var a=r;return a instanceof Ye&&(a=a.value()),Ma(n,function(h,p){return p.func.apply(p.thisArg,Ci([h],p.args))},a)}function uc(r,n,a){var h=r.length;if(h<2)return h?Ni(r[0]):[];for(var p=-1,_=K(h);++p<h;)for(var O=r[p],N=-1;++N<h;)N!=p&&(_[p]=ns(_[p]||O,r[N],n,a));return Ni(Yt(_,1),n,a)}function Hh(r,n,a){for(var h=-1,p=r.length,_=n.length,O={};++h<p;){var N=h<_?n[h]:t;a(O,r[h],N)}return O}function hc(r){return Rt(r)?r:[]}function lc(r){return typeof r=="function"?r:vr}function Li(r,n){return Re(r)?r:wc(r,n)?[r]:vl(it(r))}var J0=Ke;function Ui(r,n,a){var h=r.length;return a=a===t?h:a,!n&&a>=h?r:Mr(r,n,a)}var Bh=Mg||function(r){return Qe.clearTimeout(r)};function Kh(r,n){if(n)return r.slice();var a=r.length,h=lh?lh(a):new r.constructor(a);return r.copy(h),h}function fc(r){var n=new r.constructor(r.byteLength);return new co(n).set(new co(r)),n}function Q0(r,n){var a=n?fc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function X0(r){var n=new r.constructor(r.source,Tr.exec(r));return n.lastIndex=r.lastIndex,n}function Z0(r){return rs?ht(rs.call(r)):{}}function kh(r,n){var a=n?fc(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function Vh(r,n){if(r!==n){var a=r!==t,h=r===null,p=r===r,_=Ir(r),O=n!==t,N=n===null,q=n===n,X=Ir(n);if(!N&&!X&&!_&&r>n||_&&O&&q&&!N&&!X||h&&O&&q||!a&&q||!p)return 1;if(!h&&!_&&!X&&r<n||X&&a&&p&&!h&&!_||N&&a&&p||!O&&p||!q)return-1}return 0}function ey(r,n,a){for(var h=-1,p=r.criteria,_=n.criteria,O=p.length,N=a.length;++h<O;){var q=Vh(p[h],_[h]);if(q){if(h>=N)return q;var X=a[h];return q*(X=="desc"?-1:1)}}return r.index-n.index}function Wh(r,n,a,h){for(var p=-1,_=r.length,O=a.length,N=-1,q=n.length,X=Kt(_-O,0),Z=K(q+X),ie=!h;++N<q;)Z[N]=n[N];for(;++p<O;)(ie||p<_)&&(Z[a[p]]=r[p]);for(;X--;)Z[N++]=r[p++];return Z}function Gh(r,n,a,h){for(var p=-1,_=r.length,O=-1,N=a.length,q=-1,X=n.length,Z=Kt(_-N,0),ie=K(Z+X),he=!h;++p<Z;)ie[p]=r[p];for(var ye=p;++q<X;)ie[ye+q]=n[q];for(;++O<N;)(he||p<_)&&(ie[ye+a[O]]=r[p++]);return ie}function pr(r,n){var a=-1,h=r.length;for(n||(n=K(h));++a<h;)n[a]=r[a];return n}function ti(r,n,a,h){var p=!a;a||(a={});for(var _=-1,O=n.length;++_<O;){var N=n[_],q=h?h(a[N],r[N],N,a,r):t;q===t&&(q=r[N]),p?fi(a,N,q):is(a,N,q)}return a}function ty(r,n){return ti(r,_c(r),n)}function ry(r,n){return ti(r,al(r),n)}function So(r,n){return function(a,h){var p=Re(a)?ag:S0,_=n?n():{};return p(a,r,_e(h,2),_)}}function Cn(r){return Ke(function(n,a){var h=-1,p=a.length,_=p>1?a[p-1]:t,O=p>2?a[2]:t;for(_=r.length>3&&typeof _=="function"?(p--,_):t,O&&or(a[0],a[1],O)&&(_=p<3?t:_,p=1),n=ht(n);++h<p;){var N=a[h];N&&r(n,N,h,_)}return n})}function Yh(r,n){return function(a,h){if(a==null)return a;if(!gr(a))return r(a,h);for(var p=a.length,_=n?p:-1,O=ht(a);(n?_--:++_<p)&&h(O[_],_,O)!==!1;);return a}}function Jh(r){return function(n,a,h){for(var p=-1,_=ht(n),O=h(n),N=O.length;N--;){var q=O[r?N:++p];if(a(_[q],q,_)===!1)break}return n}}function iy(r,n,a){var h=n&B,p=cs(r);function _(){var O=this&&this!==Qe&&this instanceof _?p:r;return O.apply(h?a:this,arguments)}return _}function Qh(r){return function(n){n=it(n);var a=En(n)?Br(n):t,h=a?a[0]:n.charAt(0),p=a?Ui(a,1).join(""):n.slice(1);return h[r]()+p}}function An(r){return function(n){return Ma(Yl(Gl(n).replace(Yn,"")),r,"")}}function cs(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=Pn(r.prototype),h=r.apply(a,n);return Et(h)?h:a}}function ny(r,n,a){var h=cs(r);function p(){for(var _=arguments.length,O=K(_),N=_,q=Tn(p);N--;)O[N]=arguments[N];var X=_<3&&O[0]!==q&&O[_-1]!==q?[]:Ai(O,q);if(_-=X.length,_<a)return rl(r,n,Io,p.placeholder,t,O,X,t,t,a-_);var Z=this&&this!==Qe&&this instanceof p?h:r;return kt(Z,this,O)}return p}function Xh(r){return function(n,a,h){var p=ht(n);if(!gr(n)){var _=_e(a,3);n=Vt(n),a=function(N){return _(p[N],N,p)}}var O=r(n,a,h);return O>-1?p[_?n[O]:O]:t}}function Zh(r){return pi(function(n){var a=n.length,h=a,p=Ur.prototype.thru;for(r&&n.reverse();h--;){var _=n[h];if(typeof _!="function")throw new Lr(d);if(p&&!O&&Co(_)=="wrapper")var O=new Ur([],!0)}for(h=O?h:a;++h<a;){_=n[h];var N=Co(_),q=N=="wrapper"?vc(_):t;q&&bc(q[0])&&q[1]==(u|$|R|w)&&!q[4].length&&q[9]==1?O=O[Co(q[0])].apply(O,q[3]):O=_.length==1&&bc(_)?O[N]():O.thru(_)}return function(){var X=arguments,Z=X[0];if(O&&X.length==1&&Re(Z))return O.plant(Z).value();for(var ie=0,he=a?n[ie].apply(this,X):Z;++ie<a;)he=n[ie].call(this,he);return he}})}function Io(r,n,a,h,p,_,O,N,q,X){var Z=n&u,ie=n&B,he=n&ne,ye=n&($|x),Ee=n&W,ze=he?t:cs(r);function De(){for(var We=arguments.length,Xe=K(We),xr=We;xr--;)Xe[xr]=arguments[xr];if(ye)var ar=Tn(De),Or=yg(Xe,ar);if(h&&(Xe=Wh(Xe,h,p,ye)),_&&(Xe=Gh(Xe,_,O,ye)),We-=Or,ye&&We<X){var Nt=Ai(Xe,ar);return rl(r,n,Io,De.placeholder,a,Xe,Nt,N,q,X-We)}var Vr=ie?a:this,mi=he?Vr[r]:r;return We=Xe.length,N?Xe=Sy(Xe,N):Ee&&We>1&&Xe.reverse(),Z&&q<We&&(Xe.length=q),this&&this!==Qe&&this instanceof De&&(mi=ze||cs(mi)),mi.apply(Vr,Xe)}return De}function el(r,n){return function(a,h){return R0(a,r,n(h),{})}}function xo(r,n){return function(a,h){var p;if(a===t&&h===t)return n;if(a!==t&&(p=a),h!==t){if(p===t)return h;typeof a=="string"||typeof h=="string"?(a=Sr(a),h=Sr(h)):(a=qh(a),h=qh(h)),p=r(a,h)}return p}}function dc(r){return pi(function(n){return n=_t(n,Dr(_e())),Ke(function(a){var h=this;return r(n,function(p){return kt(p,h,a)})})})}function Oo(r,n){n=n===t?" ":Sr(n);var a=n.length;if(a<2)return a?oc(n,r):n;var h=oc(n,fo(r/Dn(n)));return En(n)?Ui(Br(h),0,r).join(""):h.slice(0,r)}function sy(r,n,a,h){var p=n&B,_=cs(r);function O(){for(var N=-1,q=arguments.length,X=-1,Z=h.length,ie=K(Z+q),he=this&&this!==Qe&&this instanceof O?_:r;++X<Z;)ie[X]=h[X];for(;q--;)ie[X++]=arguments[++N];return kt(he,p?a:this,ie)}return O}function tl(r){return function(n,a,h){return h&&typeof h!="number"&&or(n,a,h)&&(a=h=t),n=vi(n),a===t?(a=n,n=0):a=vi(a),h=h===t?n<a?1:-1:vi(h),K0(n,a,h,r)}}function Po(r){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=qr(n),a=qr(a)),r(n,a)}}function rl(r,n,a,h,p,_,O,N,q,X){var Z=n&$,ie=Z?O:t,he=Z?t:O,ye=Z?_:t,Ee=Z?t:_;n|=Z?R:E,n&=~(Z?E:R),n&L||(n&=~(B|ne));var ze=[r,n,p,ye,ie,Ee,he,N,q,X],De=a.apply(t,ze);return bc(r)&&pl(De,ze),De.placeholder=h,gl(De,r,n)}function pc(r){var n=Bt[r];return function(a,h){if(a=qr(a),h=h==null?0:Xt(je(h),292),h&&gh(a)){var p=(it(a)+"e").split("e"),_=n(p[0]+"e"+(+p[1]+h));return p=(it(_)+"e").split("e"),+(p[0]+"e"+(+p[1]-h))}return n(a)}}var oy=xn&&1/ro(new xn([,-0]))[1]==Q?function(r){return new xn(r)}:$c;function il(r){return function(n){var a=Zt(n);return a==Ie?Ka(n):a==xe?Dg(n):gg(n,r(n))}}function di(r,n,a,h,p,_,O,N){var q=n&ne;if(!q&&typeof r!="function")throw new Lr(d);var X=h?h.length:0;if(X||(n&=~(R|E),h=p=t),O=O===t?O:Kt(je(O),0),N=N===t?N:je(N),X-=p?p.length:0,n&E){var Z=h,ie=p;h=p=t}var he=q?t:vc(r),ye=[r,n,a,h,p,Z,ie,_,O,N];if(he&&by(ye,he),r=ye[0],n=ye[1],a=ye[2],h=ye[3],p=ye[4],N=ye[9]=ye[9]===t?q?0:r.length:Kt(ye[9]-X,0),!N&&n&($|x)&&(n&=~($|x)),!n||n==B)var Ee=iy(r,n,a);else n==$||n==x?Ee=ny(r,n,N):(n==R||n==(B|R))&&!p.length?Ee=sy(r,n,a,h):Ee=Io.apply(t,ye);var ze=he?Mh:pl;return gl(ze(Ee,ye),r,n)}function nl(r,n,a,h){return r===t||kr(r,In[a])&&!nt.call(h,a)?n:r}function sl(r,n,a,h,p,_){return Et(r)&&Et(n)&&(_.set(n,r),bo(r,n,t,sl,_),_.delete(n)),r}function ay(r){return ls(r)?t:r}function ol(r,n,a,h,p,_){var O=a&P,N=r.length,q=n.length;if(N!=q&&!(O&&q>N))return!1;var X=_.get(r),Z=_.get(n);if(X&&Z)return X==n&&Z==r;var ie=-1,he=!0,ye=a&H?new Ji:t;for(_.set(r,n),_.set(n,r);++ie<N;){var Ee=r[ie],ze=n[ie];if(h)var De=O?h(ze,Ee,ie,n,r,_):h(Ee,ze,ie,r,n,_);if(De!==t){if(De)continue;he=!1;break}if(ye){if(!ja(n,function(We,Xe){if(!Qn(ye,Xe)&&(Ee===We||p(Ee,We,a,h,_)))return ye.push(Xe)})){he=!1;break}}else if(!(Ee===ze||p(Ee,ze,a,h,_))){he=!1;break}}return _.delete(r),_.delete(n),he}function cy(r,n,a,h,p,_,O){switch(a){case Ce:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case Se:return!(r.byteLength!=n.byteLength||!_(new co(r),new co(n)));case F:case U:case He:return kr(+r,+n);case T:return r.name==n.name&&r.message==n.message;case qe:case Ne:return r==n+"";case Ie:var N=Ka;case xe:var q=h&P;if(N||(N=ro),r.size!=n.size&&!q)return!1;var X=O.get(r);if(X)return X==n;h|=H,O.set(r,n);var Z=ol(N(r),N(n),h,p,_,O);return O.delete(r),Z;case Le:if(rs)return rs.call(r)==rs.call(n)}return!1}function uy(r,n,a,h,p,_){var O=a&P,N=gc(r),q=N.length,X=gc(n),Z=X.length;if(q!=Z&&!O)return!1;for(var ie=q;ie--;){var he=N[ie];if(!(O?he in n:nt.call(n,he)))return!1}var ye=_.get(r),Ee=_.get(n);if(ye&&Ee)return ye==n&&Ee==r;var ze=!0;_.set(r,n),_.set(n,r);for(var De=O;++ie<q;){he=N[ie];var We=r[he],Xe=n[he];if(h)var xr=O?h(Xe,We,he,n,r,_):h(We,Xe,he,r,n,_);if(!(xr===t?We===Xe||p(We,Xe,a,h,_):xr)){ze=!1;break}De||(De=he=="constructor")}if(ze&&!De){var ar=r.constructor,Or=n.constructor;ar!=Or&&"constructor"in r&&"constructor"in n&&!(typeof ar=="function"&&ar instanceof ar&&typeof Or=="function"&&Or instanceof Or)&&(ze=!1)}return _.delete(r),_.delete(n),ze}function pi(r){return Dc(fl(r,t,bl),r+"")}function gc(r){return xh(r,Vt,_c)}function yc(r){return xh(r,yr,al)}var vc=go?function(r){return go.get(r)}:$c;function Co(r){for(var n=r.name+"",a=On[n],h=nt.call(On,n)?a.length:0;h--;){var p=a[h],_=p.func;if(_==null||_==r)return p.name}return n}function Tn(r){var n=nt.call(v,"placeholder")?v:r;return n.placeholder}function _e(){var r=v.iteratee||Lc;return r=r===Lc?Ch:r,arguments.length?r(arguments[0],arguments[1]):r}function Ao(r,n){var a=r.__data__;return vy(n)?a[typeof n=="string"?"string":"hash"]:a.map}function mc(r){for(var n=Vt(r),a=n.length;a--;){var h=n[a],p=r[h];n[a]=[h,p,hl(p)]}return n}function Zi(r,n){var a=wg(r,n);return Ph(a)?a:t}function hy(r){var n=nt.call(r,Gi),a=r[Gi];try{r[Gi]=t;var h=!0}catch{}var p=oo.call(r);return h&&(n?r[Gi]=a:delete r[Gi]),p}var _c=Va?function(r){return r==null?[]:(r=ht(r),Pi(Va(r),function(n){return dh.call(r,n)}))}:Mc,al=Va?function(r){for(var n=[];r;)Ci(n,_c(r)),r=uo(r);return n}:Mc,Zt=sr;(Wa&&Zt(new Wa(new ArrayBuffer(1)))!=Ce||Zn&&Zt(new Zn)!=Ie||Ga&&Zt(Ga.resolve())!=gt||xn&&Zt(new xn)!=xe||es&&Zt(new es)!=Pe)&&(Zt=function(r){var n=sr(r),a=n==Me?r.constructor:t,h=a?en(a):"";if(h)switch(h){case Vg:return Ce;case Wg:return Ie;case Gg:return gt;case Yg:return xe;case Jg:return Pe}return n});function ly(r,n,a){for(var h=-1,p=a.length;++h<p;){var _=a[h],O=_.size;switch(_.type){case"drop":r+=O;break;case"dropRight":n-=O;break;case"take":n=Xt(n,r+O);break;case"takeRight":r=Kt(r,n-O);break}}return{start:r,end:n}}function fy(r){var n=r.match(lt);return n?n[1].split(jt):[]}function cl(r,n,a){n=Li(n,r);for(var h=-1,p=n.length,_=!1;++h<p;){var O=ri(n[h]);if(!(_=r!=null&&a(r,O)))break;r=r[O]}return _||++h!=p?_:(p=r==null?0:r.length,!!p&&Mo(p)&&gi(O,p)&&(Re(r)||tn(r)))}function dy(r){var n=r.length,a=new r.constructor(n);return n&&typeof r[0]=="string"&&nt.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function ul(r){return typeof r.constructor=="function"&&!us(r)?Pn(uo(r)):{}}function py(r,n,a){var h=r.constructor;switch(n){case Se:return fc(r);case F:case U:return new h(+r);case Ce:return Q0(r,a);case Be:case Oe:case Ve:case Ge:case et:case tt:case Je:case rr:case fr:return kh(r,a);case Ie:return new h;case He:case Ne:return new h(r);case qe:return X0(r);case xe:return new h;case Le:return Z0(r)}}function gy(r,n){var a=n.length;if(!a)return r;var h=a-1;return n[h]=(a>1?"& ":"")+n[h],n=n.join(a>2?", ":" "),r.replace(Pt,`{
/* [wrapped with `+n+`] */
`)}function yy(r){return Re(r)||tn(r)||!!(ph&&r&&r[ph])}function gi(r,n){var a=typeof r;return n=n??k,!!n&&(a=="number"||a!="symbol"&&Ea.test(r))&&r>-1&&r%1==0&&r<n}function or(r,n,a){if(!Et(a))return!1;var h=typeof n;return(h=="number"?gr(a)&&gi(n,a.length):h=="string"&&n in a)?kr(a[n],r):!1}function wc(r,n){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||Ir(r)?!0:Ut.test(r)||!mt.test(r)||n!=null&&r in ht(n)}function vy(r){var n=typeof r;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?r!=="__proto__":r===null}function bc(r){var n=Co(r),a=v[n];if(typeof a!="function"||!(n in Ye.prototype))return!1;if(r===a)return!0;var h=vc(a);return!!h&&r===h[0]}function my(r){return!!hh&&hh in r}var _y=no?yi:jc;function us(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||In;return r===a}function hl(r){return r===r&&!Et(r)}function ll(r,n){return function(a){return a==null?!1:a[r]===n&&(n!==t||r in ht(a))}}function wy(r){var n=Uo(r,function(h){return a.size===g&&a.clear(),h}),a=n.cache;return n}function by(r,n){var a=r[1],h=n[1],p=a|h,_=p<(B|ne|u),O=h==u&&a==$||h==u&&a==w&&r[7].length<=n[8]||h==(u|w)&&n[7].length<=n[8]&&a==$;if(!(_||O))return r;h&B&&(r[2]=n[2],p|=a&B?0:L);var N=n[3];if(N){var q=r[3];r[3]=q?Wh(q,N,n[4]):N,r[4]=q?Ai(r[3],m):n[4]}return N=n[5],N&&(q=r[5],r[5]=q?Gh(q,N,n[6]):N,r[6]=q?Ai(r[5],m):n[6]),N=n[7],N&&(r[7]=N),h&u&&(r[8]=r[8]==null?n[8]:Xt(r[8],n[8])),r[9]==null&&(r[9]=n[9]),r[0]=n[0],r[1]=p,r}function Ey(r){var n=[];if(r!=null)for(var a in ht(r))n.push(a);return n}function Dy(r){return oo.call(r)}function fl(r,n,a){return n=Kt(n===t?r.length-1:n,0),function(){for(var h=arguments,p=-1,_=Kt(h.length-n,0),O=K(_);++p<_;)O[p]=h[n+p];p=-1;for(var N=K(n+1);++p<n;)N[p]=h[p];return N[n]=a(O),kt(r,this,N)}}function dl(r,n){return n.length<2?r:Xi(r,Mr(n,0,-1))}function Sy(r,n){for(var a=r.length,h=Xt(n.length,a),p=pr(r);h--;){var _=n[h];r[h]=gi(_,a)?p[_]:t}return r}function Ec(r,n){if(!(n==="constructor"&&typeof r[n]=="function")&&n!="__proto__")return r[n]}var pl=yl(Mh),hs=qg||function(r,n){return Qe.setTimeout(r,n)},Dc=yl(W0);function gl(r,n,a){var h=n+"";return Dc(r,gy(h,Iy(fy(h),a)))}function yl(r){var n=0,a=0;return function(){var h=Bg(),p=de-(h-a);if(a=h,p>0){if(++n>=ce)return arguments[0]}else n=0;return r.apply(t,arguments)}}function To(r,n){var a=-1,h=r.length,p=h-1;for(n=n===t?h:n;++a<n;){var _=sc(a,p),O=r[_];r[_]=r[a],r[a]=O}return r.length=n,r}var vl=wy(function(r){var n=[];return r.charCodeAt(0)===46&&n.push(""),r.replace($t,function(a,h,p,_){n.push(p?_.replace(ya,"$1"):h||a)}),n});function ri(r){if(typeof r=="string"||Ir(r))return r;var n=r+"";return n=="0"&&1/r==-Q?"-0":n}function en(r){if(r!=null){try{return so.call(r)}catch{}try{return r+""}catch{}}return""}function Iy(r,n){return Nr(be,function(a){var h="_."+a[0];n&a[1]&&!eo(r,h)&&r.push(h)}),r.sort()}function ml(r){if(r instanceof Ye)return r.clone();var n=new Ur(r.__wrapped__,r.__chain__);return n.__actions__=pr(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}function xy(r,n,a){(a?or(r,n,a):n===t)?n=1:n=Kt(je(n),0);var h=r==null?0:r.length;if(!h||n<1)return[];for(var p=0,_=0,O=K(fo(h/n));p<h;)O[_++]=Mr(r,p,p+=n);return O}function Oy(r){for(var n=-1,a=r==null?0:r.length,h=0,p=[];++n<a;){var _=r[n];_&&(p[h++]=_)}return p}function Py(){var r=arguments.length;if(!r)return[];for(var n=K(r-1),a=arguments[0],h=r;h--;)n[h-1]=arguments[h];return Ci(Re(a)?pr(a):[a],Yt(n,1))}var Cy=Ke(function(r,n){return Rt(r)?ns(r,Yt(n,1,Rt,!0)):[]}),Ay=Ke(function(r,n){var a=jr(n);return Rt(a)&&(a=t),Rt(r)?ns(r,Yt(n,1,Rt,!0),_e(a,2)):[]}),Ty=Ke(function(r,n){var a=jr(n);return Rt(a)&&(a=t),Rt(r)?ns(r,Yt(n,1,Rt,!0),t,a):[]});function Ry(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:je(n),Mr(r,n<0?0:n,h)):[]}function Ny(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:je(n),n=h-n,Mr(r,0,n<0?0:n)):[]}function Ly(r,n){return r&&r.length?Do(r,_e(n,3),!0,!0):[]}function Uy(r,n){return r&&r.length?Do(r,_e(n,3),!0):[]}function $y(r,n,a,h){var p=r==null?0:r.length;return p?(a&&typeof a!="number"&&or(r,n,a)&&(a=0,h=p),P0(r,n,a,h)):[]}function _l(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=a==null?0:je(a);return p<0&&(p=Kt(h+p,0)),to(r,_e(n,3),p)}function wl(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=h-1;return a!==t&&(p=je(a),p=a<0?Kt(h+p,0):Xt(p,h-1)),to(r,_e(n,3),p,!0)}function bl(r){var n=r==null?0:r.length;return n?Yt(r,1):[]}function My(r){var n=r==null?0:r.length;return n?Yt(r,Q):[]}function jy(r,n){var a=r==null?0:r.length;return a?(n=n===t?1:je(n),Yt(r,n)):[]}function qy(r){for(var n=-1,a=r==null?0:r.length,h={};++n<a;){var p=r[n];h[p[0]]=p[1]}return h}function El(r){return r&&r.length?r[0]:t}function Fy(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=a==null?0:je(a);return p<0&&(p=Kt(h+p,0)),bn(r,n,p)}function zy(r){var n=r==null?0:r.length;return n?Mr(r,0,-1):[]}var Hy=Ke(function(r){var n=_t(r,hc);return n.length&&n[0]===r[0]?ec(n):[]}),By=Ke(function(r){var n=jr(r),a=_t(r,hc);return n===jr(a)?n=t:a.pop(),a.length&&a[0]===r[0]?ec(a,_e(n,2)):[]}),Ky=Ke(function(r){var n=jr(r),a=_t(r,hc);return n=typeof n=="function"?n:t,n&&a.pop(),a.length&&a[0]===r[0]?ec(a,t,n):[]});function ky(r,n){return r==null?"":zg.call(r,n)}function jr(r){var n=r==null?0:r.length;return n?r[n-1]:t}function Vy(r,n,a){var h=r==null?0:r.length;if(!h)return-1;var p=h;return a!==t&&(p=je(a),p=p<0?Kt(h+p,0):Xt(p,h-1)),n===n?Ig(r,n,p):to(r,rh,p,!0)}function Wy(r,n){return r&&r.length?Nh(r,je(n)):t}var Gy=Ke(Dl);function Dl(r,n){return r&&r.length&&n&&n.length?nc(r,n):r}function Yy(r,n,a){return r&&r.length&&n&&n.length?nc(r,n,_e(a,2)):r}function Jy(r,n,a){return r&&r.length&&n&&n.length?nc(r,n,t,a):r}var Qy=pi(function(r,n){var a=r==null?0:r.length,h=Ja(r,n);return $h(r,_t(n,function(p){return gi(p,a)?+p:p}).sort(Vh)),h});function Xy(r,n){var a=[];if(!(r&&r.length))return a;var h=-1,p=[],_=r.length;for(n=_e(n,3);++h<_;){var O=r[h];n(O,h,r)&&(a.push(O),p.push(h))}return $h(r,p),a}function Sc(r){return r==null?r:kg.call(r)}function Zy(r,n,a){var h=r==null?0:r.length;return h?(a&&typeof a!="number"&&or(r,n,a)?(n=0,a=h):(n=n==null?0:je(n),a=a===t?h:je(a)),Mr(r,n,a)):[]}function ev(r,n){return Eo(r,n)}function tv(r,n,a){return ac(r,n,_e(a,2))}function rv(r,n){var a=r==null?0:r.length;if(a){var h=Eo(r,n);if(h<a&&kr(r[h],n))return h}return-1}function iv(r,n){return Eo(r,n,!0)}function nv(r,n,a){return ac(r,n,_e(a,2),!0)}function sv(r,n){var a=r==null?0:r.length;if(a){var h=Eo(r,n,!0)-1;if(kr(r[h],n))return h}return-1}function ov(r){return r&&r.length?jh(r):[]}function av(r,n){return r&&r.length?jh(r,_e(n,2)):[]}function cv(r){var n=r==null?0:r.length;return n?Mr(r,1,n):[]}function uv(r,n,a){return r&&r.length?(n=a||n===t?1:je(n),Mr(r,0,n<0?0:n)):[]}function hv(r,n,a){var h=r==null?0:r.length;return h?(n=a||n===t?1:je(n),n=h-n,Mr(r,n<0?0:n,h)):[]}function lv(r,n){return r&&r.length?Do(r,_e(n,3),!1,!0):[]}function fv(r,n){return r&&r.length?Do(r,_e(n,3)):[]}var dv=Ke(function(r){return Ni(Yt(r,1,Rt,!0))}),pv=Ke(function(r){var n=jr(r);return Rt(n)&&(n=t),Ni(Yt(r,1,Rt,!0),_e(n,2))}),gv=Ke(function(r){var n=jr(r);return n=typeof n=="function"?n:t,Ni(Yt(r,1,Rt,!0),t,n)});function yv(r){return r&&r.length?Ni(r):[]}function vv(r,n){return r&&r.length?Ni(r,_e(n,2)):[]}function mv(r,n){return n=typeof n=="function"?n:t,r&&r.length?Ni(r,t,n):[]}function Ic(r){if(!(r&&r.length))return[];var n=0;return r=Pi(r,function(a){if(Rt(a))return n=Kt(a.length,n),!0}),Ha(n,function(a){return _t(r,qa(a))})}function Sl(r,n){if(!(r&&r.length))return[];var a=Ic(r);return n==null?a:_t(a,function(h){return kt(n,t,h)})}var _v=Ke(function(r,n){return Rt(r)?ns(r,n):[]}),wv=Ke(function(r){return uc(Pi(r,Rt))}),bv=Ke(function(r){var n=jr(r);return Rt(n)&&(n=t),uc(Pi(r,Rt),_e(n,2))}),Ev=Ke(function(r){var n=jr(r);return n=typeof n=="function"?n:t,uc(Pi(r,Rt),t,n)}),Dv=Ke(Ic);function Sv(r,n){return Hh(r||[],n||[],is)}function Iv(r,n){return Hh(r||[],n||[],as)}var xv=Ke(function(r){var n=r.length,a=n>1?r[n-1]:t;return a=typeof a=="function"?(r.pop(),a):t,Sl(r,a)});function Il(r){var n=v(r);return n.__chain__=!0,n}function Ov(r,n){return n(r),r}function Ro(r,n){return n(r)}var Pv=pi(function(r){var n=r.length,a=n?r[0]:0,h=this.__wrapped__,p=function(_){return Ja(_,r)};return n>1||this.__actions__.length||!(h instanceof Ye)||!gi(a)?this.thru(p):(h=h.slice(a,+a+(n?1:0)),h.__actions__.push({func:Ro,args:[p],thisArg:t}),new Ur(h,this.__chain__).thru(function(_){return n&&!_.length&&_.push(t),_}))});function Cv(){return Il(this)}function Av(){return new Ur(this.value(),this.__chain__)}function Tv(){this.__values__===t&&(this.__values__=ql(this.value()));var r=this.__index__>=this.__values__.length,n=r?t:this.__values__[this.__index__++];return{done:r,value:n}}function Rv(){return this}function Nv(r){for(var n,a=this;a instanceof vo;){var h=ml(a);h.__index__=0,h.__values__=t,n?p.__wrapped__=h:n=h;var p=h;a=a.__wrapped__}return p.__wrapped__=r,n}function Lv(){var r=this.__wrapped__;if(r instanceof Ye){var n=r;return this.__actions__.length&&(n=new Ye(this)),n=n.reverse(),n.__actions__.push({func:Ro,args:[Sc],thisArg:t}),new Ur(n,this.__chain__)}return this.thru(Sc)}function Uv(){return zh(this.__wrapped__,this.__actions__)}var $v=So(function(r,n,a){nt.call(r,a)?++r[a]:fi(r,a,1)});function Mv(r,n,a){var h=Re(r)?eh:O0;return a&&or(r,n,a)&&(n=t),h(r,_e(n,3))}function jv(r,n){var a=Re(r)?Pi:Sh;return a(r,_e(n,3))}var qv=Xh(_l),Fv=Xh(wl);function zv(r,n){return Yt(No(r,n),1)}function Hv(r,n){return Yt(No(r,n),Q)}function Bv(r,n,a){return a=a===t?1:je(a),Yt(No(r,n),a)}function xl(r,n){var a=Re(r)?Nr:Ri;return a(r,_e(n,3))}function Ol(r,n){var a=Re(r)?cg:Dh;return a(r,_e(n,3))}var Kv=So(function(r,n,a){nt.call(r,a)?r[a].push(n):fi(r,a,[n])});function kv(r,n,a,h){r=gr(r)?r:Nn(r),a=a&&!h?je(a):0;var p=r.length;return a<0&&(a=Kt(p+a,0)),jo(r)?a<=p&&r.indexOf(n,a)>-1:!!p&&bn(r,n,a)>-1}var Vv=Ke(function(r,n,a){var h=-1,p=typeof n=="function",_=gr(r)?K(r.length):[];return Ri(r,function(O){_[++h]=p?kt(n,O,a):ss(O,n,a)}),_}),Wv=So(function(r,n,a){fi(r,a,n)});function No(r,n){var a=Re(r)?_t:Ah;return a(r,_e(n,3))}function Gv(r,n,a,h){return r==null?[]:(Re(n)||(n=n==null?[]:[n]),a=h?t:a,Re(a)||(a=a==null?[]:[a]),Lh(r,n,a))}var Yv=So(function(r,n,a){r[a?0:1].push(n)},function(){return[[],[]]});function Jv(r,n,a){var h=Re(r)?Ma:nh,p=arguments.length<3;return h(r,_e(n,4),a,p,Ri)}function Qv(r,n,a){var h=Re(r)?ug:nh,p=arguments.length<3;return h(r,_e(n,4),a,p,Dh)}function Xv(r,n){var a=Re(r)?Pi:Sh;return a(r,$o(_e(n,3)))}function Zv(r){var n=Re(r)?_h:k0;return n(r)}function em(r,n,a){(a?or(r,n,a):n===t)?n=1:n=je(n);var h=Re(r)?E0:V0;return h(r,n)}function tm(r){var n=Re(r)?D0:G0;return n(r)}function rm(r){if(r==null)return 0;if(gr(r))return jo(r)?Dn(r):r.length;var n=Zt(r);return n==Ie||n==xe?r.size:rc(r).length}function im(r,n,a){var h=Re(r)?ja:Y0;return a&&or(r,n,a)&&(n=t),h(r,_e(n,3))}var nm=Ke(function(r,n){if(r==null)return[];var a=n.length;return a>1&&or(r,n[0],n[1])?n=[]:a>2&&or(n[0],n[1],n[2])&&(n=[n[0]]),Lh(r,Yt(n,1),[])}),Lo=jg||function(){return Qe.Date.now()};function sm(r,n){if(typeof n!="function")throw new Lr(d);return r=je(r),function(){if(--r<1)return n.apply(this,arguments)}}function Pl(r,n,a){return n=a?t:n,n=r&&n==null?r.length:n,di(r,u,t,t,t,t,n)}function Cl(r,n){var a;if(typeof n!="function")throw new Lr(d);return r=je(r),function(){return--r>0&&(a=n.apply(this,arguments)),r<=1&&(n=t),a}}var xc=Ke(function(r,n,a){var h=B;if(a.length){var p=Ai(a,Tn(xc));h|=R}return di(r,h,n,a,p)}),Al=Ke(function(r,n,a){var h=B|ne;if(a.length){var p=Ai(a,Tn(Al));h|=R}return di(n,h,r,a,p)});function Tl(r,n,a){n=a?t:n;var h=di(r,$,t,t,t,t,t,n);return h.placeholder=Tl.placeholder,h}function Rl(r,n,a){n=a?t:n;var h=di(r,x,t,t,t,t,t,n);return h.placeholder=Rl.placeholder,h}function Nl(r,n,a){var h,p,_,O,N,q,X=0,Z=!1,ie=!1,he=!0;if(typeof r!="function")throw new Lr(d);n=qr(n)||0,Et(a)&&(Z=!!a.leading,ie="maxWait"in a,_=ie?Kt(qr(a.maxWait)||0,n):_,he="trailing"in a?!!a.trailing:he);function ye(Nt){var Vr=h,mi=p;return h=p=t,X=Nt,O=r.apply(mi,Vr),O}function Ee(Nt){return X=Nt,N=hs(We,n),Z?ye(Nt):O}function ze(Nt){var Vr=Nt-q,mi=Nt-X,Xl=n-Vr;return ie?Xt(Xl,_-mi):Xl}function De(Nt){var Vr=Nt-q,mi=Nt-X;return q===t||Vr>=n||Vr<0||ie&&mi>=_}function We(){var Nt=Lo();if(De(Nt))return Xe(Nt);N=hs(We,ze(Nt))}function Xe(Nt){return N=t,he&&h?ye(Nt):(h=p=t,O)}function xr(){N!==t&&Bh(N),X=0,h=q=p=N=t}function ar(){return N===t?O:Xe(Lo())}function Or(){var Nt=Lo(),Vr=De(Nt);if(h=arguments,p=this,q=Nt,Vr){if(N===t)return Ee(q);if(ie)return Bh(N),N=hs(We,n),ye(q)}return N===t&&(N=hs(We,n)),O}return Or.cancel=xr,Or.flush=ar,Or}var om=Ke(function(r,n){return Eh(r,1,n)}),am=Ke(function(r,n,a){return Eh(r,qr(n)||0,a)});function cm(r){return di(r,W)}function Uo(r,n){if(typeof r!="function"||n!=null&&typeof n!="function")throw new Lr(d);var a=function(){var h=arguments,p=n?n.apply(this,h):h[0],_=a.cache;if(_.has(p))return _.get(p);var O=r.apply(this,h);return a.cache=_.set(p,O)||_,O};return a.cache=new(Uo.Cache||li),a}Uo.Cache=li;function $o(r){if(typeof r!="function")throw new Lr(d);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}function um(r){return Cl(2,r)}var hm=J0(function(r,n){n=n.length==1&&Re(n[0])?_t(n[0],Dr(_e())):_t(Yt(n,1),Dr(_e()));var a=n.length;return Ke(function(h){for(var p=-1,_=Xt(h.length,a);++p<_;)h[p]=n[p].call(this,h[p]);return kt(r,this,h)})}),Oc=Ke(function(r,n){var a=Ai(n,Tn(Oc));return di(r,R,t,n,a)}),Ll=Ke(function(r,n){var a=Ai(n,Tn(Ll));return di(r,E,t,n,a)}),lm=pi(function(r,n){return di(r,w,t,t,t,n)});function fm(r,n){if(typeof r!="function")throw new Lr(d);return n=n===t?n:je(n),Ke(r,n)}function dm(r,n){if(typeof r!="function")throw new Lr(d);return n=n==null?0:Kt(je(n),0),Ke(function(a){var h=a[n],p=Ui(a,0,n);return h&&Ci(p,h),kt(r,this,p)})}function pm(r,n,a){var h=!0,p=!0;if(typeof r!="function")throw new Lr(d);return Et(a)&&(h="leading"in a?!!a.leading:h,p="trailing"in a?!!a.trailing:p),Nl(r,n,{leading:h,maxWait:n,trailing:p})}function gm(r){return Pl(r,1)}function ym(r,n){return Oc(lc(n),r)}function vm(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function mm(r){return $r(r,A)}function _m(r,n){return n=typeof n=="function"?n:t,$r(r,A,n)}function wm(r){return $r(r,D|A)}function bm(r,n){return n=typeof n=="function"?n:t,$r(r,D|A,n)}function Em(r,n){return n==null||bh(r,n,Vt(n))}function kr(r,n){return r===n||r!==r&&n!==n}var Dm=Po(Za),Sm=Po(function(r,n){return r>=n}),tn=Oh(function(){return arguments}())?Oh:function(r){return Ct(r)&&nt.call(r,"callee")&&!dh.call(r,"callee")},Re=K.isArray,Im=nr?Dr(nr):N0;function gr(r){return r!=null&&Mo(r.length)&&!yi(r)}function Rt(r){return Ct(r)&&gr(r)}function xm(r){return r===!0||r===!1||Ct(r)&&sr(r)==F}var $i=Fg||jc,Om=Hr?Dr(Hr):L0;function Pm(r){return Ct(r)&&r.nodeType===1&&!ls(r)}function Cm(r){if(r==null)return!0;if(gr(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||$i(r)||Rn(r)||tn(r)))return!r.length;var n=Zt(r);if(n==Ie||n==xe)return!r.size;if(us(r))return!rc(r).length;for(var a in r)if(nt.call(r,a))return!1;return!0}function Am(r,n){return os(r,n)}function Tm(r,n,a){a=typeof a=="function"?a:t;var h=a?a(r,n):t;return h===t?os(r,n,t,a):!!h}function Pc(r){if(!Ct(r))return!1;var n=sr(r);return n==T||n==l||typeof r.message=="string"&&typeof r.name=="string"&&!ls(r)}function Rm(r){return typeof r=="number"&&gh(r)}function yi(r){if(!Et(r))return!1;var n=sr(r);return n==ae||n==fe||n==z||n==yt}function Ul(r){return typeof r=="number"&&r==je(r)}function Mo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=k}function Et(r){var n=typeof r;return r!=null&&(n=="object"||n=="function")}function Ct(r){return r!=null&&typeof r=="object"}var $l=Rr?Dr(Rr):$0;function Nm(r,n){return r===n||tc(r,n,mc(n))}function Lm(r,n,a){return a=typeof a=="function"?a:t,tc(r,n,mc(n),a)}function Um(r){return Ml(r)&&r!=+r}function $m(r){if(_y(r))throw new Ae(c);return Ph(r)}function Mm(r){return r===null}function jm(r){return r==null}function Ml(r){return typeof r=="number"||Ct(r)&&sr(r)==He}function ls(r){if(!Ct(r)||sr(r)!=Me)return!1;var n=uo(r);if(n===null)return!0;var a=nt.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&so.call(a)==Lg}var Cc=Zr?Dr(Zr):M0;function qm(r){return Ul(r)&&r>=-k&&r<=k}var jl=Jn?Dr(Jn):j0;function jo(r){return typeof r=="string"||!Re(r)&&Ct(r)&&sr(r)==Ne}function Ir(r){return typeof r=="symbol"||Ct(r)&&sr(r)==Le}var Rn=Wi?Dr(Wi):q0;function Fm(r){return r===t}function zm(r){return Ct(r)&&Zt(r)==Pe}function Hm(r){return Ct(r)&&sr(r)==Ue}var Bm=Po(ic),Km=Po(function(r,n){return r<=n});function ql(r){if(!r)return[];if(gr(r))return jo(r)?Br(r):pr(r);if(Xn&&r[Xn])return Eg(r[Xn]());var n=Zt(r),a=n==Ie?Ka:n==xe?ro:Nn;return a(r)}function vi(r){if(!r)return r===0?r:0;if(r=qr(r),r===Q||r===-Q){var n=r<0?-1:1;return n*V}return r===r?r:0}function je(r){var n=vi(r),a=n%1;return n===n?a?n-a:n:0}function Fl(r){return r?Qi(je(r),0,re):0}function qr(r){if(typeof r=="number")return r;if(Ir(r))return J;if(Et(r)){var n=typeof r.valueOf=="function"?r.valueOf():r;r=Et(n)?n+"":n}if(typeof r!="string")return r===0?r:+r;r=sh(r);var a=_a.test(r);return a||ba.test(r)?Te(r.slice(2),a?2:8):ma.test(r)?J:+r}function zl(r){return ti(r,yr(r))}function km(r){return r?Qi(je(r),-k,k):r===0?r:0}function it(r){return r==null?"":Sr(r)}var Vm=Cn(function(r,n){if(us(n)||gr(n)){ti(n,Vt(n),r);return}for(var a in n)nt.call(n,a)&&is(r,a,n[a])}),Hl=Cn(function(r,n){ti(n,yr(n),r)}),qo=Cn(function(r,n,a,h){ti(n,yr(n),r,h)}),Wm=Cn(function(r,n,a,h){ti(n,Vt(n),r,h)}),Gm=pi(Ja);function Ym(r,n){var a=Pn(r);return n==null?a:wh(a,n)}var Jm=Ke(function(r,n){r=ht(r);var a=-1,h=n.length,p=h>2?n[2]:t;for(p&&or(n[0],n[1],p)&&(h=1);++a<h;)for(var _=n[a],O=yr(_),N=-1,q=O.length;++N<q;){var X=O[N],Z=r[X];(Z===t||kr(Z,In[X])&&!nt.call(r,X))&&(r[X]=_[X])}return r}),Qm=Ke(function(r){return r.push(t,sl),kt(Bl,t,r)});function Xm(r,n){return th(r,_e(n,3),ei)}function Zm(r,n){return th(r,_e(n,3),Xa)}function e_(r,n){return r==null?r:Qa(r,_e(n,3),yr)}function t_(r,n){return r==null?r:Ih(r,_e(n,3),yr)}function r_(r,n){return r&&ei(r,_e(n,3))}function i_(r,n){return r&&Xa(r,_e(n,3))}function n_(r){return r==null?[]:wo(r,Vt(r))}function s_(r){return r==null?[]:wo(r,yr(r))}function Ac(r,n,a){var h=r==null?t:Xi(r,n);return h===t?a:h}function o_(r,n){return r!=null&&cl(r,n,C0)}function Tc(r,n){return r!=null&&cl(r,n,A0)}var a_=el(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=oo.call(n)),r[n]=a},Nc(vr)),c_=el(function(r,n,a){n!=null&&typeof n.toString!="function"&&(n=oo.call(n)),nt.call(r,n)?r[n].push(a):r[n]=[a]},_e),u_=Ke(ss);function Vt(r){return gr(r)?mh(r):rc(r)}function yr(r){return gr(r)?mh(r,!0):F0(r)}function h_(r,n){var a={};return n=_e(n,3),ei(r,function(h,p,_){fi(a,n(h,p,_),h)}),a}function l_(r,n){var a={};return n=_e(n,3),ei(r,function(h,p,_){fi(a,p,n(h,p,_))}),a}var f_=Cn(function(r,n,a){bo(r,n,a)}),Bl=Cn(function(r,n,a,h){bo(r,n,a,h)}),d_=pi(function(r,n){var a={};if(r==null)return a;var h=!1;n=_t(n,function(_){return _=Li(_,r),h||(h=_.length>1),_}),ti(r,yc(r),a),h&&(a=$r(a,D|I|A,ay));for(var p=n.length;p--;)cc(a,n[p]);return a});function p_(r,n){return Kl(r,$o(_e(n)))}var g_=pi(function(r,n){return r==null?{}:H0(r,n)});function Kl(r,n){if(r==null)return{};var a=_t(yc(r),function(h){return[h]});return n=_e(n),Uh(r,a,function(h,p){return n(h,p[0])})}function y_(r,n,a){n=Li(n,r);var h=-1,p=n.length;for(p||(p=1,r=t);++h<p;){var _=r==null?t:r[ri(n[h])];_===t&&(h=p,_=a),r=yi(_)?_.call(r):_}return r}function v_(r,n,a){return r==null?r:as(r,n,a)}function m_(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:as(r,n,a,h)}var kl=il(Vt),Vl=il(yr);function __(r,n,a){var h=Re(r),p=h||$i(r)||Rn(r);if(n=_e(n,4),a==null){var _=r&&r.constructor;p?a=h?new _:[]:Et(r)?a=yi(_)?Pn(uo(r)):{}:a={}}return(p?Nr:ei)(r,function(O,N,q){return n(a,O,N,q)}),a}function w_(r,n){return r==null?!0:cc(r,n)}function b_(r,n,a){return r==null?r:Fh(r,n,lc(a))}function E_(r,n,a,h){return h=typeof h=="function"?h:t,r==null?r:Fh(r,n,lc(a),h)}function Nn(r){return r==null?[]:Ba(r,Vt(r))}function D_(r){return r==null?[]:Ba(r,yr(r))}function S_(r,n,a){return a===t&&(a=n,n=t),a!==t&&(a=qr(a),a=a===a?a:0),n!==t&&(n=qr(n),n=n===n?n:0),Qi(qr(r),n,a)}function I_(r,n,a){return n=vi(n),a===t?(a=n,n=0):a=vi(a),r=qr(r),T0(r,n,a)}function x_(r,n,a){if(a&&typeof a!="boolean"&&or(r,n,a)&&(n=a=t),a===t&&(typeof n=="boolean"?(a=n,n=t):typeof r=="boolean"&&(a=r,r=t)),r===t&&n===t?(r=0,n=1):(r=vi(r),n===t?(n=r,r=0):n=vi(n)),r>n){var h=r;r=n,n=h}if(a||r%1||n%1){var p=yh();return Xt(r+p*(n-r+ct("1e-"+((p+"").length-1))),n)}return sc(r,n)}var O_=An(function(r,n,a){return n=n.toLowerCase(),r+(a?Wl(n):n)});function Wl(r){return Rc(it(r).toLowerCase())}function Gl(r){return r=it(r),r&&r.replace(ci,vg).replace(La,"")}function P_(r,n,a){r=it(r),n=Sr(n);var h=r.length;a=a===t?h:Qi(je(a),0,h);var p=a;return a-=n.length,a>=0&&r.slice(a,p)==n}function C_(r){return r=it(r),r&&vt.test(r)?r.replace(Hi,mg):r}function A_(r){return r=it(r),r&&Mt.test(r)?r.replace(xt,"\\$&"):r}var T_=An(function(r,n,a){return r+(a?"-":"")+n.toLowerCase()}),R_=An(function(r,n,a){return r+(a?" ":"")+n.toLowerCase()}),N_=Qh("toLowerCase");function L_(r,n,a){r=it(r),n=je(n);var h=n?Dn(r):0;if(!n||h>=n)return r;var p=(n-h)/2;return Oo(po(p),a)+r+Oo(fo(p),a)}function U_(r,n,a){r=it(r),n=je(n);var h=n?Dn(r):0;return n&&h<n?r+Oo(n-h,a):r}function $_(r,n,a){r=it(r),n=je(n);var h=n?Dn(r):0;return n&&h<n?Oo(n-h,a)+r:r}function M_(r,n,a){return a||n==null?n=0:n&&(n=+n),Kg(it(r).replace(Ot,""),n||0)}function j_(r,n,a){return(a?or(r,n,a):n===t)?n=1:n=je(n),oc(it(r),n)}function q_(){var r=arguments,n=it(r[0]);return r.length<3?n:n.replace(r[1],r[2])}var F_=An(function(r,n,a){return r+(a?"_":"")+n.toLowerCase()});function z_(r,n,a){return a&&typeof a!="number"&&or(r,n,a)&&(n=a=t),a=a===t?re:a>>>0,a?(r=it(r),r&&(typeof n=="string"||n!=null&&!Cc(n))&&(n=Sr(n),!n&&En(r))?Ui(Br(r),0,a):r.split(n,a)):[]}var H_=An(function(r,n,a){return r+(a?" ":"")+Rc(n)});function B_(r,n,a){return r=it(r),a=a==null?0:Qi(je(a),0,r.length),n=Sr(n),r.slice(a,a+n.length)==n}function K_(r,n,a){var h=v.templateSettings;a&&or(r,n,a)&&(n=t),r=it(r),n=qo({},n,h,nl);var p=qo({},n.imports,h.imports,nl),_=Vt(p),O=Ba(p,_),N,q,X=0,Z=n.interpolate||pn,ie="__p += '",he=ka((n.escape||pn).source+"|"+Z.source+"|"+(Z===bt?va:pn).source+"|"+(n.evaluate||pn).source+"|$","g"),ye="//# sourceURL="+(nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ua+"]")+`
`;r.replace(he,function(De,We,Xe,xr,ar,Or){return Xe||(Xe=xr),ie+=r.slice(X,Or).replace(Da,_g),We&&(N=!0,ie+=`' +
__e(`+We+`) +
'`),ar&&(q=!0,ie+=`';
`+ar+`;
__p += '`),Xe&&(ie+=`' +
((__t = (`+Xe+`)) == null ? '' : __t) +
'`),X=Or+De.length,De}),ie+=`';
`;var Ee=nt.call(n,"variable")&&n.variable;if(!Ee)ie=`with (obj) {
`+ie+`
}
`;else if(ga.test(Ee))throw new Ae(f);ie=(q?ie.replace(Qr,""):ie).replace(ir,"$1").replace(ai,"$1;"),ie="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(N?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var ze=Jl(function(){return rt(_,ye+"return "+ie).apply(t,O)});if(ze.source=ie,Pc(ze))throw ze;return ze}function k_(r){return it(r).toLowerCase()}function V_(r){return it(r).toUpperCase()}function W_(r,n,a){if(r=it(r),r&&(a||n===t))return sh(r);if(!r||!(n=Sr(n)))return r;var h=Br(r),p=Br(n),_=oh(h,p),O=ah(h,p)+1;return Ui(h,_,O).join("")}function G_(r,n,a){if(r=it(r),r&&(a||n===t))return r.slice(0,uh(r)+1);if(!r||!(n=Sr(n)))return r;var h=Br(r),p=ah(h,Br(n))+1;return Ui(h,0,p).join("")}function Y_(r,n,a){if(r=it(r),r&&(a||n===t))return r.replace(Ot,"");if(!r||!(n=Sr(n)))return r;var h=Br(r),p=oh(h,Br(n));return Ui(h,p).join("")}function J_(r,n){var a=G,h=se;if(Et(n)){var p="separator"in n?n.separator:p;a="length"in n?je(n.length):a,h="omission"in n?Sr(n.omission):h}r=it(r);var _=r.length;if(En(r)){var O=Br(r);_=O.length}if(a>=_)return r;var N=a-Dn(h);if(N<1)return h;var q=O?Ui(O,0,N).join(""):r.slice(0,N);if(p===t)return q+h;if(O&&(N+=q.length-N),Cc(p)){if(r.slice(N).search(p)){var X,Z=q;for(p.global||(p=ka(p.source,it(Tr.exec(p))+"g")),p.lastIndex=0;X=p.exec(Z);)var ie=X.index;q=q.slice(0,ie===t?N:ie)}}else if(r.indexOf(Sr(p),N)!=N){var he=q.lastIndexOf(p);he>-1&&(q=q.slice(0,he))}return q+h}function Q_(r){return r=it(r),r&&Dt.test(r)?r.replace(xi,xg):r}var X_=An(function(r,n,a){return r+(a?" ":"")+n.toUpperCase()}),Rc=Qh("toUpperCase");function Yl(r,n,a){return r=it(r),n=a?t:n,n===t?bg(r)?Cg(r):fg(r):r.match(n)||[]}var Jl=Ke(function(r,n){try{return kt(r,t,n)}catch(a){return Pc(a)?a:new Ae(a)}}),Z_=pi(function(r,n){return Nr(n,function(a){a=ri(a),fi(r,a,xc(r[a],r))}),r});function ew(r){var n=r==null?0:r.length,a=_e();return r=n?_t(r,function(h){if(typeof h[1]!="function")throw new Lr(d);return[a(h[0]),h[1]]}):[],Ke(function(h){for(var p=-1;++p<n;){var _=r[p];if(kt(_[0],this,h))return kt(_[1],this,h)}})}function tw(r){return x0($r(r,D))}function Nc(r){return function(){return r}}function rw(r,n){return r==null||r!==r?n:r}var iw=Zh(),nw=Zh(!0);function vr(r){return r}function Lc(r){return Ch(typeof r=="function"?r:$r(r,D))}function sw(r){return Th($r(r,D))}function ow(r,n){return Rh(r,$r(n,D))}var aw=Ke(function(r,n){return function(a){return ss(a,r,n)}}),cw=Ke(function(r,n){return function(a){return ss(r,a,n)}});function Uc(r,n,a){var h=Vt(n),p=wo(n,h);a==null&&!(Et(n)&&(p.length||!h.length))&&(a=n,n=r,r=this,p=wo(n,Vt(n)));var _=!(Et(a)&&"chain"in a)||!!a.chain,O=yi(r);return Nr(p,function(N){var q=n[N];r[N]=q,O&&(r.prototype[N]=function(){var X=this.__chain__;if(_||X){var Z=r(this.__wrapped__),ie=Z.__actions__=pr(this.__actions__);return ie.push({func:q,args:arguments,thisArg:r}),Z.__chain__=X,Z}return q.apply(r,Ci([this.value()],arguments))})}),r}function uw(){return Qe._===this&&(Qe._=Ug),this}function $c(){}function hw(r){return r=je(r),Ke(function(n){return Nh(n,r)})}var lw=dc(_t),fw=dc(eh),dw=dc(ja);function Ql(r){return wc(r)?qa(ri(r)):B0(r)}function pw(r){return function(n){return r==null?t:Xi(r,n)}}var gw=tl(),yw=tl(!0);function Mc(){return[]}function jc(){return!1}function vw(){return{}}function mw(){return""}function _w(){return!0}function ww(r,n){if(r=je(r),r<1||r>k)return[];var a=re,h=Xt(r,re);n=_e(n),r-=re;for(var p=Ha(h,n);++a<r;)n(a);return p}function bw(r){return Re(r)?_t(r,ri):Ir(r)?[r]:pr(vl(it(r)))}function Ew(r){var n=++Ng;return it(r)+n}var Dw=xo(function(r,n){return r+n},0),Sw=pc("ceil"),Iw=xo(function(r,n){return r/n},1),xw=pc("floor");function Ow(r){return r&&r.length?_o(r,vr,Za):t}function Pw(r,n){return r&&r.length?_o(r,_e(n,2),Za):t}function Cw(r){return ih(r,vr)}function Aw(r,n){return ih(r,_e(n,2))}function Tw(r){return r&&r.length?_o(r,vr,ic):t}function Rw(r,n){return r&&r.length?_o(r,_e(n,2),ic):t}var Nw=xo(function(r,n){return r*n},1),Lw=pc("round"),Uw=xo(function(r,n){return r-n},0);function $w(r){return r&&r.length?za(r,vr):0}function Mw(r,n){return r&&r.length?za(r,_e(n,2)):0}return v.after=sm,v.ary=Pl,v.assign=Vm,v.assignIn=Hl,v.assignInWith=qo,v.assignWith=Wm,v.at=Gm,v.before=Cl,v.bind=xc,v.bindAll=Z_,v.bindKey=Al,v.castArray=vm,v.chain=Il,v.chunk=xy,v.compact=Oy,v.concat=Py,v.cond=ew,v.conforms=tw,v.constant=Nc,v.countBy=$v,v.create=Ym,v.curry=Tl,v.curryRight=Rl,v.debounce=Nl,v.defaults=Jm,v.defaultsDeep=Qm,v.defer=om,v.delay=am,v.difference=Cy,v.differenceBy=Ay,v.differenceWith=Ty,v.drop=Ry,v.dropRight=Ny,v.dropRightWhile=Ly,v.dropWhile=Uy,v.fill=$y,v.filter=jv,v.flatMap=zv,v.flatMapDeep=Hv,v.flatMapDepth=Bv,v.flatten=bl,v.flattenDeep=My,v.flattenDepth=jy,v.flip=cm,v.flow=iw,v.flowRight=nw,v.fromPairs=qy,v.functions=n_,v.functionsIn=s_,v.groupBy=Kv,v.initial=zy,v.intersection=Hy,v.intersectionBy=By,v.intersectionWith=Ky,v.invert=a_,v.invertBy=c_,v.invokeMap=Vv,v.iteratee=Lc,v.keyBy=Wv,v.keys=Vt,v.keysIn=yr,v.map=No,v.mapKeys=h_,v.mapValues=l_,v.matches=sw,v.matchesProperty=ow,v.memoize=Uo,v.merge=f_,v.mergeWith=Bl,v.method=aw,v.methodOf=cw,v.mixin=Uc,v.negate=$o,v.nthArg=hw,v.omit=d_,v.omitBy=p_,v.once=um,v.orderBy=Gv,v.over=lw,v.overArgs=hm,v.overEvery=fw,v.overSome=dw,v.partial=Oc,v.partialRight=Ll,v.partition=Yv,v.pick=g_,v.pickBy=Kl,v.property=Ql,v.propertyOf=pw,v.pull=Gy,v.pullAll=Dl,v.pullAllBy=Yy,v.pullAllWith=Jy,v.pullAt=Qy,v.range=gw,v.rangeRight=yw,v.rearg=lm,v.reject=Xv,v.remove=Xy,v.rest=fm,v.reverse=Sc,v.sampleSize=em,v.set=v_,v.setWith=m_,v.shuffle=tm,v.slice=Zy,v.sortBy=nm,v.sortedUniq=ov,v.sortedUniqBy=av,v.split=z_,v.spread=dm,v.tail=cv,v.take=uv,v.takeRight=hv,v.takeRightWhile=lv,v.takeWhile=fv,v.tap=Ov,v.throttle=pm,v.thru=Ro,v.toArray=ql,v.toPairs=kl,v.toPairsIn=Vl,v.toPath=bw,v.toPlainObject=zl,v.transform=__,v.unary=gm,v.union=dv,v.unionBy=pv,v.unionWith=gv,v.uniq=yv,v.uniqBy=vv,v.uniqWith=mv,v.unset=w_,v.unzip=Ic,v.unzipWith=Sl,v.update=b_,v.updateWith=E_,v.values=Nn,v.valuesIn=D_,v.without=_v,v.words=Yl,v.wrap=ym,v.xor=wv,v.xorBy=bv,v.xorWith=Ev,v.zip=Dv,v.zipObject=Sv,v.zipObjectDeep=Iv,v.zipWith=xv,v.entries=kl,v.entriesIn=Vl,v.extend=Hl,v.extendWith=qo,Uc(v,v),v.add=Dw,v.attempt=Jl,v.camelCase=O_,v.capitalize=Wl,v.ceil=Sw,v.clamp=S_,v.clone=mm,v.cloneDeep=wm,v.cloneDeepWith=bm,v.cloneWith=_m,v.conformsTo=Em,v.deburr=Gl,v.defaultTo=rw,v.divide=Iw,v.endsWith=P_,v.eq=kr,v.escape=C_,v.escapeRegExp=A_,v.every=Mv,v.find=qv,v.findIndex=_l,v.findKey=Xm,v.findLast=Fv,v.findLastIndex=wl,v.findLastKey=Zm,v.floor=xw,v.forEach=xl,v.forEachRight=Ol,v.forIn=e_,v.forInRight=t_,v.forOwn=r_,v.forOwnRight=i_,v.get=Ac,v.gt=Dm,v.gte=Sm,v.has=o_,v.hasIn=Tc,v.head=El,v.identity=vr,v.includes=kv,v.indexOf=Fy,v.inRange=I_,v.invoke=u_,v.isArguments=tn,v.isArray=Re,v.isArrayBuffer=Im,v.isArrayLike=gr,v.isArrayLikeObject=Rt,v.isBoolean=xm,v.isBuffer=$i,v.isDate=Om,v.isElement=Pm,v.isEmpty=Cm,v.isEqual=Am,v.isEqualWith=Tm,v.isError=Pc,v.isFinite=Rm,v.isFunction=yi,v.isInteger=Ul,v.isLength=Mo,v.isMap=$l,v.isMatch=Nm,v.isMatchWith=Lm,v.isNaN=Um,v.isNative=$m,v.isNil=jm,v.isNull=Mm,v.isNumber=Ml,v.isObject=Et,v.isObjectLike=Ct,v.isPlainObject=ls,v.isRegExp=Cc,v.isSafeInteger=qm,v.isSet=jl,v.isString=jo,v.isSymbol=Ir,v.isTypedArray=Rn,v.isUndefined=Fm,v.isWeakMap=zm,v.isWeakSet=Hm,v.join=ky,v.kebabCase=T_,v.last=jr,v.lastIndexOf=Vy,v.lowerCase=R_,v.lowerFirst=N_,v.lt=Bm,v.lte=Km,v.max=Ow,v.maxBy=Pw,v.mean=Cw,v.meanBy=Aw,v.min=Tw,v.minBy=Rw,v.stubArray=Mc,v.stubFalse=jc,v.stubObject=vw,v.stubString=mw,v.stubTrue=_w,v.multiply=Nw,v.nth=Wy,v.noConflict=uw,v.noop=$c,v.now=Lo,v.pad=L_,v.padEnd=U_,v.padStart=$_,v.parseInt=M_,v.random=x_,v.reduce=Jv,v.reduceRight=Qv,v.repeat=j_,v.replace=q_,v.result=y_,v.round=Lw,v.runInContext=j,v.sample=Zv,v.size=rm,v.snakeCase=F_,v.some=im,v.sortedIndex=ev,v.sortedIndexBy=tv,v.sortedIndexOf=rv,v.sortedLastIndex=iv,v.sortedLastIndexBy=nv,v.sortedLastIndexOf=sv,v.startCase=H_,v.startsWith=B_,v.subtract=Uw,v.sum=$w,v.sumBy=Mw,v.template=K_,v.times=ww,v.toFinite=vi,v.toInteger=je,v.toLength=Fl,v.toLower=k_,v.toNumber=qr,v.toSafeInteger=km,v.toString=it,v.toUpper=V_,v.trim=W_,v.trimEnd=G_,v.trimStart=Y_,v.truncate=J_,v.unescape=Q_,v.uniqueId=Ew,v.upperCase=X_,v.upperFirst=Rc,v.each=xl,v.eachRight=Ol,v.first=El,Uc(v,function(){var r={};return ei(v,function(n,a){nt.call(v.prototype,a)||(r[a]=n)}),r}(),{chain:!1}),v.VERSION=s,Nr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){v[r].placeholder=v}),Nr(["drop","take"],function(r,n){Ye.prototype[r]=function(a){a=a===t?1:Kt(je(a),0);var h=this.__filtered__&&!n?new Ye(this):this.clone();return h.__filtered__?h.__takeCount__=Xt(a,h.__takeCount__):h.__views__.push({size:Xt(a,re),type:r+(h.__dir__<0?"Right":"")}),h},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Nr(["filter","map","takeWhile"],function(r,n){var a=n+1,h=a==b||a==ee;Ye.prototype[r]=function(p){var _=this.clone();return _.__iteratees__.push({iteratee:_e(p,3),type:a}),_.__filtered__=_.__filtered__||h,_}}),Nr(["head","last"],function(r,n){var a="take"+(n?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Nr(["initial","tail"],function(r,n){var a="drop"+(n?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(vr)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=Ke(function(r,n){return typeof r=="function"?new Ye(this):this.map(function(a){return ss(a,r,n)})}),Ye.prototype.reject=function(r){return this.filter($o(_e(r)))},Ye.prototype.slice=function(r,n){r=je(r);var a=this;return a.__filtered__&&(r>0||n<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),n!==t&&(n=je(n),a=n<0?a.dropRight(-n):a.take(n-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(re)},ei(Ye.prototype,function(r,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),p=v[h?"take"+(n=="last"?"Right":""):n],_=h||/^find/.test(n);p&&(v.prototype[n]=function(){var O=this.__wrapped__,N=h?[1]:arguments,q=O instanceof Ye,X=N[0],Z=q||Re(O),ie=function(We){var Xe=p.apply(v,Ci([We],N));return h&&he?Xe[0]:Xe};Z&&a&&typeof X=="function"&&X.length!=1&&(q=Z=!1);var he=this.__chain__,ye=!!this.__actions__.length,Ee=_&&!he,ze=q&&!ye;if(!_&&Z){O=ze?O:new Ye(this);var De=r.apply(O,N);return De.__actions__.push({func:Ro,args:[ie],thisArg:t}),new Ur(De,he)}return Ee&&ze?r.apply(this,N):(De=this.thru(ie),Ee?h?De.value()[0]:De.value():De)})}),Nr(["pop","push","shift","sort","splice","unshift"],function(r){var n=io[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",h=/^(?:pop|shift)$/.test(r);v.prototype[r]=function(){var p=arguments;if(h&&!this.__chain__){var _=this.value();return n.apply(Re(_)?_:[],p)}return this[a](function(O){return n.apply(Re(O)?O:[],p)})}}),ei(Ye.prototype,function(r,n){var a=v[n];if(a){var h=a.name+"";nt.call(On,h)||(On[h]=[]),On[h].push({name:n,func:a})}}),On[Io(t,ne).name]=[{name:"wrapper",func:t}],Ye.prototype.clone=Qg,Ye.prototype.reverse=Xg,Ye.prototype.value=Zg,v.prototype.at=Pv,v.prototype.chain=Cv,v.prototype.commit=Av,v.prototype.next=Tv,v.prototype.plant=Nv,v.prototype.reverse=Lv,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=Uv,v.prototype.first=v.prototype.head,Xn&&(v.prototype[Xn]=Rv),v},Sn=Ag();Tt?((Tt.exports=Sn)._=Sn,ut._=Sn):Qe._=Sn}).call(ws)})(xu,xu.exports);var CI=Object.defineProperty,AI=Object.defineProperties,TI=Object.getOwnPropertyDescriptors,Ad=Object.getOwnPropertySymbols,RI=Object.prototype.hasOwnProperty,NI=Object.prototype.propertyIsEnumerable,Td=(i,e,t)=>e in i?CI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ko=(i,e)=>{for(var t in e||(e={}))RI.call(e,t)&&Td(i,t,e[t]);if(Ad)for(var t of Ad(e))NI.call(e,t)&&Td(i,t,e[t]);return i},LI=(i,e)=>AI(i,TI(e));function qi(i,e,t){var s;const o=ME(i);return((s=e.rpcMap)==null?void 0:s[o.reference])||`${PI}?chainId=${o.namespace}:${o.reference}&projectId=${t}`}function dn(i){return i.includes(":")?i.split(":")[1]:i}function sg(i){return i.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function UI(i,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(i));if(!t.length)return[];const s=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;s.push(...c)}),s}function $I(i={},e={}){const t=Rd(i),s=Rd(e);return xu.exports.merge(t,s)}function Rd(i){var e,t,s,o;const c={};if(!qn(i))return c;for(const[d,f]of Object.entries(i)){const y=Hu(d)?[d]:f.chains,g=f.methods||[],m=f.events||[],D=f.rpcMap||{},I=bs(d);c[I]=LI(Ko(Ko({},c[I]),f),{chains:Kc(y,(e=c[I])==null?void 0:e.chains),methods:Kc(g,(t=c[I])==null?void 0:t.methods),events:Kc(m,(s=c[I])==null?void 0:s.events),rpcMap:Ko(Ko({},D),(o=c[I])==null?void 0:o.rpcMap)})}return c}function MI(i){return i.includes(":")?i.split(":")[2]:i}function jI(i){const e={};for(const[t,s]of Object.entries(i)){const o=s.methods||[],c=s.events||[],d=s.accounts||[],f=Hu(t)?[t]:s.chains?s.chains:sg(s.accounts);e[t]={chains:f,methods:o,events:c,accounts:d}}return e}function iu(i){return typeof i=="number"?i:i.includes("0x")?parseInt(i,16):i.includes(":")?Number(i.split(":")[1]):Number(i)}const og={},wt=i=>og[i],nu=(i,e)=>{og[i]=e};class qI{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class FI{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||qi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=parseInt(dn(t));e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class zI{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class HI{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class BI{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const s=this.getCardanoRPCUrl(t),o=dn(t);e[o]=this.createHttpProvider(o,s)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class KI{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class kI{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;const o=dn(t);e[o]=this.createHttpProvider(o,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new Si(new zi(s,wt("disableProviderPing")))}}class VI{constructor(e){this.name="near",this.namespace=e.namespace,this.events=wt("events"),this.client=wt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||qi(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(Ii.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,(s=this.namespace.rpcMap)==null?void 0:s[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||qi(e,this.namespace);return typeof s>"u"?void 0:new Si(new zi(s,wt("disableProviderPing")))}}var WI=Object.defineProperty,GI=Object.defineProperties,YI=Object.getOwnPropertyDescriptors,Nd=Object.getOwnPropertySymbols,JI=Object.prototype.hasOwnProperty,QI=Object.prototype.propertyIsEnumerable,Ld=(i,e,t)=>e in i?WI(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ko=(i,e)=>{for(var t in e||(e={}))JI.call(e,t)&&Ld(i,t,e[t]);if(Nd)for(var t of Nd(e))QI.call(e,t)&&Ld(i,t,e[t]);return i},su=(i,e)=>GI(i,YI(e));class Xu{constructor(e){this.events=new Ru,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Ze.pino(Ze.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Pd})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new Xu(e);return await t.initialize(),t}async request(e,t){const[s,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:ko({},e),chainId:`${s}:${o}`,topic:this.session.topic})}sendAsync(e,t,s){this.request(e,s).then(o=>t(null,o)).catch(o=>t(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Lt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=jI(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==ig)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,o]=this.validateChain(e);this.getProvider(s).setDefaultChain(o,t)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(si(t)){for(const s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await bI.init({logger:this.providerOpts.logger||Pd,relayUrl:this.providerOpts.relayUrl||II,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>bs(t)))];nu("client",this.client),nu("events",this.events),nu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const s=UI(t,this.session),o=sg(s),c=$I(this.namespaces,this.optionalNamespaces),d=su(ko({},c[t]),{accounts:s,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new FI({namespace:d});break;case"solana":this.rpcProviders[t]=new zI({namespace:d});break;case"cosmos":this.rpcProviders[t]=new HI({namespace:d});break;case"polkadot":this.rpcProviders[t]=new qI({namespace:d});break;case"cip34":this.rpcProviders[t]=new BI({namespace:d});break;case"elrond":this.rpcProviders[t]=new KI({namespace:d});break;case"multiversx":this.rpcProviders[t]=new kI({namespace:d});break;case"near":this.rpcProviders[t]=new VI({namespace:d});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:s}=t;if(s.name==="accountsChanged"){const o=s.data;o&&si(o)&&this.events.emit("accountsChanged",o.map(MI))}else if(s.name==="chainChanged"){const o=t.chainId,c=t.event.data,d=bs(o),f=iu(o)!==iu(c)?`${d}:${iu(c)}`:o;this.onChainChanged(f)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s;const{namespaces:o}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=su(ko({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",su(ko({},Lt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Ii.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:s,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",s)}validateChain(e){const[t,s]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(d=>bs(d)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];const o=bs(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var s;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((s=this.namespaces[o])!=null?s:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Cd}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Cd}/${e}`)}}const XI=Xu,ZI="wc",e5="ethereum_provider",t5=`${ZI}@2:${e5}:`,r5="https://rpc.walletconnect.com/v1/",Ou=["eth_sendTransaction","personal_sign"],i5=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Pu=["chainChanged","accountsChanged"],n5=["chainChanged","accountsChanged","message","disconnect","connect"];var s5=Object.defineProperty,o5=Object.defineProperties,a5=Object.getOwnPropertyDescriptors,Ud=Object.getOwnPropertySymbols,c5=Object.prototype.hasOwnProperty,u5=Object.prototype.propertyIsEnumerable,$d=(i,e,t)=>e in i?s5(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ds=(i,e)=>{for(var t in e||(e={}))c5.call(e,t)&&$d(i,t,e[t]);if(Ud)for(var t of Ud(e))u5.call(e,t)&&$d(i,t,e[t]);return i},Md=(i,e)=>o5(i,a5(e));function ia(i){return Number(i[0].split(":")[1])}function ou(i){return`0x${i.toString(16)}`}function h5(i){const{chains:e,optionalChains:t,methods:s,optionalMethods:o,events:c,optionalEvents:d,rpcMap:f}=i;if(!si(e))throw new Error("Invalid chains");const y={chains:e,methods:s||Ou,events:c||Pu,rpcMap:Ds({},e.length?{[ia(e)]:f[ia(e)]}:{})},g=c==null?void 0:c.filter(A=>!Pu.includes(A)),m=s==null?void 0:s.filter(A=>!Ou.includes(A));if(!t&&!d&&!o&&!(g!=null&&g.length)&&!(m!=null&&m.length))return{required:e.length?y:void 0};const D=(g==null?void 0:g.length)&&(m==null?void 0:m.length)||!t,I={chains:[...new Set(D?y.chains.concat(t||[]):t)],methods:[...new Set(y.methods.concat(o!=null&&o.length?o:i5))],events:[...new Set(y.events.concat(d!=null&&d.length?d:n5))],rpcMap:f};return{required:e.length?y:void 0,optional:t.length?I:void 0}}class Zu{constructor(){this.events=new Cr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=t5,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Zu;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:s}=h5(this.rpc);try{const o=await new Promise(async(d,f)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),f(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Md(Ds({namespaces:Ds({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(g=>{d(g)}).catch(g=>{f(new Error(g.message))})});if(!o)return;const c=jE(o.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:ou(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:s}=t;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",ou(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Md(Ds({},Lt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(s=this.modal)==null||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",ou(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,s,o]=e.split(":");return{chainId:`${t}:${s}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;const o=(t=e==null?void 0:e.chains)!=null?t:[],c=(s=e==null?void 0:e.optionalChains)!=null?s:[],d=o.concat(c);if(!d.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const f=o.length?(e==null?void 0:e.methods)||Ou:[],y=o.length?(e==null?void 0:e.events)||Pu:[],g=(e==null?void 0:e.optionalMethods)||[],m=(e==null?void 0:e.optionalEvents)||[],D=(e==null?void 0:e.rpcMap)||this.buildRpcMap(d,e.projectId),I=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:o==null?void 0:o.map(A=>this.formatChainId(A)),optionalChains:c.map(A=>this.formatChainId(A)),methods:f,events:y,optionalMethods:g,optionalEvents:m,rpcMap:D,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:I,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const s={};return e.forEach(o=>{s[o]=this.getRpcUrl(o,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?ia(this.rpc.chains):ia(this.rpc.optionalChains),this.signer=await XI.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:s}=await jw(()=>import("./index-kXyDcuzp.js").then(o=>o.i),__vite__mapDeps([0,1]),import.meta.url);t=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Ds({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:s,rpcMap:o}=e;t&&si(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)})),s&&si(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s==null?void 0:s.map(c=>this.formatChainId(c)),s.forEach(c=>{this.rpc.rpcMap[c]=(o==null?void 0:o[c])||this.getRpcUrl(c)}))}getRpcUrl(e,t){var s;return((s=this.rpc.rpcMap)==null?void 0:s[e])||`${r5}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const O5=Zu;export{O5 as EthereumProvider,n5 as OPTIONAL_EVENTS,i5 as OPTIONAL_METHODS,Pu as REQUIRED_EVENTS,Ou as REQUIRED_METHODS,Zu as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index-kXyDcuzp.js","./index-2a8Vcb8y.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}